import{_ as a,r,f as A,j as s,k as C,u as rt,d as w,b as Y,a as ct,L as lt,O as dt,N as W}from"./index-Cr8A9Rf2.js";import{B as J}from"./app.config-D37xPo_M.js";import{u as ut,l as pt,a as mt}from"./auth-CONzj9NW.js";import{g as xt,D as gt}from"./listItemIconClasses-DEEyI5DT.js";import{B as S}from"./Box-D-8UTyy0.js";import{L as v,a as ft}from"./List-Dju0JQym.js";import{g as O,a as K,s as R,u as z,c as h,b as G,e as bt,j as vt,k as ht,d as N}from"./TransitionGroupContext-DL2JJipS.js";import{i as q}from"./resolveComponentProps-BZDD0Qh9.js";import{B as It}from"./ButtonBase-0A2tDIOC.js";import"./Paper-Cu02VlDT.js";function yt(t){return K("MuiListItem",t)}const g=O("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),Ct=O("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function jt(t){return K("MuiListItemSecondaryAction",t)}O("MuiListItemSecondaryAction",["root","disableGutters"]);const Lt=["className"],St=t=>{const{disableGutters:e,classes:o}=t;return G({root:["root",e&&"disableGutters"]},jt,o)},At=R("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.disableGutters&&e.disableGutters]}})(({ownerState:t})=>a({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})),Q=r.forwardRef(function(e,o){const n=z({props:e,name:"MuiListItemSecondaryAction"}),{className:i}=n,c=A(n,Lt),d=r.useContext(v),l=a({},n,{disableGutters:d.disableGutters}),u=St(l);return s.jsx(At,a({className:h(u.root,i),ownerState:l,ref:o},c))});Q.muiName="ListItemSecondaryAction";const Rt=["className"],Nt=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Mt=(t,e)=>{const{ownerState:o}=t;return[e.root,o.dense&&e.dense,o.alignItems==="flex-start"&&e.alignItemsFlexStart,o.divider&&e.divider,!o.disableGutters&&e.gutters,!o.disablePadding&&e.padding,o.button&&e.button,o.hasSecondaryAction&&e.secondaryAction]},Pt=t=>{const{alignItems:e,button:o,classes:n,dense:i,disabled:c,disableGutters:d,disablePadding:l,divider:u,hasSecondaryAction:f,selected:M}=t;return G({root:["root",i&&"dense",!d&&"gutters",!l&&"padding",u&&"divider",c&&"disabled",o&&"button",e==="flex-start"&&"alignItemsFlexStart",f&&"secondaryAction",M&&"selected"],container:["container"]},yt,n)},$t=R("div",{name:"MuiListItem",slot:"Root",overridesResolver:Mt})(({theme:t,ownerState:e})=>a({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!e.disablePadding&&a({paddingTop:8,paddingBottom:8},e.dense&&{paddingTop:4,paddingBottom:4},!e.disableGutters&&{paddingLeft:16,paddingRight:16},!!e.secondaryAction&&{paddingRight:48}),!!e.secondaryAction&&{[`& > .${Ct.root}`]:{paddingRight:48}},{[`&.${g.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${g.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:C(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${g.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:C(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${g.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.alignItems==="flex-start"&&{alignItems:"flex-start"},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${g.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:C(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:C(t.palette.primary.main,t.palette.action.selectedOpacity)}}},e.hasSecondaryAction&&{paddingRight:48})),kt=R("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),j=r.forwardRef(function(e,o){const n=z({props:e,name:"MuiListItem"}),{alignItems:i="center",autoFocus:c=!1,button:d=!1,children:l,className:u,component:f,components:M={},componentsProps:V={},ContainerComponent:B="li",ContainerProps:{className:X}={},dense:U=!1,disabled:F=!1,disableGutters:P=!1,disablePadding:Z=!1,divider:tt=!1,focusVisibleClassName:et,secondaryAction:H,selected:st=!1,slotProps:ot={},slots:nt={}}=n,at=A(n.ContainerProps,Rt),it=A(n,Nt),D=r.useContext(v),$=r.useMemo(()=>({dense:U||D.dense||!1,alignItems:i,disableGutters:P}),[i,D.dense,U,P]),k=r.useRef(null);bt(()=>{c&&k.current&&k.current.focus()},[c]);const x=r.Children.toArray(l),_=x.length&&vt(x[x.length-1],["ListItemSecondaryAction"]),I=a({},n,{alignItems:i,autoFocus:c,button:d,dense:$.dense,disabled:F,disableGutters:P,disablePadding:Z,divider:tt,hasSecondaryAction:_,selected:st}),E=Pt(I),T=ht(k,o),y=nt.root||M.Root||$t,b=ot.root||V.root||{},p=a({className:h(E.root,b.className,u),disabled:F},it);let m=f||"li";return d&&(p.component=f||"div",p.focusVisibleClassName=h(g.focusVisible,et),m=It),_?(m=!p.component&&!f?"div":m,B==="li"&&(m==="li"?m="div":p.component==="li"&&(p.component="div")),s.jsx(v.Provider,{value:$,children:s.jsxs(kt,a({as:B,className:h(E.container,X),ref:T,ownerState:I},at,{children:[s.jsx(y,a({},b,!q(y)&&{as:m,ownerState:a({},I,b.ownerState)},p,{children:x})),x.pop()]}))})):s.jsx(v.Provider,{value:$,children:s.jsxs(y,a({},b,{as:m,ref:T},!q(y)&&{ownerState:a({},I,b.ownerState)},p,{children:[x,H&&s.jsx(Q,{children:H})]}))})}),wt=["className"],Ot=t=>{const{alignItems:e,classes:o}=t;return G({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},xt,o)},zt=R("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({theme:t,ownerState:e})=>a({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},e.alignItems==="flex-start"&&{marginTop:8})),L=r.forwardRef(function(e,o){const n=z({props:e,name:"MuiListItemIcon"}),{className:i}=n,c=A(n,wt),d=r.useContext(v),l=a({},n,{alignItems:d.alignItems}),u=Ot(l);return s.jsx(zt,a({className:h(u.root,i),ownerState:l,ref:o},c))}),Gt=N(s.jsx("path",{d:"M15 7.5V2H9v5.5l3 3zM7.5 9H2v6h5.5l3-3zM9 16.5V22h6v-5.5l-3-3zM16.5 9l-3 3 3 3H22V9z"}),"Gamepad"),Vt=N(s.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),Bt=N(s.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Mail"),Ut=N(s.jsx("path",{d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24m-6 0c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 7c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m6 5H3v-.99C3.2 16.29 6.3 15 9 15s5.8 1.29 6 2z"}),"PeopleAltOutlined");function Ft(){const t=rt(),e=async()=>{localStorage.removeItem("code"),await Y.get(`${J}/api/auth/logout`),t("/user")};return s.jsx(gt,{variant:"permanent",anchor:"left",open:!0,sx:{width:"fit-content","& .MuiDrawer-paper":{position:"fixed",backgroundColor:"transparent",width:"fit-content",height:"100vh",boxSizing:"border-box",zIndex:1e4,backdropFilter:"blur(10px)"}},children:s.jsx(S,{sx:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"center",flexWrap:"wrap",width:"100%",height:"100%"},children:s.jsxs(ft,{sx:{width:"100%"},children:[s.jsx(w,{style:{all:"unset"},to:"/admin",children:s.jsx(j,{className:"list-item",button:!0,children:s.jsx(L,{children:s.jsx(Ut,{sx:{fontSize:"2rem",marginInline:"auto"}})})})}),s.jsx(w,{style:{all:"unset"},to:"/admin/game",children:s.jsx(j,{className:"list-item",button:!0,children:s.jsx(L,{children:s.jsx(Gt,{sx:{fontSize:"2rem",marginInline:"auto"}})})})}),s.jsx(w,{style:{all:"unset"},to:"/admin/inbox",children:s.jsx(j,{className:"list-item",button:!0,children:s.jsx(L,{children:s.jsx(Bt,{sx:{fontSize:"2rem",marginInline:"auto"}})})})}),s.jsx("button",{className:"btn btn-list",onClick:e,children:s.jsx(j,{className:"list-item",button:!0,children:s.jsx(L,{children:s.jsx(Vt,{sx:{fontSize:"2rem",marginInline:"auto"}})})})})]})})})}function Qt(){const t=ut(),{user:e,loading:o}=ct(n=>n.auth);return t(pt),r.useEffect(()=>{(async()=>{const i=await Y.get(`${J}/api/auth/check`);t(mt(i.data.currentUser))})()},[t]),o===!0||o===null?s.jsx(lt,{}):e?e.isAdmin?s.jsxs(S,{sx:{display:"flex",width:"100vw",height:"100vh"},children:[s.jsx(S,{sx:{width:"fit-content"},children:s.jsx(Ft,{})}),s.jsx(S,{sx:{width:"calc(100% - 88px)",marginLeft:"88px"},children:s.jsx(dt,{})})]}):s.jsx(W,{to:"/user",replace:!0}):s.jsx(W,{to:"/login",replace:!0})}export{Qt as default};
