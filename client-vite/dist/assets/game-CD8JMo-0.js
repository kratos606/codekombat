import{h as Is,_ as Fi,k as ba,r as ar,f as bf,j as ze,R as vn,o as Cf,q as Sf,i as ka}from"./index-Cr8A9Rf2.js";import{g as Eo,a as kf,s as wf,r as Lf,u as Tf,e as Mf,k as Af,c as gs,b as Of,_ as Lo}from"./TransitionGroupContext-DL2JJipS.js";import{r as wa}from"./createSvgIcon-CxEhepF-.js";import{B as Hi}from"./Box-D-8UTyy0.js";import{B as To}from"./Button-BFet-ylQ.js";import{S as Io}from"./TextField-Dk-jm_kD.js";import{L as ys}from"./List-Dju0JQym.js";import{B as Rf}from"./ButtonBase-0A2tDIOC.js";import{l as ms}from"./listItemIconClasses-DEEyI5DT.js";var Ps={exports:{}},Ef="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",If=Ef,Pf=If;function Ds(){}function Ns(){}Ns.resetWarningCache=Ds;var Df=function(){function G(A,z,P,O,D,I){if(I!==Pf){var X=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw X.name="Invariant Violation",X}}G.isRequired=G;function ue(){return G}var C={array:G,bigint:G,bool:G,func:G,number:G,object:G,string:G,symbol:G,any:G,arrayOf:ue,element:G,elementType:G,instanceOf:ue,node:G,objectOf:ue,oneOf:ue,oneOfType:ue,shape:ue,exact:ue,checkPropTypes:Ns,resetWarningCache:Ds};return C.PropTypes=C,C};Ps.exports=Df();var Nf=Ps.exports;const nt=Is(Nf),xs=Eo("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),bs=Eo("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function Bf(G){return kf("MuiMenuItem",G)}const Ni=Eo("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Ff=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],Hf=(G,ue)=>{const{ownerState:C}=G;return[ue.root,C.dense&&ue.dense,C.divider&&ue.divider,!C.disableGutters&&ue.gutters]},Wf=G=>{const{disabled:ue,dense:C,divider:A,disableGutters:z,selected:P,classes:O}=G,I=Of({root:["root",C&&"dense",ue&&"disabled",!z&&"gutters",A&&"divider",P&&"selected"]},Bf,O);return Fi({},O,I)},zf=wf(Rf,{shouldForwardProp:G=>Lf(G)||G==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Hf})(({theme:G,ownerState:ue})=>Fi({},G.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!ue.disableGutters&&{paddingLeft:16,paddingRight:16},ue.divider&&{borderBottom:`1px solid ${(G.vars||G).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(G.vars||G).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ni.selected}`]:{backgroundColor:G.vars?`rgba(${G.vars.palette.primary.mainChannel} / ${G.vars.palette.action.selectedOpacity})`:ba(G.palette.primary.main,G.palette.action.selectedOpacity),[`&.${Ni.focusVisible}`]:{backgroundColor:G.vars?`rgba(${G.vars.palette.primary.mainChannel} / calc(${G.vars.palette.action.selectedOpacity} + ${G.vars.palette.action.focusOpacity}))`:ba(G.palette.primary.main,G.palette.action.selectedOpacity+G.palette.action.focusOpacity)}},[`&.${Ni.selected}:hover`]:{backgroundColor:G.vars?`rgba(${G.vars.palette.primary.mainChannel} / calc(${G.vars.palette.action.selectedOpacity} + ${G.vars.palette.action.hoverOpacity}))`:ba(G.palette.primary.main,G.palette.action.selectedOpacity+G.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:G.vars?`rgba(${G.vars.palette.primary.mainChannel} / ${G.vars.palette.action.selectedOpacity})`:ba(G.palette.primary.main,G.palette.action.selectedOpacity)}},[`&.${Ni.focusVisible}`]:{backgroundColor:(G.vars||G).palette.action.focus},[`&.${Ni.disabled}`]:{opacity:(G.vars||G).palette.action.disabledOpacity},[`& + .${xs.root}`]:{marginTop:G.spacing(1),marginBottom:G.spacing(1)},[`& + .${xs.inset}`]:{marginLeft:52},[`& .${bs.root}`]:{marginTop:0,marginBottom:0},[`& .${bs.inset}`]:{paddingLeft:36},[`& .${ms.root}`]:{minWidth:36}},!ue.dense&&{[G.breakpoints.up("sm")]:{minHeight:"auto"}},ue.dense&&Fi({minHeight:32,paddingTop:4,paddingBottom:4},G.typography.body2,{[`& .${ms.root} svg`]:{fontSize:"1.25rem"}}))),zt=ar.forwardRef(function(ue,C){const A=Tf({props:ue,name:"MuiMenuItem"}),{autoFocus:z=!1,component:P="li",dense:O=!1,divider:D=!1,disableGutters:I=!1,focusVisibleClassName:X,role:_="menuitem",tabIndex:re,className:H}=A,q=bf(A,Ff),j=ar.useContext(ys),ae=ar.useMemo(()=>({dense:O||j.dense||!1,disableGutters:I}),[j.dense,O,I]),W=ar.useRef(null);Mf(()=>{z&&W.current&&W.current.focus()},[z]);const J=Fi({},A,{dense:ae.dense,divider:D,disableGutters:I}),S=Wf(A),T=Af(W,C);let v;return A.disabled||(v=re!==void 0?re:-1),ze.jsx(ys.Provider,{value:ae,children:ze.jsx(zf,Fi({ref:T,role:_,tabIndex:v,component:P,focusVisibleClassName:gs(S.focusVisible,X),className:gs(S.root,H)},q,{ownerState:J,classes:S}))})});function bc(G){return ze.jsxs("div",{className:"tooltip",children:[ze.jsx("span",{className:"tooltiptext",style:G.style,children:G.title}),G.children]})}var ir=typeof window<"u"?window:null,Po=ir===null,Wi=Po?void 0:ir.document,hr="addEventListener",dr="removeEventListener",Mo="getBoundingClientRect",Bi="_a",pr="_b",Or="_c",Ca="horizontal",vr=function(){return!1},Kf=Po?"calc":["","-webkit-","-moz-","-o-"].filter(function(G){var ue=Wi.createElement("div");return ue.style.cssText="width:"+G+"calc(9px)",!!ue.style.length}).shift()+"calc",Bs=function(G){return typeof G=="string"||G instanceof String},Cs=function(G){if(Bs(G)){var ue=Wi.querySelector(G);if(!ue)throw new Error("Selector "+G+" did not match a DOM element");return ue}return G},Wt=function(G,ue,C){var A=G[ue];return A!==void 0?A:C},Sa=function(G,ue,C,A){if(ue){if(A==="end")return 0;if(A==="center")return G/2}else if(C){if(A==="start")return 0;if(A==="center")return G/2}return G},_f=function(G,ue){var C=Wi.createElement("div");return C.className="gutter gutter-"+ue,C},Uf=function(G,ue,C){var A={};return Bs(ue)?A[G]=ue:A[G]=Kf+"("+ue+"% - "+C+"px)",A},jf=function(G,ue){var C;return C={},C[G]=ue+"px",C},Ss=function(G,ue){if(ue===void 0&&(ue={}),Po)return{};var C=G,A,z,P,O,D,I;Array.from&&(C=Array.from(C));var X=Cs(C[0]),_=X.parentNode,re=getComputedStyle?getComputedStyle(_):null,H=re?re.flexDirection:null,q=Wt(ue,"sizes")||C.map(function(){return 100/C.length}),j=Wt(ue,"minSize",100),ae=Array.isArray(j)?j:C.map(function(){return j}),W=Wt(ue,"maxSize",1/0),J=Array.isArray(W)?W:C.map(function(){return W}),S=Wt(ue,"expandToMin",!1),T=Wt(ue,"gutterSize",10),v=Wt(ue,"gutterAlign","center"),y=Wt(ue,"snapOffset",30),k=Array.isArray(y)?y:C.map(function(){return y}),M=Wt(ue,"dragInterval",1),B=Wt(ue,"direction",Ca),Q=Wt(ue,"cursor",B===Ca?"col-resize":"row-resize"),ce=Wt(ue,"gutter",_f),le=Wt(ue,"elementStyle",Uf),xe=Wt(ue,"gutterStyle",jf);B===Ca?(A="width",z="clientX",P="left",O="right",D="clientWidth"):B==="vertical"&&(A="height",z="clientY",P="top",O="bottom",D="clientHeight");function we(Z,Y,U,me){var Xe=le(A,Y,U,me);Object.keys(Xe).forEach(function(Ge){Z.style[Ge]=Xe[Ge]})}function Ae(Z,Y,U){var me=xe(A,Y,U);Object.keys(me).forEach(function(Xe){Z.style[Xe]=me[Xe]})}function fe(){return I.map(function(Z){return Z.size})}function se(Z){return"touches"in Z?Z.touches[0][z]:Z[z]}function de(Z){var Y=I[this.a],U=I[this.b],me=Y.size+U.size;Y.size=Z/this.size*me,U.size=me-Z/this.size*me,we(Y.element,Y.size,this[pr],Y.i),we(U.element,U.size,this[Or],U.i)}function Me(Z){var Y,U=I[this.a],me=I[this.b];this.dragging&&(Y=se(Z)-this.start+(this[pr]-this.dragOffset),M>1&&(Y=Math.round(Y/M)*M),Y<=U.minSize+U.snapOffset+this[pr]?Y=U.minSize+this[pr]:Y>=this.size-(me.minSize+me.snapOffset+this[Or])&&(Y=this.size-(me.minSize+this[Or])),Y>=U.maxSize-U.snapOffset+this[pr]?Y=U.maxSize+this[pr]:Y<=this.size-(me.maxSize-me.snapOffset+this[Or])&&(Y=this.size-(me.maxSize+this[Or])),de.call(this,Y),Wt(ue,"onDrag",vr)(fe()))}function ye(){var Z=I[this.a].element,Y=I[this.b].element,U=Z[Mo](),me=Y[Mo]();this.size=U[A]+me[A]+this[pr]+this[Or],this.start=U[P],this.end=U[O]}function De(Z){if(!getComputedStyle)return null;var Y=getComputedStyle(Z);if(!Y)return null;var U=Z[D];return U===0?null:(B===Ca?U-=parseFloat(Y.paddingLeft)+parseFloat(Y.paddingRight):U-=parseFloat(Y.paddingTop)+parseFloat(Y.paddingBottom),U)}function He(Z){var Y=De(_);if(Y===null||ae.reduce(function(Ge,rt){return Ge+rt},0)>Y)return Z;var U=0,me=[],Xe=Z.map(function(Ge,rt){var it=Y*Ge/100,dt=Sa(T,rt===0,rt===Z.length-1,v),gr=ae[rt]+dt;return it<gr?(U+=gr-it,me.push(0),gr):(me.push(it-gr),it)});return U===0?Z:Xe.map(function(Ge,rt){var it=Ge;if(U>0&&me[rt]-U>0){var dt=Math.min(U,me[rt]-U);U-=dt,it=Ge-dt}return it/Y*100})}function Re(){var Z=this,Y=I[Z.a].element,U=I[Z.b].element;Z.dragging&&Wt(ue,"onDragEnd",vr)(fe()),Z.dragging=!1,ir[dr]("mouseup",Z.stop),ir[dr]("touchend",Z.stop),ir[dr]("touchcancel",Z.stop),ir[dr]("mousemove",Z.move),ir[dr]("touchmove",Z.move),Z.stop=null,Z.move=null,Y[dr]("selectstart",vr),Y[dr]("dragstart",vr),U[dr]("selectstart",vr),U[dr]("dragstart",vr),Y.style.userSelect="",Y.style.webkitUserSelect="",Y.style.MozUserSelect="",Y.style.pointerEvents="",U.style.userSelect="",U.style.webkitUserSelect="",U.style.MozUserSelect="",U.style.pointerEvents="",Z.gutter.style.cursor="",Z.parent.style.cursor="",Wi.body.style.cursor=""}function Ue(Z){if(!("button"in Z&&Z.button!==0)){var Y=this,U=I[Y.a].element,me=I[Y.b].element;Y.dragging||Wt(ue,"onDragStart",vr)(fe()),Z.preventDefault(),Y.dragging=!0,Y.move=Me.bind(Y),Y.stop=Re.bind(Y),ir[hr]("mouseup",Y.stop),ir[hr]("touchend",Y.stop),ir[hr]("touchcancel",Y.stop),ir[hr]("mousemove",Y.move),ir[hr]("touchmove",Y.move),U[hr]("selectstart",vr),U[hr]("dragstart",vr),me[hr]("selectstart",vr),me[hr]("dragstart",vr),U.style.userSelect="none",U.style.webkitUserSelect="none",U.style.MozUserSelect="none",U.style.pointerEvents="none",me.style.userSelect="none",me.style.webkitUserSelect="none",me.style.MozUserSelect="none",me.style.pointerEvents="none",Y.gutter.style.cursor=Q,Y.parent.style.cursor=Q,Wi.body.style.cursor=Q,ye.call(Y),Y.dragOffset=se(Z)-Y.end}}q=He(q);var qe=[];I=C.map(function(Z,Y){var U={element:Cs(Z),size:q[Y],minSize:ae[Y],maxSize:J[Y],snapOffset:k[Y],i:Y},me;if(Y>0&&(me={a:Y-1,b:Y,dragging:!1,direction:B,parent:_},me[pr]=Sa(T,Y-1===0,!1,v),me[Or]=Sa(T,!1,Y===C.length-1,v),H==="row-reverse"||H==="column-reverse")){var Xe=me.a;me.a=me.b,me.b=Xe}if(Y>0){var Ge=ce(Y,B,U.element);Ae(Ge,T,Y),me[Bi]=Ue.bind(me),Ge[hr]("mousedown",me[Bi]),Ge[hr]("touchstart",me[Bi]),_.insertBefore(Ge,U.element),me.gutter=Ge}return we(U.element,U.size,Sa(T,Y===0,Y===C.length-1,v),Y),Y>0&&qe.push(me),U});function R(Z){var Y=Z.i===qe.length,U=Y?qe[Z.i-1]:qe[Z.i];ye.call(U);var me=Y?U.size-Z.minSize-U[Or]:Z.minSize+U[pr];de.call(U,me)}I.forEach(function(Z){var Y=Z.element[Mo]()[A];Y<Z.minSize&&(S?R(Z):Z.minSize=Y)});function ie(Z){var Y=He(Z);Y.forEach(function(U,me){if(me>0){var Xe=qe[me-1],Ge=I[Xe.a],rt=I[Xe.b];Ge.size=Y[me-1],rt.size=U,we(Ge.element,Ge.size,Xe[pr],Ge.i),we(rt.element,rt.size,Xe[Or],rt.i)}})}function pe(Z,Y){qe.forEach(function(U){if(Y!==!0?U.parent.removeChild(U.gutter):(U.gutter[dr]("mousedown",U[Bi]),U.gutter[dr]("touchstart",U[Bi])),Z!==!0){var me=le(A,U.a.size,U[pr]);Object.keys(me).forEach(function(Xe){I[U.a].element.style[Xe]="",I[U.b].element.style[Xe]=""})}})}return{setSizes:ie,getSizes:fe,collapse:function(Y){R(I[Y])},destroy:pe,parent:_,pairs:qe}};function Ao(G,ue){var C={};for(var A in G)Object.prototype.hasOwnProperty.call(G,A)&&ue.indexOf(A)===-1&&(C[A]=G[A]);return C}var Fs=function(G){function ue(){G.apply(this,arguments)}return G&&(ue.__proto__=G),ue.prototype=Object.create(G&&G.prototype),ue.prototype.constructor=ue,ue.prototype.componentDidMount=function(){var A=this.props;A.children;var z=A.gutter,P=Ao(A,["children","gutter"]),O=P;O.gutter=function(D,I){var X;return z?X=z(D,I):(X=document.createElement("div"),X.className="gutter gutter-"+I),X.__isSplitGutter=!0,X},this.split=Ss(this.parent.children,O)},ue.prototype.componentDidUpdate=function(A){var z=this,P=this.props;P.children;var O=P.minSize,D=P.sizes,I=P.collapsed,X=Ao(P,["children","minSize","sizes","collapsed"]),_=X,re=A.minSize,H=A.sizes,q=A.collapsed,j=["maxSize","expandToMin","gutterSize","gutterAlign","snapOffset","dragInterval","direction","cursor"],ae=j.map(function(S){return z.props[S]!==A[S]}).reduce(function(S,T){return S||T},!1);if(Array.isArray(O)&&Array.isArray(re)){var W=!1;O.forEach(function(S,T){W=W||S!==re[T]}),ae=ae||W}else Array.isArray(O)||Array.isArray(re)?ae=!0:ae=ae||O!==re;if(ae)_.minSize=O,_.sizes=D||this.split.getSizes(),this.split.destroy(!0,!0),_.gutter=function(S,T,v){return v.previousSibling},this.split=Ss(Array.from(this.parent.children).filter(function(S){return!S.__isSplitGutter}),_);else if(D){var J=!1;D.forEach(function(S,T){J=J||S!==H[T]}),J&&this.split.setSizes(this.props.sizes)}Number.isInteger(I)&&(I!==q||ae)&&this.split.collapse(I)},ue.prototype.componentWillUnmount=function(){this.split.destroy(),delete this.split},ue.prototype.render=function(){var A=this,z=this.props;z.sizes,z.minSize,z.maxSize,z.expandToMin,z.gutterSize,z.gutterAlign,z.snapOffset,z.dragInterval,z.direction,z.cursor,z.gutter,z.elementStyle,z.gutterStyle,z.onDrag,z.onDragStart,z.onDragEnd,z.collapsed;var P=z.children,O=Ao(z,["sizes","minSize","maxSize","expandToMin","gutterSize","gutterAlign","snapOffset","dragInterval","direction","cursor","gutter","elementStyle","gutterStyle","onDrag","onDragStart","onDragEnd","collapsed","children"]),D=O;return vn.createElement("div",Object.assign({},{ref:function(I){A.parent=I}},D),P)},ue}(vn.Component);Fs.propTypes={sizes:nt.arrayOf(nt.number),minSize:nt.oneOfType([nt.number,nt.arrayOf(nt.number)]),maxSize:nt.oneOfType([nt.number,nt.arrayOf(nt.number)]),expandToMin:nt.bool,gutterSize:nt.number,gutterAlign:nt.string,snapOffset:nt.oneOfType([nt.number,nt.arrayOf(nt.number)]),dragInterval:nt.number,direction:nt.string,cursor:nt.string,gutter:nt.func,elementStyle:nt.func,gutterStyle:nt.func,onDrag:nt.func,onDragStart:nt.func,onDragEnd:nt.func,collapsed:nt.number,children:nt.arrayOf(nt.element)};Fs.defaultProps={sizes:void 0,minSize:void 0,maxSize:void 0,expandToMin:void 0,gutterSize:void 0,gutterAlign:void 0,snapOffset:void 0,dragInterval:void 0,direction:void 0,cursor:void 0,gutter:void 0,elementStyle:void 0,gutterStyle:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0,collapsed:void 0,children:void 0};function ks(G,ue,C,A,z,P,O){try{var D=G[P](O),I=D.value}catch(X){return void C(X)}D.done?ue(I):Promise.resolve(I).then(A,z)}function Gf(G){return function(){var ue=this,C=arguments;return new Promise(function(A,z){var P=G.apply(ue,C);function O(I){ks(P,A,z,O,D,"next",I)}function D(I){ks(P,A,z,O,D,"throw",I)}O(void 0)})}}var Oo={exports:{}},ws;function Rt(){return ws||(ws=1,function(G,ue){(function(C,A){G.exports=A()})(Cf,function(){var C=navigator.userAgent,A=navigator.platform,z=/gecko\/\d/i.test(C),P=/MSIE \d/.test(C),O=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(C),D=/Edge\/(\d+)/.exec(C),I=P||O||D,X=I&&(P?document.documentMode||6:+(D||O)[1]),_=!D&&/WebKit\//.test(C),re=_&&/Qt\/\d+\.\d+/.test(C),H=!D&&/Chrome\/(\d+)/.exec(C),q=H&&+H[1],j=/Opera\//.test(C),ae=/Apple Computer/.test(navigator.vendor),W=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(C),J=/PhantomJS/.test(C),S=ae&&(/Mobile\/\w+/.test(C)||navigator.maxTouchPoints>2),T=/Android/.test(C),v=S||T||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(C),y=S||/Mac/.test(A),k=/\bCrOS\b/.test(C),M=/win/i.test(A),B=j&&C.match(/Version\/(\d*\.\d*)/);B&&(B=Number(B[1])),B&&B>=15&&(j=!1,_=!0);var Q=y&&(re||j&&(B==null||B<12.11)),ce=z||I&&X>=9;function le(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var xe=function(e,t){var n=e.className,r=le(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function we(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Ae(e,t){return we(e).appendChild(t)}function fe(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),typeof t=="string")i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function se(e,t,n,r){var i=fe(e,t,n,r);return i.setAttribute("role","presentation"),i}var de;document.createRange?de=function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:de=function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};function Me(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function ye(e){var t=e.ownerDocument||e,n;try{n=e.activeElement}catch{n=t.body||null}for(;n&&n.shadowRoot&&n.shadowRoot.activeElement;)n=n.shadowRoot.activeElement;return n}function De(e,t){var n=e.className;le(t).test(n)||(e.className+=(n?" ":"")+t)}function He(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!le(n[r]).test(t)&&(t+=" "+n[r]);return t}var Re=function(e){e.select()};S?Re=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:I&&(Re=function(e){try{e.select()}catch{}});function Ue(e){return e.display.wrapper.ownerDocument}function qe(e){return R(e.display.wrapper)}function R(e){return e.getRootNode?e.getRootNode():e.ownerDocument}function ie(e){return Ue(e).defaultView}function pe(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Z(e,t,n){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(n!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function Y(e,t,n,r,i){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var o=r||0,u=i||0;;){var c=e.indexOf("	",o);if(c<0||c>=t)return u+(t-o);u+=c-o,u+=n-u%n,o=c+1}}var U=function(){this.id=null,this.f=null,this.time=0,this.handler=pe(this.onTimeout,this)};U.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},U.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};function me(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}var Xe=50,Ge={toString:function(){return"CodeMirror.Pass"}},rt={scroll:!1},it={origin:"*mouse"},dt={origin:"+move"};function gr(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("	",r);o==-1&&(o=e.length);var u=o-r;if(o==e.length||i+u>=t)return r+Math.min(u,t-i);if(i+=o-r,i+=n-i%n,r=o+1,i>=t)return r}}var qr=[""];function Xr(e){for(;qr.length<=e;)qr.push(_e(qr)+" ");return qr[e]}function _e(e){return e[e.length-1]}function Yt(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function La(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}function Zn(){}function Vn(e,t){var n;return Object.create?n=Object.create(e):(Zn.prototype=e,n=new Zn),t&&Z(t,n),n}var Ta=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Rr(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Ta.test(e))}function gn(e,t){return t?t.source.indexOf("\\w")>-1&&Rr(e)?!0:t.test(e):Rr(e)}function Dt(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var yn=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function pt(e){return e.charCodeAt(0)>=768&&yn.test(e)}function zi(e,t,n){for(;(n<0?t>0:t<e.length)&&pt(e.charAt(t));)t+=n;return t}function Yr(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}function Ma(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var u=e[o];(u.from<n&&u.to>t||t==n&&u.to==t)&&(r(Math.max(u.from,t),Math.min(u.to,n),u.level==1?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}var Er=null;function $e(e,t,n){var r;Er=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&n=="before"?r=i:Er=i),o.from==t&&(o.from!=o.to&&n!="before"?r=i:Er=i)}return r??Er}var Jt=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(g){return g<=247?e.charAt(g):1424<=g&&g<=1524?"R":1536<=g&&g<=1785?t.charAt(g-1536):1774<=g&&g<=2220?"r":8192<=g&&g<=8203?"w":g==8204?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,o=/[LRr]/,u=/[Lb1n]/,c=/[1n]/;function d(g,b,L){this.level=g,this.from=b,this.to=L}return function(g,b){var L=b=="ltr"?"L":"R";if(g.length==0||b=="ltr"&&!r.test(g))return!1;for(var K=g.length,F=[],ee=0;ee<K;++ee)F.push(n(g.charCodeAt(ee)));for(var oe=0,ve=L;oe<K;++oe){var Ce=F[oe];Ce=="m"?F[oe]=ve:ve=Ce}for(var ke=0,Se=L;ke<K;++ke){var Te=F[ke];Te=="1"&&Se=="r"?F[ke]="n":o.test(Te)&&(Se=Te,Te=="r"&&(F[ke]="R"))}for(var Pe=1,Ie=F[0];Pe<K-1;++Pe){var Ke=F[Pe];Ke=="+"&&Ie=="1"&&F[Pe+1]=="1"?F[Pe]="1":Ke==","&&Ie==F[Pe+1]&&(Ie=="1"||Ie=="n")&&(F[Pe]=Ie),Ie=Ke}for(var at=0;at<K;++at){var Mt=F[at];if(Mt==",")F[at]="N";else if(Mt=="%"){var ut=void 0;for(ut=at+1;ut<K&&F[ut]=="%";++ut);for(var Vt=at&&F[at-1]=="!"||ut<K&&F[ut]=="1"?"1":"N",Gt=at;Gt<ut;++Gt)F[Gt]=Vt;at=ut-1}}for(var mt=0,qt=L;mt<K;++mt){var Ot=F[mt];qt=="L"&&Ot=="1"?F[mt]="L":o.test(Ot)&&(qt=Ot)}for(var St=0;St<K;++St)if(i.test(F[St])){var xt=void 0;for(xt=St+1;xt<K&&i.test(F[xt]);++xt);for(var ct=(St?F[St-1]:L)=="L",Xt=(xt<K?F[xt]:L)=="L",Jn=ct==Xt?ct?"L":"R":L,Gr=St;Gr<xt;++Gr)F[Gr]=Jn;St=xt-1}for(var Pt=[],br,At=0;At<K;)if(u.test(F[At])){var ko=At;for(++At;At<K&&u.test(F[At]);++At);Pt.push(new d(0,ko,At))}else{var Ar=At,dn=Pt.length,pn=b=="rtl"?1:0;for(++At;At<K&&F[At]!="L";++At);for(var Ht=Ar;Ht<At;)if(c.test(F[Ht])){Ar<Ht&&(Pt.splice(dn,0,new d(1,Ar,Ht)),dn+=pn);var Qn=Ht;for(++Ht;Ht<At&&c.test(F[Ht]);++Ht);Pt.splice(dn,0,new d(2,Qn,Ht)),dn+=pn,Ar=Ht}else++Ht;Ar<At&&Pt.splice(dn,0,new d(1,Ar,At))}return b=="ltr"&&(Pt[0].level==1&&(br=g.match(/^\s+/))&&(Pt[0].from=br[0].length,Pt.unshift(new d(0,0,br[0].length))),_e(Pt).level==1&&(br=g.match(/\s+$/))&&(_e(Pt).to-=br[0].length,Pt.push(new d(0,K-br[0].length,K)))),b=="rtl"?Pt.reverse():Pt}}();function Qe(e,t){var n=e.order;return n==null&&(n=e.order=Jt(e.text,t)),n}var Kt=[],Ee=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Kt).concat(n)}};function mn(e,t){return e._handlers&&e._handlers[t]||Kt}function Je(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=me(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function ot(e,t){var n=mn(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function vt(e,t,n){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ot(e,n||t.type,e,t),xn(t)||t.codemirrorIgnore}function Ki(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)me(n,t[r])==-1&&n.push(t[r])}function _t(e,t){return mn(e,t).length>0}function Cr(e){e.prototype.on=function(t,n){Ee(this,t,n)},e.prototype.off=function(t,n){Je(this,t,n)}}function Et(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function _i(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function xn(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function Jr(e){Et(e),_i(e)}function yr(e){return e.target||e.srcElement}function bn(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),y&&e.ctrlKey&&t==1&&(t=3),t}var Aa=function(){if(I&&X<9)return!1;var e=fe("div");return"draggable"in e||"dragDrop"in e}(),Qt;function Oa(e){if(Qt==null){var t=fe("span","​");Ae(e,fe("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(Qt=t.offsetWidth<=1&&t.offsetHeight>2&&!(I&&X<8))}var n=Qt?fe("span","​"):fe("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}var $n;function tr(e){if($n!=null)return $n;var t=Ae(e,document.createTextNode("AخA")),n=de(t,0,1).getBoundingClientRect(),r=de(t,1,2).getBoundingClientRect();return we(e),!n||n.left==n.right?!1:$n=r.right-n.right<3}var Ir=`

b`.split(/\n/).length!=3?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf(`
`,t);i==-1&&(i=e.length);var o=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),u=o.indexOf("\r");u!=-1?(n.push(o.slice(0,u)),t+=u+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ra=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},Ui=function(){var e=fe("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),Cn=null;function Ea(e){if(Cn!=null)return Cn;var t=Ae(e,fe("span","x")),n=t.getBoundingClientRect(),r=de(t,0,1).getBoundingClientRect();return Cn=Math.abs(n.left-r.left)>1}var Sn={},Pr={};function Ia(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Sn[e]=t}function Pa(e,t){Pr[e]=t}function Qr(e){if(typeof e=="string"&&Pr.hasOwnProperty(e))e=Pr[e];else if(e&&typeof e.name=="string"&&Pr.hasOwnProperty(e.name)){var t=Pr[e.name];typeof t=="string"&&(t={name:t}),e=Vn(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Qr("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Qr("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function Zr(e,t){t=Qr(t);var n=Sn[t.name];if(!n)return Zr(e,"text/plain");var r=n(e,t);if(Dr.hasOwnProperty(t.name)){var i=Dr[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var u in t.modeProps)r[u]=t.modeProps[u];return r}var Dr={};function or(e,t){var n=Dr.hasOwnProperty(e)?Dr[e]:Dr[e]={};Z(t,n)}function Sr(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function kn(e,t){for(var n;e.innerMode&&(n=e.innerMode(t),!(!n||n.mode==e));)t=n.state,e=n.mode;return n||{mode:e,state:t}}function ei(e,t,n){return e.startState?e.startState(t,n):!0}var ft=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};ft.prototype.eol=function(){return this.pos>=this.string.length},ft.prototype.sol=function(){return this.pos==this.lineStart},ft.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ft.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ft.prototype.eat=function(e){var t=this.string.charAt(this.pos),n;if(typeof e=="string"?n=t==e:n=t&&(e.test?e.test(t):e(t)),n)return++this.pos,t},ft.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},ft.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},ft.prototype.skipToEnd=function(){this.pos=this.string.length},ft.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},ft.prototype.backUp=function(e){this.pos-=e},ft.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Y(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Y(this.string,this.lineStart,this.tabSize):0)},ft.prototype.indentation=function(){return Y(this.string,null,this.tabSize)-(this.lineStart?Y(this.string,this.lineStart,this.tabSize):0)},ft.prototype.match=function(e,t,n){if(typeof e=="string"){var r=function(u){return n?u.toLowerCase():u},i=this.string.substr(this.pos,e.length);if(r(i)==r(e))return t!==!1&&(this.pos+=e.length),!0}else{var o=this.string.slice(this.pos).match(e);return o&&o.index>0?null:(o&&t!==!1&&(this.pos+=o[0].length),o)}},ft.prototype.current=function(){return this.string.slice(this.start,this.pos)},ft.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},ft.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},ft.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function Oe(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function kr(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(o){var u=o.text;i==n.line&&(u=u.slice(0,n.ch)),i==t.line&&(u=u.slice(t.ch)),r.push(u),++i}),r}function wn(e,t,n){var r=[];return e.iter(t,n,function(i){r.push(i.text)}),r}function gt(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Ze(e){if(e.parent==null)return null;for(var t=e.parent,n=me(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function wr(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var u=0;u<e.lines.length;++u){var c=e.lines[u],d=c.height;if(t<d)break;t-=d}return n+u}function Nr(e,t){return t>=e.first&&t<e.first+e.size}function Ln(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function he(e,t,n){if(n===void 0&&(n=null),!(this instanceof he))return new he(e,t,n);this.line=e,this.ch=t,this.sticky=n}function Be(e,t){return e.line-t.line||e.ch-t.ch}function ti(e,t){return e.sticky==t.sticky&&Be(e,t)==0}function Tn(e){return he(e.line,e.ch)}function Mn(e,t){return Be(e,t)<0?t:e}function An(e,t){return Be(e,t)<0?e:t}function lr(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Le(e,t){if(t.line<e.first)return he(e.first,0);var n=e.first+e.size-1;return t.line>n?he(n,Oe(e,n).text.length):Da(t,Oe(e,t.line).text.length)}function Da(e,t){var n=e.ch;return n==null||n>t?he(e.line,t):n<0?he(e.line,0):e}function Vr(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Le(e,t[r]);return n}var On=function(e,t){this.state=e,this.lookAhead=t},Nt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};Nt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Nt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Nt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Nt.fromSaved=function(e,t,n){return t instanceof On?new Nt(e,Sr(e.mode,t.state),n,t.lookAhead):new Nt(e,Sr(e.mode,t),n)},Nt.prototype.save=function(e){var t=e!==!1?Sr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new On(t,this.maxLookAhead):t};function ji(e,t,n,r){var i=[e.state.modeGen],o={};ni(e,t.text,e.doc.mode,n,function(g,b){return i.push(g,b)},o,r);for(var u=n.state,c=function(g){n.baseTokens=i;var b=e.state.overlays[g],L=1,K=0;n.state=!0,ni(e,t.text,b.mode,n,function(F,ee){for(var oe=L;K<F;){var ve=i[L];ve>F&&i.splice(L,1,F,i[L+1],ve),L+=2,K=Math.min(F,ve)}if(ee)if(b.opaque)i.splice(oe,L-oe,F,"overlay "+ee),L=oe+2;else for(;oe<L;oe+=2){var Ce=i[oe+1];i[oe+1]=(Ce?Ce+" ":"")+"overlay "+ee}},o),n.state=u,n.baseTokens=null,n.baseTokenPos=1},d=0;d<e.state.overlays.length;++d)c(d);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function $r(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Br(e,Ze(t)),i=t.text.length>e.options.maxHighlightLength&&Sr(e.doc.mode,r.state),o=ji(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Br(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Nt(r,!0,t);var o=Xi(e,t,n),u=o>r.first&&Oe(r,o-1).stateAfter,c=u?Nt.fromSaved(r,u,o):new Nt(r,ei(r.mode),o);return r.iter(o,t,function(d){Rn(e,d.text,c);var g=c.line;d.stateAfter=g==t-1||g%5==0||g>=i.viewFrom&&g<i.viewTo?c.save():null,c.nextLine()}),n&&(r.modeFrontier=c.line),c}function Rn(e,t,n,r){var i=e.doc.mode,o=new ft(t,e.options.tabSize,n);for(o.start=o.pos=r||0,t==""&&Gi(i,n.state);!o.eol();)en(i,o,n.state),o.start=o.pos}function Gi(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=kn(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function en(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=kn(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}var qi=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function En(e,t,n,r){var i=e.doc,o=i.mode,u;t=Le(i,t);var c=Oe(i,t.line),d=Br(e,t.line,n),g=new ft(c.text,e.options.tabSize,d),b;for(r&&(b=[]);(r||g.pos<t.ch)&&!g.eol();)g.start=g.pos,u=en(o,g,d.state),r&&b.push(new qi(g,u,Sr(i.mode,d.state)));return r?b:new qi(g,u,d.state)}function ri(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";t[r]==null?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function ni(e,t,n,r,i,o,u){var c=n.flattenSpans;c==null&&(c=e.options.flattenSpans);var d=0,g=null,b=new ft(t,e.options.tabSize,r),L,K=e.options.addModeClass&&[null];for(t==""&&ri(Gi(n,r.state),o);!b.eol();){if(b.pos>e.options.maxHighlightLength?(c=!1,u&&Rn(e,t,r,b.pos),b.pos=t.length,L=null):L=ri(en(n,b,r.state,K),o),K){var F=K[0].name;F&&(L="m-"+(L?F+" "+L:F))}if(!c||g!=L){for(;d<b.start;)d=Math.min(b.start,d+5e3),i(d,g);g=L}b.start=b.pos}for(;d<b.pos;){var ee=Math.min(b.pos,d+5e3);i(ee,g),d=ee}}function Xi(e,t,n){for(var r,i,o=e.doc,u=n?-1:t-(e.doc.mode.innerMode?1e3:100),c=t;c>u;--c){if(c<=o.first)return o.first;var d=Oe(o,c-1),g=d.stateAfter;if(g&&(!n||c+(g instanceof On?g.lookAhead:0)<=o.modeFrontier))return c;var b=Y(d.text,null,e.options.tabSize);(i==null||r>b)&&(i=c-1,r=b)}return i}function Yi(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=Oe(e,r).stateAfter;if(i&&(!(i instanceof On)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}var $t=!1,sr=!1;function tn(){$t=!0}function Ji(){sr=!0}function In(e,t,n){this.marker=e,this.from=t,this.to=n}function rn(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Na(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Ba(e,t,n){var r=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));r&&e.markedSpans&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}function Fa(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],u=o.marker,c=o.from==null||(u.inclusiveLeft?o.from<=t:o.from<t);if(c||o.from==t&&u.type=="bookmark"&&(!n||!o.marker.insertLeft)){var d=o.to==null||(u.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new In(u,o.from,d?null:o.to))}}return r}function Qi(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],u=o.marker,c=o.to==null||(u.inclusiveRight?o.to>=t:o.to>t);if(c||o.from==t&&u.type=="bookmark"&&(!n||o.marker.insertLeft)){var d=o.from==null||(u.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new In(u,d?null:o.from-t,o.to==null?null:o.to-t))}}return r}function Pn(e,t){if(t.full)return null;var n=Nr(e,t.from.line)&&Oe(e,t.from.line).markedSpans,r=Nr(e,t.to.line)&&Oe(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,u=Be(t.from,t.to)==0,c=Fa(n,i,u),d=Qi(r,o,u),g=t.text.length==1,b=_e(t.text).length+(g?i:0);if(c)for(var L=0;L<c.length;++L){var K=c[L];if(K.to==null){var F=rn(d,K.marker);F?g&&(K.to=F.to==null?null:F.to+b):K.to=i}}if(d)for(var ee=0;ee<d.length;++ee){var oe=d[ee];if(oe.to!=null&&(oe.to+=b),oe.from==null){var ve=rn(c,oe.marker);ve||(oe.from=b,g&&(c||(c=[])).push(oe))}else oe.from+=b,g&&(c||(c=[])).push(oe)}c&&(c=ii(c)),d&&d!=c&&(d=ii(d));var Ce=[c];if(!g){var ke=t.text.length-2,Se;if(ke>0&&c)for(var Te=0;Te<c.length;++Te)c[Te].to==null&&(Se||(Se=[])).push(new In(c[Te].marker,null,null));for(var Pe=0;Pe<ke;++Pe)Ce.push(Se);Ce.push(d)}return Ce}function ii(e){for(var t=0;t<e.length;++t){var n=e[t];n.from!=null&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function ai(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(F){if(F.markedSpans)for(var ee=0;ee<F.markedSpans.length;++ee){var oe=F.markedSpans[ee].marker;oe.readOnly&&(!r||me(r,oe)==-1)&&(r||(r=[])).push(oe)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var u=r[o],c=u.find(0),d=0;d<i.length;++d){var g=i[d];if(!(Be(g.to,c.from)<0||Be(g.from,c.to)>0)){var b=[d,1],L=Be(g.from,c.from),K=Be(g.to,c.to);(L<0||!u.inclusiveLeft&&!L)&&b.push({from:g.from,to:c.from}),(K>0||!u.inclusiveRight&&!K)&&b.push({from:c.to,to:g.to}),i.splice.apply(i,b),d+=b.length-3}}return i}function oi(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function li(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function nn(e){return e.inclusiveLeft?-1:0}function Fr(e){return e.inclusiveRight?1:0}function si(e,t){var n=e.lines.length-t.lines.length;if(n!=0)return n;var r=e.find(),i=t.find(),o=Be(r.from,i.from)||nn(e)-nn(t);if(o)return-o;var u=Be(r.to,i.to)||Fr(e)-Fr(t);return u||t.id-e.id}function a(e,t){var n=sr&&e.markedSpans,r;if(n)for(var i=void 0,o=0;o<n.length;++o)i=n[o],i.marker.collapsed&&(t?i.from:i.to)==null&&(!r||si(r,i.marker)<0)&&(r=i.marker);return r}function l(e){return a(e,!0)}function s(e){return a(e,!1)}function f(e,t){var n=sr&&e.markedSpans,r;if(n)for(var i=0;i<n.length;++i){var o=n[i];o.marker.collapsed&&(o.from==null||o.from<t)&&(o.to==null||o.to>t)&&(!r||si(r,o.marker)<0)&&(r=o.marker)}return r}function h(e,t,n,r,i){var o=Oe(e,t),u=sr&&o.markedSpans;if(u)for(var c=0;c<u.length;++c){var d=u[c];if(d.marker.collapsed){var g=d.marker.find(0),b=Be(g.from,n)||nn(d.marker)-nn(i),L=Be(g.to,r)||Fr(d.marker)-Fr(i);if(!(b>=0&&L<=0||b<=0&&L>=0)&&(b<=0&&(d.marker.inclusiveRight&&i.inclusiveLeft?Be(g.to,n)>=0:Be(g.to,n)>0)||b>=0&&(d.marker.inclusiveRight&&i.inclusiveLeft?Be(g.from,r)<=0:Be(g.from,r)<0)))return!0}}}function p(e){for(var t;t=l(e);)e=t.find(-1,!0).line;return e}function m(e){for(var t;t=s(e);)e=t.find(1,!0).line;return e}function w(e){for(var t,n;t=s(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function x(e,t){var n=Oe(e,t),r=p(n);return n==r?t:Ze(r)}function E(e,t){if(t>e.lastLine())return t;var n=Oe(e,t),r;if(!N(e,n))return t;for(;r=s(n);)n=r.find(1,!0).line;return Ze(n)+1}function N(e,t){var n=sr&&t.markedSpans;if(n){for(var r=void 0,i=0;i<n.length;++i)if(r=n[i],!!r.marker.collapsed){if(r.from==null)return!0;if(!r.marker.widgetNode&&r.from==0&&r.marker.inclusiveLeft&&te(e,t,r))return!0}}}function te(e,t,n){if(n.to==null){var r=n.marker.find(1,!0);return te(e,r.line,rn(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(i.to==null||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&te(e,t,i))return!0}function ne(e){e=p(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;n=o,o=n.parent)for(var u=0;u<o.children.length;++u){var c=o.children[u];if(c==n)break;t+=c.height}return t}function $(e){if(e.height==0)return 0;for(var t=e.text.length,n,r=e;n=l(r);){var i=n.find(0,!0);r=i.from.line,t+=i.from.ch-i.to.ch}for(r=e;n=s(r);){var o=n.find(0,!0);t-=r.text.length-o.from.ch,r=o.to.line,t+=r.text.length-o.to.ch}return t}function V(e){var t=e.display,n=e.doc;t.maxLine=Oe(n,n.first),t.maxLineLength=$(t.maxLine),t.maxLineChanged=!0,n.iter(function(r){var i=$(r);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=r)})}var be=function(e,t,n){this.text=e,li(this,t),this.height=n?n(this):1};be.prototype.lineNo=function(){return Ze(this)},Cr(be);function ge(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),oi(e),li(e,n);var i=r?r(e):1;i!=e.height&&gt(e,i)}function Ne(e){e.parent=null,oi(e)}var We={},Fe={};function Ye(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Fe:We;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function yt(e,t){var n=se("span",null,null,_?"padding-right: .1px":null),r={pre:se("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,u=void 0;r.pos=0,r.addToken=kt,tr(e.display.measure)&&(u=Qe(o,e.doc.direction))&&(r.addToken=je(r.addToken,u)),r.map=[];var c=t!=e.display.externalMeasured&&Ze(o);Bt(o,r,$r(e,o,c)),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=He(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=He(o.styleClasses.textClass,r.textClass||""))),r.map.length==0&&r.map.push(0,0,r.content.appendChild(Oa(e.display.measure))),i==0?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(_){var d=r.content.lastChild;(/\bcm-tab\b/.test(d.className)||d.querySelector&&d.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return ot(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=He(r.pre.className,r.textClass||"")),r}function st(e){var t=fe("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function kt(e,t,n,r,i,o,u){if(t){var c=e.splitSpaces?et(t,e.trailingSpace):t,d=e.cm.state.specialChars,g=!1,b;if(!d.test(t))e.col+=t.length,b=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,b),I&&X<9&&(g=!0),e.pos+=t.length;else{b=document.createDocumentFragment();for(var L=0;;){d.lastIndex=L;var K=d.exec(t),F=K?K.index-L:t.length-L;if(F){var ee=document.createTextNode(c.slice(L,L+F));I&&X<9?b.appendChild(fe("span",[ee])):b.appendChild(ee),e.map.push(e.pos,e.pos+F,ee),e.col+=F,e.pos+=F}if(!K)break;L+=F+1;var oe=void 0;if(K[0]=="	"){var ve=e.cm.options.tabSize,Ce=ve-e.col%ve;oe=b.appendChild(fe("span",Xr(Ce),"cm-tab")),oe.setAttribute("role","presentation"),oe.setAttribute("cm-text","	"),e.col+=Ce}else K[0]=="\r"||K[0]==`
`?(oe=b.appendChild(fe("span",K[0]=="\r"?"␍":"␤","cm-invalidchar")),oe.setAttribute("cm-text",K[0]),e.col+=1):(oe=e.cm.options.specialCharPlaceholder(K[0]),oe.setAttribute("cm-text",K[0]),I&&X<9?b.appendChild(fe("span",[oe])):b.appendChild(oe),e.col+=1);e.map.push(e.pos,e.pos+1,oe),e.pos++}}if(e.trailingSpace=c.charCodeAt(t.length-1)==32,n||r||i||g||o||u){var ke=n||"";r&&(ke+=r),i&&(ke+=i);var Se=fe("span",[b],ke,o);if(u)for(var Te in u)u.hasOwnProperty(Te)&&Te!="style"&&Te!="class"&&Se.setAttribute(Te,u[Te]);return e.content.appendChild(Se)}e.content.appendChild(b)}}function et(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);o==" "&&n&&(i==e.length-1||e.charCodeAt(i+1)==32)&&(o=" "),r+=o,n=o==" "}return r}function je(e,t){return function(n,r,i,o,u,c,d){i=i?i+" cm-force-border":"cm-force-border";for(var g=n.pos,b=g+r.length;;){for(var L=void 0,K=0;K<t.length&&(L=t[K],!(L.to>g&&L.from<=g));K++);if(L.to>=b)return e(n,r,i,o,u,c,d);e(n,r.slice(0,L.to-g),i,o,null,c,d),o=null,r=r.slice(L.to-g),g=L.to}}}function bt(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function Bt(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(!r){for(var u=1;u<n.length;u+=2)t.addToken(t,i.slice(o,o=n[u]),Ye(n[u+1],t.cm.options));return}for(var c=i.length,d=0,g=1,b="",L,K,F=0,ee,oe,ve,Ce,ke;;){if(F==d){ee=oe=ve=K="",ke=null,Ce=null,F=1/0;for(var Se=[],Te=void 0,Pe=0;Pe<r.length;++Pe){var Ie=r[Pe],Ke=Ie.marker;if(Ke.type=="bookmark"&&Ie.from==d&&Ke.widgetNode)Se.push(Ke);else if(Ie.from<=d&&(Ie.to==null||Ie.to>d||Ke.collapsed&&Ie.to==d&&Ie.from==d)){if(Ie.to!=null&&Ie.to!=d&&F>Ie.to&&(F=Ie.to,oe=""),Ke.className&&(ee+=" "+Ke.className),Ke.css&&(K=(K?K+";":"")+Ke.css),Ke.startStyle&&Ie.from==d&&(ve+=" "+Ke.startStyle),Ke.endStyle&&Ie.to==F&&(Te||(Te=[])).push(Ke.endStyle,Ie.to),Ke.title&&((ke||(ke={})).title=Ke.title),Ke.attributes)for(var at in Ke.attributes)(ke||(ke={}))[at]=Ke.attributes[at];Ke.collapsed&&(!Ce||si(Ce.marker,Ke)<0)&&(Ce=Ie)}else Ie.from>d&&F>Ie.from&&(F=Ie.from)}if(Te)for(var Mt=0;Mt<Te.length;Mt+=2)Te[Mt+1]==F&&(oe+=" "+Te[Mt]);if(!Ce||Ce.from==d)for(var ut=0;ut<Se.length;++ut)bt(t,0,Se[ut]);if(Ce&&(Ce.from||0)==d){if(bt(t,(Ce.to==null?c+1:Ce.to)-d,Ce.marker,Ce.from==null),Ce.to==null)return;Ce.to==d&&(Ce=!1)}}if(d>=c)break;for(var Vt=Math.min(c,F);;){if(b){var Gt=d+b.length;if(!Ce){var mt=Gt>Vt?b.slice(0,Vt-d):b;t.addToken(t,mt,L?L+ee:ee,ve,d+mt.length==F?oe:"",K,ke)}if(Gt>=Vt){b=b.slice(Vt-d),d=Vt;break}d=Gt,ve=""}b=i.slice(o,o=n[g++]),L=Ye(n[g++],t.cm.options)}}}function Ct(e,t,n){this.line=t,this.rest=w(t),this.size=this.rest?Ze(_e(this.rest))-n+1:1,this.node=this.text=null,this.hidden=N(e,t)}function rr(e,t,n){for(var r=[],i,o=t;o<n;o=i){var u=new Ct(e.doc,Oe(e.doc,o),o);i=o+u.size,r.push(u)}return r}var nr=null;function ui(e){nr?nr.ops.push(e):e.ownsGroup=nr={ops:[e],delayedCallbacks:[]}}function Us(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}function js(e,t){var n=e.ownsGroup;if(n)try{Us(n)}finally{nr=null,t(n)}}var fi=null;function wt(e,t){var n=mn(e,t);if(n.length){var r=Array.prototype.slice.call(arguments,2),i;nr?i=nr.delayedCallbacks:fi?i=fi:(i=fi=[],setTimeout(Gs,0));for(var o=function(c){i.push(function(){return n[c].apply(null,r)})},u=0;u<n.length;++u)o(u)}}function Gs(){var e=fi;fi=null;for(var t=0;t<e.length;++t)e[t]()}function Ho(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];o=="text"?Xs(e,t):o=="gutter"?zo(e,t,n,r):o=="class"?Ha(e,t):o=="widget"&&Ys(e,t,r)}t.changes=null}function ci(e){return e.node==e.text&&(e.node=fe("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),I&&X<8&&(e.node.style.zIndex=2)),e.node}function qs(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=ci(t);t.background=r.insertBefore(fe("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}function Wo(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):yt(e,t)}function Xs(e,t){var n=t.text.className,r=Wo(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,Ha(e,t)):n&&(t.text.className=n)}function Ha(e,t){qs(e,t),t.line.wrapClass?ci(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function zo(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=ci(t);t.gutterBackground=fe("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var u=ci(t),c=t.gutter=fe("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(c.setAttribute("aria-hidden","true"),e.display.input.setUneditable(c),u.insertBefore(c,t.text),t.line.gutterClass&&(c.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!o||!o["CodeMirror-linenumbers"])&&(t.lineNumber=c.appendChild(fe("div",Ln(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var d=0;d<e.display.gutterSpecs.length;++d){var g=e.display.gutterSpecs[d].className,b=o.hasOwnProperty(g)&&o[g];b&&c.appendChild(fe("div",[b],"CodeMirror-gutter-elt","left: "+r.gutterLeft[g]+"px; width: "+r.gutterWidth[g]+"px"))}}}function Ys(e,t,n){t.alignable&&(t.alignable=null);for(var r=le("CodeMirror-linewidget"),i=t.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);Ko(e,t,n)}function Js(e,t,n,r){var i=Wo(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),Ha(e,t),zo(e,t,n,r),Ko(e,t,r),t.node}function Ko(e,t,n){if(_o(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)_o(e,t.rest[r],t,n,!1)}function _o(e,t,n,r,i){if(t.widgets)for(var o=ci(n),u=0,c=t.widgets;u<c.length;++u){var d=c[u],g=fe("div",[d.node],"CodeMirror-linewidget"+(d.className?" "+d.className:""));d.handleMouseEvents||g.setAttribute("cm-ignore-events","true"),Qs(d,g,n,r),e.display.input.setUneditable(g),i&&d.above?o.insertBefore(g,n.gutter||n.text):o.appendChild(g),wt(d,"redraw")}}function Qs(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function hi(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Me(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),Ae(t.display.measure,fe("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Lr(e,t){for(var n=yr(t);n!=e.wrapper;n=n.parentNode)if(!n||n.nodeType==1&&n.getAttribute("cm-ignore-events")=="true"||n.parentNode==e.sizer&&n!=e.mover)return!0}function Zi(e){return e.lineSpace.offsetTop}function Wa(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Uo(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Ae(e.measure,fe("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function mr(e){return Xe-e.display.nativeBarWidth}function an(e){return e.display.scroller.clientWidth-mr(e)-e.display.barWidth}function za(e){return e.display.scroller.clientHeight-mr(e)-e.display.barHeight}function Zs(e,t,n){var r=e.options.lineWrapping,i=r&&an(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var u=t.text.firstChild.getClientRects(),c=0;c<u.length-1;c++){var d=u[c],g=u[c+1];Math.abs(d.bottom-g.bottom)>2&&o.push((d.bottom+g.top)/2-n.top)}}o.push(n.bottom-n.top)}}function jo(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(Ze(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function Vs(e,t){t=p(t);var n=Ze(t),r=e.display.externalMeasured=new Ct(e.doc,t,n);r.lineN=n;var i=r.built=yt(e,r);return r.text=i.pre,Ae(e.display.lineMeasure,i.pre),r}function Go(e,t,n,r){return xr(e,Dn(e,t),n,r)}function Ka(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[sn(e,t)];var n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size)return n}function Dn(e,t){var n=Ze(t),r=Ka(e,n);r&&!r.text?r=null:r&&r.changes&&(Ho(e,r,n,qa(e)),e.curOp.forceUpdate=!0),r||(r=Vs(e,t));var i=jo(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function xr(e,t,n,r,i){t.before&&(n=-1);var o=n+(r||""),u;return t.cache.hasOwnProperty(o)?u=t.cache[o]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Zs(e,t.view,t.rect),t.hasHeights=!0),u=eu(e,t,n,r),u.bogus||(t.cache[o]=u)),{left:u.left,right:u.right,top:i?u.rtop:u.top,bottom:i?u.rbottom:u.bottom}}var qo={left:0,right:0,top:0,bottom:0};function Xo(e,t,n){for(var r,i,o,u,c,d,g=0;g<e.length;g+=3)if(c=e[g],d=e[g+1],t<c?(i=0,o=1,u="left"):t<d?(i=t-c,o=i+1):(g==e.length-3||t==d&&e[g+3]>t)&&(o=d-c,i=o-1,t>=d&&(u="right")),i!=null){if(r=e[g+2],c==d&&n==(r.insertLeft?"left":"right")&&(u=n),n=="left"&&i==0)for(;g&&e[g-2]==e[g-3]&&e[g-1].insertLeft;)r=e[(g-=3)+2],u="left";if(n=="right"&&i==d-c)for(;g<e.length-3&&e[g+3]==e[g+4]&&!e[g+5].insertLeft;)r=e[(g+=3)+2],u="right";break}return{node:r,start:i,end:o,collapse:u,coverStart:c,coverEnd:d}}function $s(e,t){var n=qo;if(t=="left")for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function eu(e,t,n,r){var i=Xo(t.map,n,r),o=i.node,u=i.start,c=i.end,d=i.collapse,g;if(o.nodeType==3){for(var b=0;b<4;b++){for(;u&&pt(t.line.text.charAt(i.coverStart+u));)--u;for(;i.coverStart+c<i.coverEnd&&pt(t.line.text.charAt(i.coverStart+c));)++c;if(I&&X<9&&u==0&&c==i.coverEnd-i.coverStart?g=o.parentNode.getBoundingClientRect():g=$s(de(o,u,c).getClientRects(),r),g.left||g.right||u==0)break;c=u,u=u-1,d="right"}I&&X<11&&(g=tu(e.display.measure,g))}else{u>0&&(d=r="right");var L;e.options.lineWrapping&&(L=o.getClientRects()).length>1?g=L[r=="right"?L.length-1:0]:g=o.getBoundingClientRect()}if(I&&X<9&&!u&&(!g||!g.left&&!g.right)){var K=o.parentNode.getClientRects()[0];K?g={left:K.left,right:K.left+Bn(e.display),top:K.top,bottom:K.bottom}:g=qo}for(var F=g.top-t.rect.top,ee=g.bottom-t.rect.top,oe=(F+ee)/2,ve=t.view.measure.heights,Ce=0;Ce<ve.length-1&&!(oe<ve[Ce]);Ce++);var ke=Ce?ve[Ce-1]:0,Se=ve[Ce],Te={left:(d=="right"?g.right:g.left)-t.rect.left,right:(d=="left"?g.left:g.right)-t.rect.left,top:ke,bottom:Se};return!g.left&&!g.right&&(Te.bogus=!0),e.options.singleCursorHeightPerLine||(Te.rtop=F,Te.rbottom=ee),Te}function tu(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Ea(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function Yo(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Jo(e){e.display.externalMeasure=null,we(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Yo(e.display.view[t])}function di(e){Jo(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Qo(e){return H&&T?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function Zo(e){return H&&T?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function _a(e){var t=p(e),n=t.widgets,r=0;if(n)for(var i=0;i<n.length;++i)n[i].above&&(r+=hi(n[i]));return r}function Vi(e,t,n,r,i){if(!i){var o=_a(t);n.top+=o,n.bottom+=o}if(r=="line")return n;r||(r="local");var u=ne(t);if(r=="local"?u+=Zi(e.display):u-=e.display.viewOffset,r=="page"||r=="window"){var c=e.display.lineSpace.getBoundingClientRect();u+=c.top+(r=="window"?0:Zo(Ue(e)));var d=c.left+(r=="window"?0:Qo(Ue(e)));n.left+=d,n.right+=d}return n.top+=u,n.bottom+=u,n}function Vo(e,t,n){if(n=="div")return t;var r=t.left,i=t.top;if(n=="page")r-=Qo(Ue(e)),i-=Zo(Ue(e));else if(n=="local"||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var u=e.display.lineSpace.getBoundingClientRect();return{left:r-u.left,top:i-u.top}}function $i(e,t,n,r,i){return r||(r=Oe(e.doc,t.line)),Vi(e,r,Go(e,r,t.ch,i),n)}function ur(e,t,n,r,i,o){r=r||Oe(e.doc,t.line),i||(i=Dn(e,r));function u(ee,oe){var ve=xr(e,i,ee,oe?"right":"left",o);return oe?ve.left=ve.right:ve.right=ve.left,Vi(e,r,ve,n)}var c=Qe(r,e.doc.direction),d=t.ch,g=t.sticky;if(d>=r.text.length?(d=r.text.length,g="before"):d<=0&&(d=0,g="after"),!c)return u(g=="before"?d-1:d,g=="before");function b(ee,oe,ve){var Ce=c[oe],ke=Ce.level==1;return u(ve?ee-1:ee,ke!=ve)}var L=$e(c,d,g),K=Er,F=b(d,L,g=="before");return K!=null&&(F.other=b(d,K,g!="before")),F}function $o(e,t){var n=0;t=Le(e.doc,t),e.options.lineWrapping||(n=Bn(e.display)*t.ch);var r=Oe(e.doc,t.line),i=ne(r)+Zi(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Ua(e,t,n,r,i){var o=he(e,t,n);return o.xRel=i,r&&(o.outside=r),o}function ja(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,n<0)return Ua(r.first,0,null,-1,-1);var i=wr(r,n),o=r.first+r.size-1;if(i>o)return Ua(r.first+r.size-1,Oe(r,o).text.length,null,1,1);t<0&&(t=0);for(var u=Oe(r,i);;){var c=ru(e,u,i,t,n),d=f(u,c.ch+(c.xRel>0||c.outside>0?1:0));if(!d)return c;var g=d.find(1);if(g.line==i)return g;u=Oe(r,i=g.line)}}function el(e,t,n,r){r-=_a(t);var i=t.text.length,o=Yr(function(u){return xr(e,n,u-1).bottom<=r},i,0);return i=Yr(function(u){return xr(e,n,u).top>r},o,i),{begin:o,end:i}}function tl(e,t,n,r){n||(n=Dn(e,t));var i=Vi(e,t,xr(e,n,r),"line").top;return el(e,t,n,i)}function Ga(e,t,n,r){return e.bottom<=n?!1:e.top>n?!0:(r?e.left:e.right)>t}function ru(e,t,n,r,i){i-=ne(t);var o=Dn(e,t),u=_a(t),c=0,d=t.text.length,g=!0,b=Qe(t,e.doc.direction);if(b){var L=(e.options.lineWrapping?iu:nu)(e,t,n,o,b,r,i);g=L.level!=1,c=g?L.from:L.to-1,d=g?L.to:L.from-1}var K=null,F=null,ee=Yr(function(Pe){var Ie=xr(e,o,Pe);return Ie.top+=u,Ie.bottom+=u,Ga(Ie,r,i,!1)?(Ie.top<=i&&Ie.left<=r&&(K=Pe,F=Ie),!0):!1},c,d),oe,ve,Ce=!1;if(F){var ke=r-F.left<F.right-r,Se=ke==g;ee=K+(Se?0:1),ve=Se?"after":"before",oe=ke?F.left:F.right}else{!g&&(ee==d||ee==c)&&ee++,ve=ee==0?"after":ee==t.text.length?"before":xr(e,o,ee-(g?1:0)).bottom+u<=i==g?"after":"before";var Te=ur(e,he(n,ee,ve),"line",t,o);oe=Te.left,Ce=i<Te.top?-1:i>=Te.bottom?1:0}return ee=zi(t.text,ee,1),Ua(n,ee,ve,Ce,r-oe)}function nu(e,t,n,r,i,o,u){var c=Yr(function(L){var K=i[L],F=K.level!=1;return Ga(ur(e,he(n,F?K.to:K.from,F?"before":"after"),"line",t,r),o,u,!0)},0,i.length-1),d=i[c];if(c>0){var g=d.level!=1,b=ur(e,he(n,g?d.from:d.to,g?"after":"before"),"line",t,r);Ga(b,o,u,!0)&&b.top>u&&(d=i[c-1])}return d}function iu(e,t,n,r,i,o,u){var c=el(e,t,r,u),d=c.begin,g=c.end;/\s/.test(t.text.charAt(g-1))&&g--;for(var b=null,L=null,K=0;K<i.length;K++){var F=i[K];if(!(F.from>=g||F.to<=d)){var ee=F.level!=1,oe=xr(e,r,ee?Math.min(g,F.to)-1:Math.max(d,F.from)).right,ve=oe<o?o-oe+1e9:oe-o;(!b||L>ve)&&(b=F,L=ve)}}return b||(b=i[i.length-1]),b.from<d&&(b={from:d,to:b.to,level:b.level}),b.to>g&&(b={from:b.from,to:g,level:b.level}),b}var on;function Nn(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(on==null){on=fe("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)on.appendChild(document.createTextNode("x")),on.appendChild(fe("br"));on.appendChild(document.createTextNode("x"))}Ae(e.measure,on);var n=on.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),we(e.measure),n||1}function Bn(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=fe("span","xxxxxxxxxx"),n=fe("pre",[t],"CodeMirror-line-like");Ae(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function qa(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,u=0;o;o=o.nextSibling,++u){var c=e.display.gutterSpecs[u].className;n[c]=o.offsetLeft+o.clientLeft+i,r[c]=o.clientWidth}return{fixedPos:Xa(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function Xa(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function rl(e){var t=Nn(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Bn(e.display)-3);return function(i){if(N(e.doc,i))return 0;var o=0;if(i.widgets)for(var u=0;u<i.widgets.length;u++)i.widgets[u].height&&(o+=i.widgets[u].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function Ya(e){var t=e.doc,n=rl(e);t.iter(function(r){var i=n(r);i!=r.height&&gt(r,i)})}function ln(e,t,n,r){var i=e.display;if(!n&&yr(t).getAttribute("cm-not-content")=="true")return null;var o,u,c=i.lineSpace.getBoundingClientRect();try{o=t.clientX-c.left,u=t.clientY-c.top}catch{return null}var d=ja(e,o,u),g;if(r&&d.xRel>0&&(g=Oe(e.doc,d.line).text).length==d.ch){var b=Y(g,g.length,e.options.tabSize)-g.length;d=he(d.line,Math.max(0,Math.round((o-Uo(e.display).left)/Bn(e.display))-b))}return d}function sn(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var n=e.display.view,r=0;r<n.length;r++)if(t-=n[r].size,t<0)return r}function Ut(e,t,n,r){t==null&&(t=e.doc.first),n==null&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)sr&&x(e.doc,t)<i.viewTo&&Wr(e);else if(n<=i.viewFrom)sr&&E(e.doc,n+r)>i.viewFrom?Wr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Wr(e);else if(t<=i.viewFrom){var o=ea(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):Wr(e)}else if(n>=i.viewTo){var u=ea(e,t,t,-1);u?(i.view=i.view.slice(0,u.index),i.viewTo=u.lineN):Wr(e)}else{var c=ea(e,t,t,-1),d=ea(e,n,n+r,1);c&&d?(i.view=i.view.slice(0,c.index).concat(rr(e,c.lineN,d.lineN)).concat(i.view.slice(d.index)),i.viewTo+=r):Wr(e)}var g=i.externalMeasured;g&&(n<g.lineN?g.lineN+=r:t<g.lineN+g.size&&(i.externalMeasured=null))}function Hr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[sn(e,t)];if(o.node!=null){var u=o.changes||(o.changes=[]);me(u,n)==-1&&u.push(n)}}}function Wr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ea(e,t,n,r){var i=sn(e,t),o,u=e.display.view;if(!sr||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var c=e.display.viewFrom,d=0;d<i;d++)c+=u[d].size;if(c!=t){if(r>0){if(i==u.length-1)return null;o=c+u[i].size-t,i++}else o=c-t;t+=o,n+=o}for(;x(e.doc,n)!=n;){if(i==(r<0?0:u.length-1))return null;n+=r*u[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function au(e,t,n){var r=e.display,i=r.view;i.length==0||t>=r.viewTo||n<=r.viewFrom?(r.view=rr(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=rr(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(sn(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(rr(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,sn(e,n)))),r.viewTo=n}function nl(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];!i.hidden&&(!i.node||i.changes)&&++n}return n}function pi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function il(e,t){t===void 0&&(t=!0);var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),u=e.options.$customCursor;u&&(t=!0);for(var c=0;c<n.sel.ranges.length;c++)if(!(!t&&c==n.sel.primIndex)){var d=n.sel.ranges[c];if(!(d.from().line>=e.display.viewTo||d.to().line<e.display.viewFrom)){var g=d.empty();if(u){var b=u(e,d);b&&Ja(e,b,i)}else(g||e.options.showCursorWhenSelecting)&&Ja(e,d.head,i);g||ou(e,d,o)}}return r}function Ja(e,t,n){var r=ur(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(fe("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var o=$i(e,t,"div",null,null),u=o.right-o.left;i.style.width=(u>0?u:e.defaultCharWidth())+"px"}if(r.other){var c=n.appendChild(fe("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));c.style.display="",c.style.left=r.other.left+"px",c.style.top=r.other.top+"px",c.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function ta(e,t){return e.top-t.top||e.left-t.left}function ou(e,t,n){var r=e.display,i=e.doc,o=document.createDocumentFragment(),u=Uo(e.display),c=u.left,d=Math.max(r.sizerWidth,an(e)-r.sizer.offsetLeft)-u.right,g=i.direction=="ltr";function b(Se,Te,Pe,Ie){Te<0&&(Te=0),Te=Math.round(Te),Ie=Math.round(Ie),o.appendChild(fe("div",null,"CodeMirror-selected","position: absolute; left: "+Se+`px;
                             top: `+Te+"px; width: "+(Pe??d-Se)+`px;
                             height: `+(Ie-Te)+"px"))}function L(Se,Te,Pe){var Ie=Oe(i,Se),Ke=Ie.text.length,at,Mt;function ut(mt,qt){return $i(e,he(Se,mt),"div",Ie,qt)}function Vt(mt,qt,Ot){var St=tl(e,Ie,null,mt),xt=qt=="ltr"==(Ot=="after")?"left":"right",ct=Ot=="after"?St.begin:St.end-(/\s/.test(Ie.text.charAt(St.end-1))?2:1);return ut(ct,xt)[xt]}var Gt=Qe(Ie,i.direction);return Ma(Gt,Te||0,Pe??Ke,function(mt,qt,Ot,St){var xt=Ot=="ltr",ct=ut(mt,xt?"left":"right"),Xt=ut(qt-1,xt?"right":"left"),Jn=Te==null&&mt==0,Gr=Pe==null&&qt==Ke,Pt=St==0,br=!Gt||St==Gt.length-1;if(Xt.top-ct.top<=3){var At=(g?Jn:Gr)&&Pt,ko=(g?Gr:Jn)&&br,Ar=At?c:(xt?ct:Xt).left,dn=ko?d:(xt?Xt:ct).right;b(Ar,ct.top,dn-Ar,ct.bottom)}else{var pn,Ht,Qn,wo;xt?(pn=g&&Jn&&Pt?c:ct.left,Ht=g?d:Vt(mt,Ot,"before"),Qn=g?c:Vt(qt,Ot,"after"),wo=g&&Gr&&br?d:Xt.right):(pn=g?Vt(mt,Ot,"before"):c,Ht=!g&&Jn&&Pt?d:ct.right,Qn=!g&&Gr&&br?c:Xt.left,wo=g?Vt(qt,Ot,"after"):d),b(pn,ct.top,Ht-pn,ct.bottom),ct.bottom<Xt.top&&b(c,ct.bottom,null,Xt.top),b(Qn,Xt.top,wo-Qn,Xt.bottom)}(!at||ta(ct,at)<0)&&(at=ct),ta(Xt,at)<0&&(at=Xt),(!Mt||ta(ct,Mt)<0)&&(Mt=ct),ta(Xt,Mt)<0&&(Mt=Xt)}),{start:at,end:Mt}}var K=t.from(),F=t.to();if(K.line==F.line)L(K.line,K.ch,F.ch);else{var ee=Oe(i,K.line),oe=Oe(i,F.line),ve=p(ee)==p(oe),Ce=L(K.line,K.ch,ve?ee.text.length+1:null).end,ke=L(F.line,ve?0:null,F.ch).start;ve&&(Ce.top<ke.top-2?(b(Ce.right,Ce.top,null,Ce.bottom),b(c,ke.top,ke.left,ke.bottom)):b(Ce.right,Ce.top,ke.left-Ce.right,Ce.bottom)),Ce.bottom<ke.top&&b(c,Ce.bottom,null,ke.top)}n.appendChild(o)}function Qa(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Fn(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function al(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Va(e))}function Za(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Fn(e))},100)}function Va(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(ot(e,"focus",e,t),e.state.focused=!0,De(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),_&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Qa(e))}function Fn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ot(e,"blur",e,t),e.state.focused=!1,xe(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function ra(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,o=0,u=0;u<t.view.length;u++){var c=t.view[u],d=e.options.lineWrapping,g=void 0,b=0;if(!c.hidden){if(i+=c.line.height,I&&X<8){var L=c.node.offsetTop+c.node.offsetHeight;g=L-n,n=L}else{var K=c.node.getBoundingClientRect();g=K.bottom-K.top,!d&&c.text.firstChild&&(b=c.text.firstChild.getBoundingClientRect().right-K.left-1)}var F=c.line.height-g;if((F>.005||F<-.005)&&(i<r&&(o-=F),gt(c.line,g),ol(c.line),c.rest))for(var ee=0;ee<c.rest.length;ee++)ol(c.rest[ee]);if(b>e.display.sizerWidth){var oe=Math.ceil(b/Bn(e.display));oe>e.display.maxLineLength&&(e.display.maxLineLength=oe,e.display.maxLine=c.line,e.display.maxLineChanged=!0)}}}Math.abs(o)>2&&(t.scroller.scrollTop+=o)}function ol(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function na(e,t,n){var r=n&&n.top!=null?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Zi(e));var i=n&&n.bottom!=null?n.bottom:r+e.wrapper.clientHeight,o=wr(t,r),u=wr(t,i);if(n&&n.ensure){var c=n.ensure.from.line,d=n.ensure.to.line;c<o?(o=c,u=wr(t,ne(Oe(t,c))+e.wrapper.clientHeight)):Math.min(d,t.lastLine())>=u&&(o=wr(t,ne(Oe(t,d))-e.wrapper.clientHeight),u=d)}return{from:o,to:Math.max(u,o+1)}}function lu(e,t){if(!vt(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null,o=n.wrapper.ownerDocument;if(t.top+r.top<0?i=!0:t.bottom+r.top>(o.defaultView.innerHeight||o.documentElement.clientHeight)&&(i=!1),i!=null&&!J){var u=fe("div","​",null,`position: absolute;
                         top: `+(t.top-n.viewOffset-Zi(e.display))+`px;
                         height: `+(t.bottom-t.top+mr(e)+n.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(u),u.scrollIntoView(i),e.display.lineSpace.removeChild(u)}}}function su(e,t,n,r){r==null&&(r=0);var i;!e.options.lineWrapping&&t==n&&(n=t.sticky=="before"?he(t.line,t.ch+1,"before"):t,t=t.ch?he(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var o=0;o<5;o++){var u=!1,c=ur(e,t),d=!n||n==t?c:ur(e,n);i={left:Math.min(c.left,d.left),top:Math.min(c.top,d.top)-r,right:Math.max(c.left,d.left),bottom:Math.max(c.bottom,d.bottom)+r};var g=$a(e,i),b=e.doc.scrollTop,L=e.doc.scrollLeft;if(g.scrollTop!=null&&(gi(e,g.scrollTop),Math.abs(e.doc.scrollTop-b)>1&&(u=!0)),g.scrollLeft!=null&&(un(e,g.scrollLeft),Math.abs(e.doc.scrollLeft-L)>1&&(u=!0)),!u)break}return i}function uu(e,t){var n=$a(e,t);n.scrollTop!=null&&gi(e,n.scrollTop),n.scrollLeft!=null&&un(e,n.scrollLeft)}function $a(e,t){var n=e.display,r=Nn(e.display);t.top<0&&(t.top=0);var i=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:n.scroller.scrollTop,o=za(e),u={};t.bottom-t.top>o&&(t.bottom=t.top+o);var c=e.doc.height+Wa(n),d=t.top<r,g=t.bottom>c-r;if(t.top<i)u.scrollTop=d?0:t.top;else if(t.bottom>i+o){var b=Math.min(t.top,(g?c:t.bottom)-o);b!=i&&(u.scrollTop=b)}var L=e.options.fixedGutter?0:n.gutters.offsetWidth,K=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:n.scroller.scrollLeft-L,F=an(e)-n.gutters.offsetWidth,ee=t.right-t.left>F;return ee&&(t.right=t.left+F),t.left<10?u.scrollLeft=0:t.left<K?u.scrollLeft=Math.max(0,t.left+L-(ee?0:10)):t.right>F+K-3&&(u.scrollLeft=t.right+(ee?0:10)-F),u}function eo(e,t){t!=null&&(ia(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Hn(e){ia(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function vi(e,t,n){(t!=null||n!=null)&&ia(e),t!=null&&(e.curOp.scrollLeft=t),n!=null&&(e.curOp.scrollTop=n)}function fu(e,t){ia(e),e.curOp.scrollToPos=t}function ia(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=$o(e,t.from),r=$o(e,t.to);ll(e,n,r,t.margin)}}function ll(e,t,n,r){var i=$a(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});vi(e,i.scrollLeft,i.scrollTop)}function gi(e,t){Math.abs(e.doc.scrollTop-t)<2||(z||ro(e,{top:t}),sl(e,t,!0),z&&ro(e),xi(e,100))}function sl(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function un(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r)&&(e.doc.scrollLeft=t,dl(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function yi(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Wa(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+mr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var fn=function(e,t,n){this.cm=n;var r=this.vert=fe("div",[fe("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=fe("div",[fe("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),Ee(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),Ee(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,I&&X<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};fn.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(r==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},fn.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},fn.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},fn.prototype.zeroWidthHack=function(){var e=y&&!W?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new U,this.disableVert=new U},fn.prototype.enableZeroWidthBar=function(e,t,n){e.style.visibility="";function r(){var i=e.getBoundingClientRect(),o=n=="vert"?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1);o!=e?e.style.visibility="hidden":t.set(1e3,r)}t.set(1e3,r)},fn.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var mi=function(){};mi.prototype.update=function(){return{bottom:0,right:0}},mi.prototype.setScrollLeft=function(){},mi.prototype.setScrollTop=function(){},mi.prototype.clear=function(){};function Wn(e,t){t||(t=yi(e));var n=e.display.barWidth,r=e.display.barHeight;ul(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&ra(e),ul(e,yi(e)),n=e.display.barWidth,r=e.display.barHeight}function ul(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}var fl={native:fn,null:mi};function cl(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&xe(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new fl[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Ee(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){n=="horizontal"?un(e,t):gi(e,t)},e),e.display.scrollbars.addClass&&De(e.display.wrapper,e.display.scrollbars.addClass)}var cu=0;function cn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++cu,markArrays:null},ui(e.curOp)}function hn(e){var t=e.curOp;t&&js(t,function(n){for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;hu(n)})}function hu(e){for(var t=e.ops,n=0;n<t.length;n++)du(t[n]);for(var r=0;r<t.length;r++)pu(t[r]);for(var i=0;i<t.length;i++)vu(t[i]);for(var o=0;o<t.length;o++)gu(t[o]);for(var u=0;u<t.length;u++)yu(t[u])}function du(e){var t=e.cm,n=t.display;xu(t),e.updateMaxLine&&V(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new aa(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function pu(e){e.updatedDisplay=e.mustUpdate&&to(e.cm,e.update)}function vu(e){var t=e.cm,n=t.display;e.updatedDisplay&&ra(t),e.barMeasure=yi(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Go(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+mr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-an(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function gu(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&un(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==ye(qe(t));e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Wn(t,e.barMeasure),e.updatedDisplay&&io(t,e.barMeasure),e.selectionChanged&&Qa(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&al(e.cm)}function yu(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&hl(t,e.update),n.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),e.scrollTop!=null&&sl(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&un(t,e.scrollLeft,!0,!0),e.scrollToPos){var i=su(t,Le(r,e.scrollToPos.from),Le(r,e.scrollToPos.to),e.scrollToPos.margin);lu(t,i)}var o=e.maybeHiddenMarkers,u=e.maybeUnhiddenMarkers;if(o)for(var c=0;c<o.length;++c)o[c].lines.length||ot(o[c],"hide");if(u)for(var d=0;d<u.length;++d)u[d].lines.length&&ot(u[d],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ot(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Zt(e,t){if(e.curOp)return t();cn(e);try{return t()}finally{hn(e)}}function Lt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);cn(e);try{return t.apply(e,arguments)}finally{hn(e)}}}function Ft(e){return function(){if(this.curOp)return e.apply(this,arguments);cn(this);try{return e.apply(this,arguments)}finally{hn(this)}}}function Tt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);cn(t);try{return e.apply(this,arguments)}finally{hn(t)}}}function xi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,pe(mu,e))}function mu(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=Br(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(r.line>=e.display.viewFrom){var u=o.styles,c=o.text.length>e.options.maxHighlightLength?Sr(t.mode,r.state):null,d=ji(e,o,r,!0);c&&(r.state=c),o.styles=d.styles;var g=o.styleClasses,b=d.classes;b?o.styleClasses=b:g&&(o.styleClasses=null);for(var L=!u||u.length!=o.styles.length||g!=b&&(!g||!b||g.bgClass!=b.bgClass||g.textClass!=b.textClass),K=0;!L&&K<u.length;++K)L=u[K]!=o.styles[K];L&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&Rn(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return xi(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Zt(e,function(){for(var o=0;o<i.length;o++)Hr(e,i[o],"text")})}}var aa=function(e,t,n){var r=e.display;this.viewport=t,this.visible=na(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=an(e),this.force=n,this.dims=qa(e),this.events=[]};aa.prototype.signal=function(e,t){_t(e,t)&&this.events.push(arguments)},aa.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ot.apply(null,this.events[e])};function xu(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=mr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=mr(e)+"px",t.scrollbarsClipped=!0)}function bu(e){if(e.hasFocus())return null;var t=ye(qe(e));if(!t||!Me(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=ie(e).getSelection();r.anchorNode&&r.extend&&Me(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}function Cu(e){if(!(!e||!e.activeElt||e.activeElt==ye(R(e.activeElt)))&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&Me(document.body,e.anchorNode)&&Me(document.body,e.focusNode))){var t=e.activeElt.ownerDocument,n=t.defaultView.getSelection(),r=t.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),n.removeAllRanges(),n.addRange(r),n.extend(e.focusNode,e.focusOffset)}}function to(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Wr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&nl(e)==0)return!1;pl(e)&&(Wr(e),t.dims=qa(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),u=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>u&&n.viewTo-u<20&&(u=Math.min(i,n.viewTo)),sr&&(o=x(e.doc,o),u=E(e.doc,u));var c=o!=n.viewFrom||u!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;au(e,o,u),n.viewOffset=ne(Oe(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var d=nl(e);if(!c&&d==0&&!t.force&&n.renderedView==n.view&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo))return!1;var g=bu(e);return d>4&&(n.lineDiv.style.display="none"),Su(e,n.updateLineNumbers,t.dims),d>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,Cu(g),we(n.cursorDiv),we(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,c&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,xi(e,400)),n.updateLineNumbers=null,!0}function hl(e,t){for(var n=t.viewport,r=!0;;r=!1){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==an(e)){if(n&&n.top!=null&&(n={top:Math.min(e.doc.height+Wa(e.display)-za(e),n.top)}),t.visible=na(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else r&&(t.visible=na(e.display,e.doc,n));if(!to(e,t))break;ra(e);var i=yi(e);pi(e),Wn(e,i),io(e,i),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ro(e,t){var n=new aa(e,t);if(to(e,n)){ra(e),hl(e,n);var r=yi(e);pi(e),Wn(e,r),io(e,r),n.finish()}}function Su(e,t,n){var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,u=o.firstChild;function c(ee){var oe=ee.nextSibling;return _&&y&&e.display.currentWheelTarget==ee?ee.style.display="none":ee.parentNode.removeChild(ee),oe}for(var d=r.view,g=r.viewFrom,b=0;b<d.length;b++){var L=d[b];if(!L.hidden)if(!L.node||L.node.parentNode!=o){var K=Js(e,L,g,n);o.insertBefore(K,u)}else{for(;u!=L.node;)u=c(u);var F=i&&t!=null&&t<=g&&L.lineNumber;L.changes&&(me(L.changes,"gutter")>-1&&(F=!1),Ho(e,L,g,n)),F&&(we(L.lineNumber),L.lineNumber.appendChild(document.createTextNode(Ln(e.options,g)))),u=L.node.nextSibling}g+=L.size}for(;u;)u=c(u)}function no(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",wt(e,"gutterChanged",e)}function io(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+mr(e)+"px"}function dl(e){var t=e.display,n=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var r=Xa(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",u=0;u<n.length;u++)if(!n[u].hidden){e.options.fixedGutter&&(n[u].gutter&&(n[u].gutter.style.left=o),n[u].gutterBackground&&(n[u].gutterBackground.style.left=o));var c=n[u].alignable;if(c)for(var d=0;d<c.length;d++)c[d].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function pl(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Ln(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(fe("div",[fe("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,u=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-u)+1,r.lineNumWidth=r.lineNumInnerWidth+u,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",no(e.display),!0}return!1}function ao(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var o=e[i],u=null;if(typeof o!="string"&&(u=o.style,o=o.className),o=="CodeMirror-linenumbers")if(t)r=!0;else continue;n.push({className:o,style:u})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function vl(e){var t=e.gutters,n=e.gutterSpecs;we(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],o=i.className,u=i.style,c=t.appendChild(fe("div",null,"CodeMirror-gutter "+o));u&&(c.style.cssText=u),o=="CodeMirror-linenumbers"&&(e.lineGutter=c,c.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",no(e)}function bi(e){vl(e.display),Ut(e),dl(e)}function ku(e,t,n,r){var i=this;this.input=n,i.scrollbarFiller=fe("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=fe("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=se("div",null,"CodeMirror-code"),i.selectionDiv=fe("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=fe("div",null,"CodeMirror-cursors"),i.measure=fe("div",null,"CodeMirror-measure"),i.lineMeasure=fe("div",null,"CodeMirror-measure"),i.lineSpace=se("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=se("div",[i.lineSpace],"CodeMirror-lines");i.mover=fe("div",[o],null,"position: relative"),i.sizer=fe("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=fe("div",null,null,"position: absolute; height: "+Xe+"px; width: 1px;"),i.gutters=fe("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=fe("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=fe("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),H&&q>=105&&(i.wrapper.style.clipPath="inset(0px)"),i.wrapper.setAttribute("translate","no"),I&&X<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),!_&&!(z&&v)&&(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,i.gutterSpecs=ao(r.gutters,r.lineNumbers),vl(i),n.init(i)}var oa=0,Tr=null;I?Tr=-.53:z?Tr=15:H?Tr=-.7:ae&&(Tr=-1/3);function gl(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),n==null&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:n==null&&(n=e.wheelDelta),{x:t,y:n}}function wu(e){var t=gl(e);return t.x*=Tr,t.y*=Tr,t}function yl(e,t){H&&q==102&&(e.display.chromeScrollHack==null?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout(function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""},100));var n=gl(t),r=n.x,i=n.y,o=Tr;t.deltaMode===0&&(r=t.deltaX,i=t.deltaY,o=1);var u=e.display,c=u.scroller,d=c.scrollWidth>c.clientWidth,g=c.scrollHeight>c.clientHeight;if(r&&d||i&&g){if(i&&y&&_){e:for(var b=t.target,L=u.view;b!=c;b=b.parentNode)for(var K=0;K<L.length;K++)if(L[K].node==b){e.display.currentWheelTarget=b;break e}}if(r&&!z&&!j&&o!=null){i&&g&&gi(e,Math.max(0,c.scrollTop+i*o)),un(e,Math.max(0,c.scrollLeft+r*o)),(!i||i&&g)&&Et(t),u.wheelStartX=null;return}if(i&&o!=null){var F=i*o,ee=e.doc.scrollTop,oe=ee+u.wrapper.clientHeight;F<0?ee=Math.max(0,ee+F-50):oe=Math.min(e.doc.height,oe+F+50),ro(e,{top:ee,bottom:oe})}oa<20&&t.deltaMode!==0&&(u.wheelStartX==null?(u.wheelStartX=c.scrollLeft,u.wheelStartY=c.scrollTop,u.wheelDX=r,u.wheelDY=i,setTimeout(function(){if(u.wheelStartX!=null){var ve=c.scrollLeft-u.wheelStartX,Ce=c.scrollTop-u.wheelStartY,ke=Ce&&u.wheelDY&&Ce/u.wheelDY||ve&&u.wheelDX&&ve/u.wheelDX;u.wheelStartX=u.wheelStartY=null,ke&&(Tr=(Tr*oa+ke)/(oa+1),++oa)}},200)):(u.wheelDX+=r,u.wheelDY+=i))}}var er=function(e,t){this.ranges=e,this.primIndex=t};er.prototype.primary=function(){return this.ranges[this.primIndex]},er.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!ti(n.anchor,r.anchor)||!ti(n.head,r.head))return!1}return!0},er.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Ve(Tn(this.ranges[t].anchor),Tn(this.ranges[t].head));return new er(e,this.primIndex)},er.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},er.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(Be(t,r.from())>=0&&Be(e,r.to())<=0)return n}return-1};var Ve=function(e,t){this.anchor=e,this.head=t};Ve.prototype.from=function(){return An(this.anchor,this.head)},Ve.prototype.to=function(){return Mn(this.anchor,this.head)},Ve.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function fr(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(K,F){return Be(K.from(),F.from())}),n=me(t,i);for(var o=1;o<t.length;o++){var u=t[o],c=t[o-1],d=Be(c.to(),u.from());if(r&&!u.empty()?d>0:d>=0){var g=An(c.from(),u.from()),b=Mn(c.to(),u.to()),L=c.empty()?u.from()==u.head:c.from()==c.head;o<=n&&--n,t.splice(--o,2,new Ve(L?b:g,L?g:b))}}return new er(t,n)}function zr(e,t){return new er([new Ve(e,t||e)],0)}function Kr(e){return e.text?he(e.from.line+e.text.length-1,_e(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function ml(e,t){if(Be(e,t.from)<0)return e;if(Be(e,t.to)<=0)return Kr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Kr(t).ch-t.to.ch),he(n,r)}function oo(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new Ve(ml(i.anchor,t),ml(i.head,t)))}return fr(e.cm,n,e.sel.primIndex)}function xl(e,t,n){return e.line==t.line?he(n.line,e.ch-t.ch+n.ch):he(n.line+(e.line-t.line),e.ch)}function Lu(e,t,n){for(var r=[],i=he(e.first,0),o=i,u=0;u<t.length;u++){var c=t[u],d=xl(c.from,i,o),g=xl(Kr(c),i,o);if(i=c.to,o=g,n=="around"){var b=e.sel.ranges[u],L=Be(b.head,b.anchor)<0;r[u]=new Ve(L?g:d,L?d:g)}else r[u]=new Ve(d,d)}return new er(r,e.sel.primIndex)}function lo(e){e.doc.mode=Zr(e.options,e.doc.modeOption),Ci(e)}function Ci(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,xi(e,100),e.state.modeGen++,e.curOp&&Ut(e)}function bl(e,t){return t.from.ch==0&&t.to.ch==0&&_e(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function so(e,t,n,r){function i(ke){return n?n[ke]:null}function o(ke,Se,Te){ge(ke,Se,Te,r),wt(ke,"change",ke,t)}function u(ke,Se){for(var Te=[],Pe=ke;Pe<Se;++Pe)Te.push(new be(g[Pe],i(Pe),r));return Te}var c=t.from,d=t.to,g=t.text,b=Oe(e,c.line),L=Oe(e,d.line),K=_e(g),F=i(g.length-1),ee=d.line-c.line;if(t.full)e.insert(0,u(0,g.length)),e.remove(g.length,e.size-g.length);else if(bl(e,t)){var oe=u(0,g.length-1);o(L,L.text,F),ee&&e.remove(c.line,ee),oe.length&&e.insert(c.line,oe)}else if(b==L)if(g.length==1)o(b,b.text.slice(0,c.ch)+K+b.text.slice(d.ch),F);else{var ve=u(1,g.length-1);ve.push(new be(K+b.text.slice(d.ch),F,r)),o(b,b.text.slice(0,c.ch)+g[0],i(0)),e.insert(c.line+1,ve)}else if(g.length==1)o(b,b.text.slice(0,c.ch)+g[0]+L.text.slice(d.ch),i(0)),e.remove(c.line+1,ee);else{o(b,b.text.slice(0,c.ch)+g[0],i(0)),o(L,K+L.text.slice(d.ch),F);var Ce=u(1,g.length-1);ee>1&&e.remove(c.line+1,ee-1),e.insert(c.line+1,Ce)}wt(e,"change",e,t)}function _r(e,t,n){function r(i,o,u){if(i.linked)for(var c=0;c<i.linked.length;++c){var d=i.linked[c];if(d.doc!=o){var g=u&&d.sharedHist;n&&!g||(t(d.doc,g),r(d.doc,i,g))}}}r(e,null,!0)}function Cl(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Ya(e),lo(e),Sl(e),e.options.direction=t.direction,e.options.lineWrapping||V(e),e.options.mode=t.modeOption,Ut(e)}function Sl(e){(e.doc.direction=="rtl"?De:xe)(e.display.lineDiv,"CodeMirror-rtl")}function Tu(e){Zt(e,function(){Sl(e),Ut(e)})}function la(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function uo(e,t){var n={from:Tn(t.from),to:Kr(t),text:kr(e,t.from,t.to)};return Ll(e,n,t.from.line,t.to.line+1),_r(e,function(r){return Ll(r,n,t.from.line,t.to.line+1)},!0),n}function kl(e){for(;e.length;){var t=_e(e);if(t.ranges)e.pop();else break}}function Mu(e,t){if(t)return kl(e.done),_e(e.done);if(e.done.length&&!_e(e.done).ranges)return _e(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),_e(e.done)}function wl(e,t,n,r){var i=e.history;i.undone.length=0;var o=+new Date,u,c;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&i.lastModTime>o-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(u=Mu(i,i.lastOp==r)))c=_e(u.changes),Be(t.from,t.to)==0&&Be(t.from,c.to)==0?c.to=Kr(t):u.changes.push(uo(e,t));else{var d=_e(i.done);for((!d||!d.ranges)&&sa(e.sel,i.done),u={changes:[uo(e,t)],generation:i.generation},i.done.push(u);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=o,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,c||ot(e,"historyAdded")}function Au(e,t,n,r){var i=t.charAt(0);return i=="*"||i=="+"&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ou(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Au(e,o,_e(i.done),t))?i.done[i.done.length-1]=t:sa(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&r.clearRedo!==!1&&kl(i.undone)}function sa(e,t){var n=_e(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Ll(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(u){u.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=u.markedSpans),++o})}function Ru(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Eu(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Ru(n[i]));return r}function Tl(e,t){var n=Eu(e,t),r=Pn(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],u=r[i];if(o&&u)e:for(var c=0;c<u.length;++c){for(var d=u[c],g=0;g<o.length;++g)if(o[g].marker==d.marker)continue e;o.push(d)}else u&&(n[i]=u)}return n}function zn(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges){r.push(n?er.prototype.deepCopy.call(o):o);continue}var u=o.changes,c=[];r.push({changes:c});for(var d=0;d<u.length;++d){var g=u[d],b=void 0;if(c.push({from:g.from,to:g.to,text:g.text}),t)for(var L in g)(b=L.match(/^spans_(\d+)$/))&&me(t,Number(b[1]))>-1&&(_e(c)[L]=g[L],delete g[L])}}return r}function fo(e,t,n,r){if(r){var i=e.anchor;if(n){var o=Be(t,i)<0;o!=Be(n,i)<0?(i=t,t=n):o!=Be(t,n)<0&&(t=n)}return new Ve(i,t)}else return new Ve(n||t,t)}function ua(e,t,n,r,i){i==null&&(i=e.cm&&(e.cm.display.shift||e.extend)),It(e,new er([fo(e.sel.primary(),t,n,i)],0),r)}function Ml(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=fo(e.sel.ranges[o],t[o],null,i);var u=fr(e.cm,r,e.sel.primIndex);It(e,u,n)}function co(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,It(e,fr(e.cm,i,e.sel.primIndex),r)}function Al(e,t,n,r){It(e,zr(t,n),r)}function Iu(e,t,n){var r={ranges:t.ranges,update:function(i){this.ranges=[];for(var o=0;o<i.length;o++)this.ranges[o]=new Ve(Le(e,i[o].anchor),Le(e,i[o].head))},origin:n&&n.origin};return ot(e,"beforeSelectionChange",e,r),e.cm&&ot(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?fr(e.cm,r.ranges,r.ranges.length-1):t}function Ol(e,t,n){var r=e.history.done,i=_e(r);i&&i.ranges?(r[r.length-1]=t,fa(e,t,n)):It(e,t,n)}function It(e,t,n){fa(e,t,n),Ou(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function fa(e,t,n){(_t(e,"beforeSelectionChange")||e.cm&&_t(e.cm,"beforeSelectionChange"))&&(t=Iu(e,t,n));var r=n&&n.bias||(Be(t.primary().head,e.sel.primary().head)<0?-1:1);Rl(e,Il(e,t,r,!0)),!(n&&n.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Hn(e.cm)}function Rl(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Ki(e.cm)),wt(e,"cursorActivity",e))}function El(e){Rl(e,Il(e,e.sel,null,!1))}function Il(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var u=t.ranges[o],c=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],d=ca(e,u.anchor,c&&c.anchor,n,r),g=u.head==u.anchor?d:ca(e,u.head,c&&c.head,n,r);(i||d!=u.anchor||g!=u.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new Ve(d,g))}return i?fr(e.cm,i,t.primIndex):t}function Kn(e,t,n,r,i){var o=Oe(e,t.line);if(o.markedSpans)for(var u=0;u<o.markedSpans.length;++u){var c=o.markedSpans[u],d=c.marker,g="selectLeft"in d?!d.selectLeft:d.inclusiveLeft,b="selectRight"in d?!d.selectRight:d.inclusiveRight;if((c.from==null||(g?c.from<=t.ch:c.from<t.ch))&&(c.to==null||(b?c.to>=t.ch:c.to>t.ch))){if(i&&(ot(d,"beforeCursorEnter"),d.explicitlyCleared))if(o.markedSpans){--u;continue}else break;if(!d.atomic)continue;if(n){var L=d.find(r<0?1:-1),K=void 0;if((r<0?b:g)&&(L=Pl(e,L,-r,L&&L.line==t.line?o:null)),L&&L.line==t.line&&(K=Be(L,n))&&(r<0?K<0:K>0))return Kn(e,L,t,r,i)}var F=d.find(r<0?-1:1);return(r<0?g:b)&&(F=Pl(e,F,r,F.line==t.line?o:null)),F?Kn(e,F,t,r,i):null}}return t}function ca(e,t,n,r,i){var o=r||1,u=Kn(e,t,n,o,i)||!i&&Kn(e,t,n,o,!0)||Kn(e,t,n,-o,i)||!i&&Kn(e,t,n,-o,!0);return u||(e.cantEdit=!0,he(e.first,0))}function Pl(e,t,n,r){return n<0&&t.ch==0?t.line>e.first?Le(e,he(t.line-1)):null:n>0&&t.ch==(r||Oe(e,t.line)).text.length?t.line<e.first+e.size-1?he(t.line+1,0):null:new he(t.line,t.ch+n)}function Dl(e){e.setSelection(he(e.firstLine(),0),he(e.lastLine()),rt)}function Nl(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(i,o,u,c){i&&(r.from=Le(e,i)),o&&(r.to=Le(e,o)),u&&(r.text=u),c!==void 0&&(r.origin=c)}),ot(e,"beforeChange",e,r),e.cm&&ot(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function _n(e,t,n){if(e.cm){if(!e.cm.curOp)return Lt(e.cm,_n)(e,t,n);if(e.cm.state.suppressEdits)return}if(!((_t(e,"beforeChange")||e.cm&&_t(e.cm,"beforeChange"))&&(t=Nl(e,t,!0),!t))){var r=$t&&!n&&ai(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Bl(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else Bl(e,t)}}function Bl(e,t){if(!(t.text.length==1&&t.text[0]==""&&Be(t.from,t.to)==0)){var n=oo(e,t);wl(e,t,n,e.cm?e.cm.curOp.id:NaN),Si(e,t,n,Pn(e,t));var r=[];_r(e,function(i,o){!o&&me(r,i.history)==-1&&(zl(i.history,t),r.push(i.history)),Si(i,t,null,Pn(i,t))})}}function ha(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!(r&&!n)){for(var i=e.history,o,u=e.sel,c=t=="undo"?i.done:i.undone,d=t=="undo"?i.undone:i.done,g=0;g<c.length&&(o=c[g],!(n?o.ranges&&!o.equals(e.sel):!o.ranges));g++);if(g!=c.length){for(i.lastOrigin=i.lastSelOrigin=null;;)if(o=c.pop(),o.ranges){if(sa(o,d),n&&!o.equals(e.sel)){It(e,o,{clearRedo:!1});return}u=o}else if(r){c.push(o);return}else break;var b=[];sa(u,d),d.push({changes:b,generation:i.generation}),i.generation=o.generation||++i.maxGeneration;for(var L=_t(e,"beforeChange")||e.cm&&_t(e.cm,"beforeChange"),K=function(oe){var ve=o.changes[oe];if(ve.origin=t,L&&!Nl(e,ve,!1))return c.length=0,{};b.push(uo(e,ve));var Ce=oe?oo(e,ve):_e(c);Si(e,ve,Ce,Tl(e,ve)),!oe&&e.cm&&e.cm.scrollIntoView({from:ve.from,to:Kr(ve)});var ke=[];_r(e,function(Se,Te){!Te&&me(ke,Se.history)==-1&&(zl(Se.history,ve),ke.push(Se.history)),Si(Se,ve,null,Tl(Se,ve))})},F=o.changes.length-1;F>=0;--F){var ee=K(F);if(ee)return ee.v}}}}function Fl(e,t){if(t!=0&&(e.first+=t,e.sel=new er(Yt(e.sel.ranges,function(i){return new Ve(he(i.anchor.line+t,i.anchor.ch),he(i.head.line+t,i.head.ch))}),e.sel.primIndex),e.cm)){Ut(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Hr(e.cm,r,"gutter")}}function Si(e,t,n,r){if(e.cm&&!e.cm.curOp)return Lt(e.cm,Si)(e,t,n,r);if(t.to.line<e.first){Fl(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Fl(e,i),t={from:he(e.first,0),to:he(t.to.line+i,t.to.ch),text:[_e(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:he(o,Oe(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=kr(e,t.from,t.to),n||(n=oo(e,t)),e.cm?Pu(e.cm,t,r):so(e,t,r),fa(e,n,rt),e.cantEdit&&ca(e,he(e.firstLine(),0))&&(e.cantEdit=!1)}}function Pu(e,t,n){var r=e.doc,i=e.display,o=t.from,u=t.to,c=!1,d=o.line;e.options.lineWrapping||(d=Ze(p(Oe(r,o.line))),r.iter(d,u.line+1,function(F){if(F==i.maxLine)return c=!0,!0})),r.sel.contains(t.from,t.to)>-1&&Ki(e),so(r,t,n,rl(e)),e.options.lineWrapping||(r.iter(d,o.line+t.text.length,function(F){var ee=$(F);ee>i.maxLineLength&&(i.maxLine=F,i.maxLineLength=ee,i.maxLineChanged=!0,c=!1)}),c&&(e.curOp.updateMaxLine=!0)),Yi(r,o.line),xi(e,400);var g=t.text.length-(u.line-o.line)-1;t.full?Ut(e):o.line==u.line&&t.text.length==1&&!bl(e.doc,t)?Hr(e,o.line,"text"):Ut(e,o.line,u.line+1,g);var b=_t(e,"changes"),L=_t(e,"change");if(L||b){var K={from:o,to:u,text:t.text,removed:t.removed,origin:t.origin};L&&wt(e,"change",e,K),b&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(K)}e.display.selForContextMenu=null}function Un(e,t,n,r,i){var o;r||(r=n),Be(r,n)<0&&(o=[r,n],n=o[0],r=o[1]),typeof t=="string"&&(t=e.splitLines(t)),_n(e,{from:n,to:r,text:t,origin:i})}function Hl(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Wl(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],u=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var c=0;c<o.ranges.length;c++)Hl(o.ranges[c].anchor,t,n,r),Hl(o.ranges[c].head,t,n,r);continue}for(var d=0;d<o.changes.length;++d){var g=o.changes[d];if(n<g.from.line)g.from=he(g.from.line+r,g.from.ch),g.to=he(g.to.line+r,g.to.ch);else if(t<=g.to.line){u=!1;break}}u||(e.splice(0,i+1),i=0)}}function zl(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Wl(e.done,n,r,i),Wl(e.undone,n,r,i)}function ki(e,t,n,r){var i=t,o=t;return typeof t=="number"?o=Oe(e,lr(e,t)):i=Ze(t),i==null?null:(r(o,i)&&e.cm&&Hr(e.cm,i,n),o)}function wi(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}wi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Ne(i),wt(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}};function Li(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}Li.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),u=r.height;if(r.removeInner(e,o),this.height-=u-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),(t-=o)==0)break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof wi))){var c=[];this.collapse(c),this.children=[new wi(c)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var u=i.lines.length%25+25,c=u;c<i.lines.length;){var d=new wi(i.lines.slice(c,c+=25));i.height-=d.height,this.children.splice(++r,0,d),d.parent=this}i.lines=i.lines.slice(0,u),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Li(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=me(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new Li(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var u=Math.min(t,o-e);if(i.iterN(e,u,n))return!0;if((t-=u)==0)break;e=0}else e-=o}}};var Ti=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};Ti.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=Ze(n);if(!(r==null||!t)){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=hi(this);gt(n,Math.max(0,n.height-o)),e&&(Zt(e,function(){Kl(e,n,-o),Hr(e,r,"widget")}),wt(e,"lineWidgetCleared",e,this,r))}},Ti.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=hi(this)-t;i&&(N(this.doc,r)||gt(r,r.height+i),n&&Zt(n,function(){n.curOp.forceUpdate=!0,Kl(n,r,i),wt(n,"lineWidgetChanged",n,e,Ze(r))}))},Cr(Ti);function Kl(e,t,n){ne(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&eo(e,n)}function Du(e,t,n,r){var i=new Ti(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),ki(e,t,"widget",function(u){var c=u.widgets||(u.widgets=[]);if(i.insertAt==null?c.push(i):c.splice(Math.min(c.length,Math.max(0,i.insertAt)),0,i),i.line=u,o&&!N(e,u)){var d=ne(u)<e.scrollTop;gt(u,u.height+hi(i)),d&&eo(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&wt(o,"lineWidgetAdded",o,i,typeof t=="number"?t:Ze(t)),i}var _l=0,Ur=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++_l};Ur.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&cn(e),_t(this,"clear")){var n=this.find();n&&wt(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var u=this.lines[o],c=rn(u.markedSpans,this);e&&!this.collapsed?Hr(e,Ze(u),"text"):e&&(c.to!=null&&(i=Ze(u)),c.from!=null&&(r=Ze(u))),u.markedSpans=Na(u.markedSpans,c),c.from==null&&this.collapsed&&!N(this.doc,u)&&e&&gt(u,Nn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var d=0;d<this.lines.length;++d){var g=p(this.lines[d]),b=$(g);b>e.display.maxLineLength&&(e.display.maxLine=g,e.display.maxLineLength=b,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&Ut(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&El(e.doc)),e&&wt(e,"markerCleared",e,this,r,i),t&&hn(e),this.parent&&this.parent.clear()}},Ur.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var o=this.lines[i],u=rn(o.markedSpans,this);if(u.from!=null&&(n=he(t?o:Ze(o),u.from),e==-1))return n;if(u.to!=null&&(r=he(t?o:Ze(o),u.to),e==1))return r}return n&&{from:n,to:r}},Ur.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;!t||!r||Zt(r,function(){var i=t.line,o=Ze(t.line),u=Ka(r,o);if(u&&(Yo(u),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!N(n.doc,i)&&n.height!=null){var c=n.height;n.height=null;var d=hi(n)-c;d&&gt(i,i.height+d)}wt(r,"markerChanged",r,e)})},Ur.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||me(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Ur.prototype.detachLine=function(e){if(this.lines.splice(me(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Cr(Ur);function jn(e,t,n,r,i){if(r&&r.shared)return Nu(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Lt(e.cm,jn)(e,t,n,r,i);var o=new Ur(e,i),u=Be(t,n);if(r&&Z(r,o,!1),u>0||u==0&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=se("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(h(e,t.line,t,n,o)||t.line!=n.line&&h(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ji()}o.addToHistory&&wl(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var c=t.line,d=e.cm,g;if(e.iter(c,n.line+1,function(L){d&&o.collapsed&&!d.options.lineWrapping&&p(L)==d.display.maxLine&&(g=!0),o.collapsed&&c!=t.line&&gt(L,0),Ba(L,new In(o,c==t.line?t.ch:null,c==n.line?n.ch:null),e.cm&&e.cm.curOp),++c}),o.collapsed&&e.iter(t.line,n.line+1,function(L){N(e,L)&&gt(L,0)}),o.clearOnEnter&&Ee(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(tn(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++_l,o.atomic=!0),d){if(g&&(d.curOp.updateMaxLine=!0),o.collapsed)Ut(d,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var b=t.line;b<=n.line;b++)Hr(d,b,"text");o.atomic&&El(d.doc),wt(d,"markerAdded",d,o)}return o}var Mi=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Mi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();wt(this,"clear")}},Mi.prototype.find=function(e,t){return this.primary.find(e,t)},Cr(Mi);function Nu(e,t,n,r,i){r=Z(r),r.shared=!1;var o=[jn(e,t,n,r,i)],u=o[0],c=r.widgetNode;return _r(e,function(d){c&&(r.widgetNode=c.cloneNode(!0)),o.push(jn(d,Le(d,t),Le(d,n),r,i));for(var g=0;g<d.linked.length;++g)if(d.linked[g].isParent)return;u=_e(o)}),new Mi(o,u)}function Ul(e){return e.findMarks(he(e.first,0),e.clipPos(he(e.lastLine())),function(t){return t.parent})}function Bu(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),u=e.clipPos(i.to);if(Be(o,u)){var c=jn(e,o,u,r.primary,r.primary.type);r.markers.push(c),c.parent=r}}}function Fu(e){for(var t=function(r){var i=e[r],o=[i.primary.doc];_r(i.primary.doc,function(d){return o.push(d)});for(var u=0;u<i.markers.length;u++){var c=i.markers[u];me(o,c.doc)==-1&&(c.parent=null,i.markers.splice(u--,1))}},n=0;n<e.length;n++)t(n)}var Hu=0,jt=function(e,t,n,r,i){if(!(this instanceof jt))return new jt(e,t,n,r,i);n==null&&(n=0),Li.call(this,[new wi([new be("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=he(n,0);this.sel=zr(o),this.history=new la(null),this.id=++Hu,this.modeOption=t,this.lineSep=r,this.direction=i=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),so(this,{from:o,to:o,text:e}),It(this,zr(o),rt)};jt.prototype=Vn(Li.prototype,{constructor:jt,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=wn(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Tt(function(e){var t=he(this.first,0),n=this.first+this.size-1;_n(this,{from:t,to:he(n,Oe(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&vi(this.cm,0,0),It(this,zr(t),rt)}),replaceRange:function(e,t,n,r){t=Le(this,t),n=n?Le(this,n):t,Un(this,e,t,n,r)},getRange:function(e,t,n){var r=kr(this,Le(this,e),Le(this,t));return n===!1?r:n===""?r.join(""):r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Nr(this,e))return Oe(this,e)},getLineNumber:function(e){return Ze(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Oe(this,e)),p(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Le(this,e)},getCursor:function(e){var t=this.sel.primary(),n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e=="to"||e===!1?n=t.to():n=t.from(),n},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Tt(function(e,t,n){Al(this,Le(this,typeof e=="number"?he(e,t||0):e),null,n)}),setSelection:Tt(function(e,t,n){Al(this,Le(this,e),Le(this,t||e),n)}),extendSelection:Tt(function(e,t,n){ua(this,Le(this,e),t&&Le(this,t),n)}),extendSelections:Tt(function(e,t){Ml(this,Vr(this,e),t)}),extendSelectionsBy:Tt(function(e,t){var n=Yt(this.sel.ranges,e);Ml(this,Vr(this,n),t)}),setSelections:Tt(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new Ve(Le(this,e[i].anchor),Le(this,e[i].head||e[i].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),It(this,fr(this.cm,r,t),n)}}),addSelection:Tt(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new Ve(Le(this,e),Le(this,t||e))),It(this,fr(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var t=this.sel.ranges,n,r=0;r<t.length;r++){var i=kr(this,t[r].from(),t[r].to());n=n?n.concat(i):i}return e===!1?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=kr(this,n[r].from(),n[r].to());e!==!1&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Tt(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var u=i.ranges[o];r[o]={from:u.from(),to:u.to(),text:this.splitLines(e[o]),origin:n}}for(var c=t&&t!="end"&&Lu(this,r,t),d=r.length-1;d>=0;d--)_n(this,r[d]);c?Ol(this,c):this.cm&&Hn(this.cm)}),undo:Tt(function(){ha(this,"undo")}),redo:Tt(function(){ha(this,"redo")}),undoSelection:Tt(function(){ha(this,"undo",!0)}),redoSelection:Tt(function(){ha(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new la(this.history),_r(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:zn(this.history.done),undone:zn(this.history.undone)}},setHistory:function(e){var t=this.history=new la(this.history);t.done=zn(e.done.slice(0),null,!0),t.undone=zn(e.undone.slice(0),null,!0)},setGutterMarker:Tt(function(e,t,n){return ki(this,e,"gutter",function(r){var i=r.gutterMarkers||(r.gutterMarkers={});return i[t]=n,!n&&Dt(i)&&(r.gutterMarkers=null),!0})}),clearGutter:Tt(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&ki(t,n,"gutter",function(){return n.gutterMarkers[e]=null,Dt(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!Nr(this,e)||(t=e,e=Oe(this,e),!e))return null}else if(t=Ze(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Tt(function(e,t,n){return ki(this,e,t=="gutter"?"gutter":"class",function(r){var i=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!r[i])r[i]=n;else{if(le(n).test(r[i]))return!1;r[i]+=" "+n}return!0})}),removeLineClass:Tt(function(e,t,n){return ki(this,e,t=="gutter"?"gutter":"class",function(r){var i=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",o=r[i];if(o)if(n==null)r[i]=null;else{var u=o.match(le(n));if(!u)return!1;var c=u.index+u[0].length;r[i]=o.slice(0,u.index)+(!u.index||c==o.length?"":" ")+o.slice(c)||null}else return!1;return!0})}),addLineWidget:Tt(function(e,t,n){return Du(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return jn(this,Le(this,e),Le(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=Le(this,e),jn(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Le(this,e);var t=[],n=Oe(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=Le(this,e),t=Le(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var u=o.markedSpans;if(u)for(var c=0;c<u.length;c++){var d=u[c];!(d.to!=null&&i==e.line&&e.ch>=d.to||d.from==null&&i!=e.line||d.from!=null&&i==t.line&&d.from>=t.ch)&&(!n||n(d.marker))&&r.push(d.marker.parent||d.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)n[r].from!=null&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n}),Le(this,he(n,t))},indexFromPos:function(e){e=Le(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+n}),t},copy:function(e){var t=new jt(wn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<n&&(n=e.to);var r=new jt(wn(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Bu(r,Ul(this)),r},unlinkDoc:function(e){if(e instanceof lt&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Fu(Ul(this));break}}if(e.history==this.history){var r=[e.id];_r(e,function(i){return r.push(i.id)},!0),e.history=new la(null),e.history.done=zn(this.history.done,r),e.history.undone=zn(this.history.undone,r)}},iterLinkedDocs:function(e){_r(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ir(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Tt(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&Tu(this.cm))})}),jt.prototype.eachLine=jt.prototype.iter;var jl=0;function Wu(e){var t=this;if(Gl(t),!(vt(t,e)||Lr(t.display,e))){Et(e),I&&(jl=+new Date);var n=ln(t,e,!0),r=e.dataTransfer.files;if(!(!n||t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),u=0,c=function(){++u==i&&Lt(t,function(){n=Le(t.doc,n);var F={from:n,to:n,text:t.doc.splitLines(o.filter(function(ee){return ee!=null}).join(t.doc.lineSeparator())),origin:"paste"};_n(t.doc,F),Ol(t.doc,zr(Le(t.doc,n),Le(t.doc,Kr(F))))})()},d=function(F,ee){if(t.options.allowDropFileTypes&&me(t.options.allowDropFileTypes,F.type)==-1){c();return}var oe=new FileReader;oe.onerror=function(){return c()},oe.onload=function(){var ve=oe.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(ve)){c();return}o[ee]=ve,c()},oe.readAsText(F)},g=0;g<r.length;g++)d(r[g],g);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var b=e.dataTransfer.getData("Text");if(b){var L;if(t.state.draggingText&&!t.state.draggingText.copy&&(L=t.listSelections()),fa(t.doc,zr(n,n)),L)for(var K=0;K<L.length;++K)Un(t.doc,"",L[K].anchor,L[K].head,"drag");t.replaceSelection(b,"around","paste"),t.display.input.focus()}}catch{}}}}function zu(e,t){if(I&&(!e.state.draggingText||+new Date-jl<100)){Jr(t);return}if(!(vt(e,t)||Lr(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!ae)){var n=fe("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",j&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),j&&n.parentNode.removeChild(n)}}function Ku(e,t){var n=ln(e,t);if(n){var r=document.createDocumentFragment();Ja(e,n,r),e.display.dragCursor||(e.display.dragCursor=fe("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),Ae(e.display.dragCursor,r)}}function Gl(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ql(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var o=0;o<n.length;o++)e(n[o])})}}var Xl=!1;function _u(){Xl||(Uu(),Xl=!0)}function Uu(){var e;Ee(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,ql(ju)},100))}),Ee(window,"blur",function(){return ql(Fn)})}function ju(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var jr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ai=0;Ai<10;Ai++)jr[Ai+48]=jr[Ai+96]=String(Ai);for(var da=65;da<=90;da++)jr[da]=String.fromCharCode(da);for(var Oi=1;Oi<=12;Oi++)jr[Oi+111]=jr[Oi+63235]="F"+Oi;var Mr={};Mr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Mr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Mr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Mr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Mr.default=y?Mr.macDefault:Mr.pcDefault;function Gu(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,r,i,o,u=0;u<t.length-1;u++){var c=t[u];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))i=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(e="Alt-"+e),r&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function qu(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if(r=="..."){delete e[n];continue}for(var i=Yt(n.split(" "),Gu),o=0;o<i.length;o++){var u=void 0,c=void 0;o==i.length-1?(c=i.join(" "),u=r):(c=i.slice(0,o+1).join(" "),u="...");var d=t[c];if(!d)t[c]=u;else if(d!=u)throw new Error("Inconsistent bindings for "+c)}delete e[n]}for(var g in t)e[g]=t[g];return e}function Gn(e,t,n,r){t=pa(t);var i=t.call?t.call(e,r):t[e];if(i===!1)return"nothing";if(i==="...")return"multi";if(i!=null&&n(i))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return Gn(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var u=Gn(e,t.fallthrough[o],n,r);if(u)return u}}}function Yl(e){var t=typeof e=="string"?e:jr[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function Jl(e,t,n){var r=e;return t.altKey&&r!="Alt"&&(e="Alt-"+e),(Q?t.metaKey:t.ctrlKey)&&r!="Ctrl"&&(e="Ctrl-"+e),(Q?t.ctrlKey:t.metaKey)&&r!="Mod"&&(e="Cmd-"+e),!n&&t.shiftKey&&r!="Shift"&&(e="Shift-"+e),e}function Ql(e,t){if(j&&e.keyCode==34&&e.char)return!1;var n=jr[e.keyCode];return n==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(n=e.code),Jl(n,e,t))}function pa(e){return typeof e=="string"?Mr[e]:e}function qn(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&Be(o.from,_e(r).to)<=0;){var u=r.pop();if(Be(u.from,o.from)<0){o.from=u.from;break}}r.push(o)}Zt(e,function(){for(var c=r.length-1;c>=0;c--)Un(e.doc,"",r[c].from,r[c].to,"+delete");Hn(e)})}function ho(e,t,n){var r=zi(e.text,t+n,n);return r<0||r>e.text.length?null:r}function po(e,t,n){var r=ho(e,t.ch,n);return r==null?null:new he(t.line,r,n<0?"after":"before")}function vo(e,t,n,r,i){if(e){t.doc.direction=="rtl"&&(i=-i);var o=Qe(n,t.doc.direction);if(o){var u=i<0?_e(o):o[0],c=i<0==(u.level==1),d=c?"after":"before",g;if(u.level>0||t.doc.direction=="rtl"){var b=Dn(t,n);g=i<0?n.text.length-1:0;var L=xr(t,b,g).top;g=Yr(function(K){return xr(t,b,K).top==L},i<0==(u.level==1)?u.from:u.to-1,g),d=="before"&&(g=ho(n,g,1))}else g=i<0?u.to:u.from;return new he(r,g,d)}}return new he(r,i<0?n.text.length:0,i<0?"before":"after")}function Xu(e,t,n,r){var i=Qe(t,e.doc.direction);if(!i)return po(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=$e(i,n.ch,n.sticky),u=i[o];if(e.doc.direction=="ltr"&&u.level%2==0&&(r>0?u.to>n.ch:u.from<n.ch))return po(t,n,r);var c=function(Ce,ke){return ho(t,Ce instanceof he?Ce.ch:Ce,ke)},d,g=function(Ce){return e.options.lineWrapping?(d=d||Dn(e,t),tl(e,t,d,Ce)):{begin:0,end:t.text.length}},b=g(n.sticky=="before"?c(n,-1):n.ch);if(e.doc.direction=="rtl"||u.level==1){var L=u.level==1==r<0,K=c(n,L?1:-1);if(K!=null&&(L?K<=u.to&&K<=b.end:K>=u.from&&K>=b.begin)){var F=L?"before":"after";return new he(n.line,K,F)}}var ee=function(Ce,ke,Se){for(var Te=function(at,Mt){return Mt?new he(n.line,c(at,1),"before"):new he(n.line,at,"after")};Ce>=0&&Ce<i.length;Ce+=ke){var Pe=i[Ce],Ie=ke>0==(Pe.level!=1),Ke=Ie?Se.begin:c(Se.end,-1);if(Pe.from<=Ke&&Ke<Pe.to||(Ke=Ie?Pe.from:c(Pe.to,-1),Se.begin<=Ke&&Ke<Se.end))return Te(Ke,Ie)}},oe=ee(o+r,r,b);if(oe)return oe;var ve=r>0?b.end:c(b.begin,-1);return ve!=null&&!(r>0&&ve==t.text.length)&&(oe=ee(r>0?0:i.length-1,r,g(ve)),oe)?oe:null}var Ri={selectAll:Dl,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),rt)},killLine:function(e){return qn(e,function(t){if(t.empty()){var n=Oe(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:he(t.head.line+1,0)}:{from:t.head,to:he(t.head.line,n)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return qn(e,function(t){return{from:he(t.from().line,0),to:Le(e.doc,he(t.to().line+1,0))}})},delLineLeft:function(e){return qn(e,function(t){return{from:he(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return qn(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return qn(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(he(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(he(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Zl(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Vl(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return Yu(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},dt)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},dt)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Vl(e,t.head):r},dt)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),u=Y(e.getLine(o.line),o.ch,r);t.push(Xr(r-u%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Zt(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=Oe(e.doc,i.line).text;if(o){if(i.ch==o.length&&(i=new he(i.line,i.ch-1)),i.ch>0)i=new he(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),he(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var u=Oe(e.doc,i.line-1).text;u&&(i=new he(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+u.charAt(u.length-1),he(i.line-1,u.length-1),i,"+transpose"))}}n.push(new Ve(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Zt(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Hn(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Zl(e,t){var n=Oe(e.doc,t),r=p(n);return r!=n&&(t=Ze(r)),vo(!0,e,r,t,1)}function Yu(e,t){var n=Oe(e.doc,t),r=m(n);return r!=n&&(t=Ze(r)),vo(!0,e,n,t,-1)}function Vl(e,t){var n=Zl(e,t.line),r=Oe(e.doc,n.line),i=Qe(r,e.doc.direction);if(!i||i[0].level==0){var o=Math.max(n.ch,r.text.search(/\S/)),u=t.line==n.line&&t.ch<=o&&t.ch;return he(n.line,u?0:o,n.sticky)}return n}function va(e,t,n){if(typeof t=="string"&&(t=Ri[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=Ge}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function Ju(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Gn(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Gn(t,e.options.extraKeys,n,e)||Gn(t,e.options.keyMap,n,e)}var Qu=new U;function Ei(e,t,n,r){var i=e.state.keySeq;if(i){if(Yl(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Qu.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),$l(e,i+" "+t,n,r))return!0}return $l(e,t,n,r)}function $l(e,t,n,r){var i=Ju(e,t,r);return i=="multi"&&(e.state.keySeq=t),i=="handled"&&wt(e,"keyHandled",e,t,n),(i=="handled"||i=="multi")&&(Et(n),Qa(e)),!!i}function es(e,t){var n=Ql(t,!0);return n?t.shiftKey&&!e.state.keySeq?Ei(e,"Shift-"+n,t,function(r){return va(e,r,!0)})||Ei(e,n,t,function(r){if(typeof r=="string"?/^go[A-Z]/.test(r):r.motion)return va(e,r)}):Ei(e,n,t,function(r){return va(e,r)}):!1}function Zu(e,t,n){return Ei(e,"'"+n+"'",t,function(r){return va(e,r,!0)})}var go=null;function ts(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=ye(qe(t)),!vt(t,e))){I&&X<11&&e.keyCode==27&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=n==16||e.shiftKey;var r=es(t,e);j&&(go=r?n:null,!r&&n==88&&!Ui&&(y?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),z&&!y&&!r&&n==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),n==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Vu(t)}}function Vu(e){var t=e.display.lineDiv;De(t,"CodeMirror-crosshair");function n(r){(r.keyCode==18||!r.altKey)&&(xe(t,"CodeMirror-crosshair"),Je(document,"keyup",n),Je(document,"mouseover",n))}Ee(document,"keyup",n),Ee(document,"mouseover",n)}function rs(e){e.keyCode==16&&(this.doc.sel.shift=!1),vt(this,e)}function ns(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(Lr(t.display,e)||vt(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(j&&n==go){go=null,Et(e);return}if(!(j&&(!e.which||e.which<10)&&es(t,e))){var i=String.fromCharCode(r??n);i!="\b"&&(Zu(t,e,i)||t.display.input.onKeyPress(e))}}}var $u=400,yo=function(e,t,n){this.time=e,this.pos=t,this.button=n};yo.prototype.compare=function(e,t,n){return this.time+$u>e&&Be(t,this.pos)==0&&n==this.button};var Ii,Pi;function ef(e,t){var n=+new Date;return Pi&&Pi.compare(n,e,t)?(Ii=Pi=null,"triple"):Ii&&Ii.compare(n,e,t)?(Pi=new yo(n,e,t),Ii=null,"double"):(Ii=new yo(n,e,t),Pi=null,"single")}function is(e){var t=this,n=t.display;if(!(vt(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,Lr(n,e)){_||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));return}if(!mo(t,e)){var r=ln(t,e),i=bn(e),o=r?ef(r,i):"single";ie(t).focus(),i==1&&t.state.selectingText&&t.state.selectingText(e),!(r&&tf(t,i,r,o,e))&&(i==1?r?nf(t,r,o,e):yr(e)==n.scroller&&Et(e):i==2?(r&&ua(t.doc,r),setTimeout(function(){return n.input.focus()},20)):i==3&&(ce?t.display.input.onContextMenu(e):Za(t)))}}}function tf(e,t,n,r,i){var o="Click";return r=="double"?o="Double"+o:r=="triple"&&(o="Triple"+o),o=(t==1?"Left":t==2?"Middle":"Right")+o,Ei(e,Jl(o,i),i,function(u){if(typeof u=="string"&&(u=Ri[u]),!u)return!1;var c=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),c=u(e,n)!=Ge}finally{e.state.suppressEdits=!1}return c})}function rf(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(i.unit==null){var o=k?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(i.extend==null||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),i.addNew==null&&(i.addNew=y?n.metaKey:n.ctrlKey),i.moveOnDrag==null&&(i.moveOnDrag=!(y?n.altKey:n.ctrlKey)),i}function nf(e,t,n,r){I?setTimeout(pe(al,e),0):e.curOp.focus=ye(qe(e));var i=rf(e,n,r),o=e.doc.sel,u;e.options.dragDrop&&Aa&&!e.isReadOnly()&&n=="single"&&(u=o.contains(t))>-1&&(Be((u=o.ranges[u]).from(),t)<0||t.xRel>0)&&(Be(u.to(),t)>0||t.xRel<0)?af(e,r,t,i):of(e,r,t,i)}function af(e,t,n,r){var i=e.display,o=!1,u=Lt(e,function(g){_&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Za(e)),Je(i.wrapper.ownerDocument,"mouseup",u),Je(i.wrapper.ownerDocument,"mousemove",c),Je(i.scroller,"dragstart",d),Je(i.scroller,"drop",u),o||(Et(g),r.addNew||ua(e.doc,n,null,null,r.extend),_&&!ae||I&&X==9?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),c=function(g){o=o||Math.abs(t.clientX-g.clientX)+Math.abs(t.clientY-g.clientY)>=10},d=function(){return o=!0};_&&(i.scroller.draggable=!0),e.state.draggingText=u,u.copy=!r.moveOnDrag,Ee(i.wrapper.ownerDocument,"mouseup",u),Ee(i.wrapper.ownerDocument,"mousemove",c),Ee(i.scroller,"dragstart",d),Ee(i.scroller,"drop",u),e.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()}function as(e,t,n){if(n=="char")return new Ve(t,t);if(n=="word")return e.findWordAt(t);if(n=="line")return new Ve(he(t.line,0),Le(e.doc,he(t.line+1,0)));var r=n(e,t);return new Ve(r.from,r.to)}function of(e,t,n,r){I&&Za(e);var i=e.display,o=e.doc;Et(t);var u,c,d=o.sel,g=d.ranges;if(r.addNew&&!r.extend?(c=o.sel.contains(n),c>-1?u=g[c]:u=new Ve(n,n)):(u=o.sel.primary(),c=o.sel.primIndex),r.unit=="rectangle")r.addNew||(u=new Ve(n,n)),n=ln(e,t,!0,!0),c=-1;else{var b=as(e,n,r.unit);r.extend?u=fo(u,b.anchor,b.head,r.extend):u=b}r.addNew?c==-1?(c=g.length,It(o,fr(e,g.concat([u]),c),{scroll:!1,origin:"*mouse"})):g.length>1&&g[c].empty()&&r.unit=="char"&&!r.extend?(It(o,fr(e,g.slice(0,c).concat(g.slice(c+1)),0),{scroll:!1,origin:"*mouse"}),d=o.sel):co(o,c,u,it):(c=0,It(o,new er([u],0),it),d=o.sel);var L=n;function K(Se){if(Be(L,Se)!=0)if(L=Se,r.unit=="rectangle"){for(var Te=[],Pe=e.options.tabSize,Ie=Y(Oe(o,n.line).text,n.ch,Pe),Ke=Y(Oe(o,Se.line).text,Se.ch,Pe),at=Math.min(Ie,Ke),Mt=Math.max(Ie,Ke),ut=Math.min(n.line,Se.line),Vt=Math.min(e.lastLine(),Math.max(n.line,Se.line));ut<=Vt;ut++){var Gt=Oe(o,ut).text,mt=gr(Gt,at,Pe);at==Mt?Te.push(new Ve(he(ut,mt),he(ut,mt))):Gt.length>mt&&Te.push(new Ve(he(ut,mt),he(ut,gr(Gt,Mt,Pe))))}Te.length||Te.push(new Ve(n,n)),It(o,fr(e,d.ranges.slice(0,c).concat(Te),c),{origin:"*mouse",scroll:!1}),e.scrollIntoView(Se)}else{var qt=u,Ot=as(e,Se,r.unit),St=qt.anchor,xt;Be(Ot.anchor,St)>0?(xt=Ot.head,St=An(qt.from(),Ot.anchor)):(xt=Ot.anchor,St=Mn(qt.to(),Ot.head));var ct=d.ranges.slice(0);ct[c]=lf(e,new Ve(Le(o,St),xt)),It(o,fr(e,ct,c),it)}}var F=i.wrapper.getBoundingClientRect(),ee=0;function oe(Se){var Te=++ee,Pe=ln(e,Se,!0,r.unit=="rectangle");if(Pe)if(Be(Pe,L)!=0){e.curOp.focus=ye(qe(e)),K(Pe);var Ie=na(i,o);(Pe.line>=Ie.to||Pe.line<Ie.from)&&setTimeout(Lt(e,function(){ee==Te&&oe(Se)}),150)}else{var Ke=Se.clientY<F.top?-20:Se.clientY>F.bottom?20:0;Ke&&setTimeout(Lt(e,function(){ee==Te&&(i.scroller.scrollTop+=Ke,oe(Se))}),50)}}function ve(Se){e.state.selectingText=!1,ee=1/0,Se&&(Et(Se),i.input.focus()),Je(i.wrapper.ownerDocument,"mousemove",Ce),Je(i.wrapper.ownerDocument,"mouseup",ke),o.history.lastSelOrigin=null}var Ce=Lt(e,function(Se){Se.buttons===0||!bn(Se)?ve(Se):oe(Se)}),ke=Lt(e,ve);e.state.selectingText=ke,Ee(i.wrapper.ownerDocument,"mousemove",Ce),Ee(i.wrapper.ownerDocument,"mouseup",ke)}function lf(e,t){var n=t.anchor,r=t.head,i=Oe(e.doc,n.line);if(Be(n,r)==0&&n.sticky==r.sticky)return t;var o=Qe(i);if(!o)return t;var u=$e(o,n.ch,n.sticky),c=o[u];if(c.from!=n.ch&&c.to!=n.ch)return t;var d=u+(c.from==n.ch==(c.level!=1)?0:1);if(d==0||d==o.length)return t;var g;if(r.line!=n.line)g=(r.line-n.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var b=$e(o,r.ch,r.sticky),L=b-u||(r.ch-n.ch)*(c.level==1?-1:1);b==d-1||b==d?g=L<0:g=L>0}var K=o[d+(g?-1:0)],F=g==(K.level==1),ee=F?K.from:K.to,oe=F?"after":"before";return n.ch==ee&&n.sticky==oe?t:new Ve(new he(n.line,ee,oe),r)}function os(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch{return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Et(t);var u=e.display,c=u.lineDiv.getBoundingClientRect();if(o>c.bottom||!_t(e,n))return xn(t);o-=c.top-u.viewOffset;for(var d=0;d<e.display.gutterSpecs.length;++d){var g=u.gutters.childNodes[d];if(g&&g.getBoundingClientRect().right>=i){var b=wr(e.doc,o),L=e.display.gutterSpecs[d];return ot(e,n,e,b,L.className,t),xn(t)}}}function mo(e,t){return os(e,t,"gutterClick",!0)}function ls(e,t){Lr(e.display,t)||sf(e,t)||vt(e,t,"contextmenu")||ce||e.display.input.onContextMenu(t)}function sf(e,t){return _t(e,"gutterContextMenu")?os(e,t,"gutterContextMenu",!1):!1}function ss(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),di(e)}var Xn={toString:function(){return"CodeMirror.Init"}},us={},ga={};function uf(e){var t=e.optionHandlers;function n(r,i,o,u){e.defaults[r]=i,o&&(t[r]=u?function(c,d,g){g!=Xn&&o(c,d,g)}:o)}e.defineOption=n,e.Init=Xn,n("value","",function(r,i){return r.setValue(i)},!0),n("mode",null,function(r,i){r.doc.modeOption=i,lo(r)},!0),n("indentUnit",2,lo,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(r){Ci(r),di(r),Ut(r)},!0),n("lineSeparator",null,function(r,i){if(r.doc.lineSep=i,!!i){var o=[],u=r.doc.first;r.doc.iter(function(d){for(var g=0;;){var b=d.text.indexOf(i,g);if(b==-1)break;g=b+i.length,o.push(he(u,b))}u++});for(var c=o.length-1;c>=0;c--)Un(r.doc,i,o[c],he(o[c].line,o[c].ch+i.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(r,i,o){r.state.specialChars=new RegExp(i.source+(i.test("	")?"":"|	"),"g"),o!=Xn&&r.refresh()}),n("specialCharPlaceholder",st,function(r){return r.refresh()},!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(r,i){return r.getInputField().spellcheck=i},!0),n("autocorrect",!1,function(r,i){return r.getInputField().autocorrect=i},!0),n("autocapitalize",!1,function(r,i){return r.getInputField().autocapitalize=i},!0),n("rtlMoveVisually",!M),n("wholeLineUpdateBefore",!0),n("theme","default",function(r){ss(r),bi(r)},!0),n("keyMap","default",function(r,i,o){var u=pa(i),c=o!=Xn&&pa(o);c&&c.detach&&c.detach(r,u),u.attach&&u.attach(r,c||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,cf,!0),n("gutters",[],function(r,i){r.display.gutterSpecs=ao(i,r.options.lineNumbers),bi(r)},!0),n("fixedGutter",!0,function(r,i){r.display.gutters.style.left=i?Xa(r.display)+"px":"0",r.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(r){return Wn(r)},!0),n("scrollbarStyle","native",function(r){cl(r),Wn(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),n("lineNumbers",!1,function(r,i){r.display.gutterSpecs=ao(r.options.gutters,i),bi(r)},!0),n("firstLineNumber",1,bi,!0),n("lineNumberFormatter",function(r){return r},bi,!0),n("showCursorWhenSelecting",!1,pi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(r,i){i=="nocursor"&&(Fn(r),r.display.input.blur()),r.display.input.readOnlyChanged(i)}),n("screenReaderLabel",null,function(r,i){i=i===""?null:i,r.display.input.screenReaderLabelChanged(i)}),n("disableInput",!1,function(r,i){i||r.display.input.reset()},!0),n("dragDrop",!0,ff),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,pi,!0),n("singleCursorHeightPerLine",!0,pi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ci,!0),n("addModeClass",!1,Ci,!0),n("pollInterval",100),n("undoDepth",200,function(r,i){return r.doc.history.undoDepth=i}),n("historyEventDelay",1250),n("viewportMargin",10,function(r){return r.refresh()},!0),n("maxHighlightLength",1e4,Ci,!0),n("moveInputWithCursor",!0,function(r,i){i||r.display.input.resetPosition()}),n("tabindex",null,function(r,i){return r.display.input.getField().tabIndex=i||""}),n("autofocus",null),n("direction","ltr",function(r,i){return r.doc.setDirection(i)},!0),n("phrases",null)}function ff(e,t,n){var r=n&&n!=Xn;if(!t!=!r){var i=e.display.dragFunctions,o=t?Ee:Je;o(e.display.scroller,"dragstart",i.start),o(e.display.scroller,"dragenter",i.enter),o(e.display.scroller,"dragover",i.over),o(e.display.scroller,"dragleave",i.leave),o(e.display.scroller,"drop",i.drop)}}function cf(e){e.options.lineWrapping?(De(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(xe(e.display.wrapper,"CodeMirror-wrap"),V(e)),Ya(e),Ut(e),di(e),setTimeout(function(){return Wn(e)},100)}function lt(e,t){var n=this;if(!(this instanceof lt))return new lt(e,t);this.options=t=t?Z(t):{},Z(us,t,!1);var r=t.value;typeof r=="string"?r=new jt(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new lt.inputStyles[t.inputStyle](this),o=this.display=new ku(e,r,i,t);o.wrapper.CodeMirror=this,ss(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),cl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new U,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),I&&X<11&&setTimeout(function(){return n.display.input.reset(!0)},20),hf(this),_u(),cn(this),this.curOp.forceUpdate=!0,Cl(this,r),t.autofocus&&!v||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&Va(n)},20):Fn(this);for(var u in ga)ga.hasOwnProperty(u)&&ga[u](this,t[u],Xn);pl(this),t.finishInit&&t.finishInit(this);for(var c=0;c<xo.length;++c)xo[c](this);hn(this),_&&t.lineWrapping&&getComputedStyle(o.lineDiv).textRendering=="optimizelegibility"&&(o.lineDiv.style.textRendering="auto")}lt.defaults=us,lt.optionHandlers=ga;function hf(e){var t=e.display;Ee(t.scroller,"mousedown",Lt(e,is)),I&&X<11?Ee(t.scroller,"dblclick",Lt(e,function(d){if(!vt(e,d)){var g=ln(e,d);if(!(!g||mo(e,d)||Lr(e.display,d))){Et(d);var b=e.findWordAt(g);ua(e.doc,b.anchor,b.head)}}})):Ee(t.scroller,"dblclick",function(d){return vt(e,d)||Et(d)}),Ee(t.scroller,"contextmenu",function(d){return ls(e,d)}),Ee(t.input.getField(),"contextmenu",function(d){t.scroller.contains(d.target)||ls(e,d)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),r=t.activeTouch,r.end=+new Date)}function o(d){if(d.touches.length!=1)return!1;var g=d.touches[0];return g.radiusX<=1&&g.radiusY<=1}function u(d,g){if(g.left==null)return!0;var b=g.left-d.left,L=g.top-d.top;return b*b+L*L>20*20}Ee(t.scroller,"touchstart",function(d){if(!vt(e,d)&&!o(d)&&!mo(e,d)){t.input.ensurePolled(),clearTimeout(n);var g=+new Date;t.activeTouch={start:g,moved:!1,prev:g-r.end<=300?r:null},d.touches.length==1&&(t.activeTouch.left=d.touches[0].pageX,t.activeTouch.top=d.touches[0].pageY)}}),Ee(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),Ee(t.scroller,"touchend",function(d){var g=t.activeTouch;if(g&&!Lr(t,d)&&g.left!=null&&!g.moved&&new Date-g.start<300){var b=e.coordsChar(t.activeTouch,"page"),L;!g.prev||u(g,g.prev)?L=new Ve(b,b):!g.prev.prev||u(g,g.prev.prev)?L=e.findWordAt(b):L=new Ve(he(b.line,0),Le(e.doc,he(b.line+1,0))),e.setSelection(L.anchor,L.head),e.focus(),Et(d)}i()}),Ee(t.scroller,"touchcancel",i),Ee(t.scroller,"scroll",function(){t.scroller.clientHeight&&(gi(e,t.scroller.scrollTop),un(e,t.scroller.scrollLeft,!0),ot(e,"scroll",e))}),Ee(t.scroller,"mousewheel",function(d){return yl(e,d)}),Ee(t.scroller,"DOMMouseScroll",function(d){return yl(e,d)}),Ee(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(d){vt(e,d)||Jr(d)},over:function(d){vt(e,d)||(Ku(e,d),Jr(d))},start:function(d){return zu(e,d)},drop:Lt(e,Wu),leave:function(d){vt(e,d)||Gl(e)}};var c=t.input.getField();Ee(c,"keyup",function(d){return rs.call(e,d)}),Ee(c,"keydown",Lt(e,ts)),Ee(c,"keypress",Lt(e,ns)),Ee(c,"focus",function(d){return Va(e,d)}),Ee(c,"blur",function(d){return Fn(e,d)})}var xo=[];lt.defineInitHook=function(e){return xo.push(e)};function Di(e,t,n,r){var i=e.doc,o;n==null&&(n="add"),n=="smart"&&(i.mode.indent?o=Br(e,t).state:n="prev");var u=e.options.tabSize,c=Oe(i,t),d=Y(c.text,null,u);c.stateAfter&&(c.stateAfter=null);var g=c.text.match(/^\s*/)[0],b;if(!r&&!/\S/.test(c.text))b=0,n="not";else if(n=="smart"&&(b=i.mode.indent(o,c.text.slice(g.length),c.text),b==Ge||b>150)){if(!r)return;n="prev"}n=="prev"?t>i.first?b=Y(Oe(i,t-1).text,null,u):b=0:n=="add"?b=d+e.options.indentUnit:n=="subtract"?b=d-e.options.indentUnit:typeof n=="number"&&(b=d+n),b=Math.max(0,b);var L="",K=0;if(e.options.indentWithTabs)for(var F=Math.floor(b/u);F;--F)K+=u,L+="	";if(K<b&&(L+=Xr(b-K)),L!=g)return Un(i,L,he(t,0),he(t,g.length),"+input"),c.stateAfter=null,!0;for(var ee=0;ee<i.sel.ranges.length;ee++){var oe=i.sel.ranges[ee];if(oe.head.line==t&&oe.head.ch<g.length){var ve=he(t,g.length);co(i,ee,new Ve(ve,ve));break}}}var cr=null;function ya(e){cr=e}function bo(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var u=+new Date-200,c=i=="paste"||e.state.pasteIncoming>u,d=Ir(t),g=null;if(c&&r.ranges.length>1)if(cr&&cr.text.join(`
`)==t){if(r.ranges.length%cr.text.length==0){g=[];for(var b=0;b<cr.text.length;b++)g.push(o.splitLines(cr.text[b]))}}else d.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(g=Yt(d,function(Ce){return[Ce]}));for(var L=e.curOp.updateInput,K=r.ranges.length-1;K>=0;K--){var F=r.ranges[K],ee=F.from(),oe=F.to();F.empty()&&(n&&n>0?ee=he(ee.line,ee.ch-n):e.state.overwrite&&!c?oe=he(oe.line,Math.min(Oe(o,oe.line).text.length,oe.ch+_e(d).length)):c&&cr&&cr.lineWise&&cr.text.join(`
`)==d.join(`
`)&&(ee=oe=he(ee.line,0)));var ve={from:ee,to:oe,text:g?g[K%g.length]:d,origin:i||(c?"paste":e.state.cutIncoming>u?"cut":"+input")};_n(e.doc,ve),wt(e,"inputRead",e,ve)}t&&!c&&cs(e,t),Hn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=L),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function fs(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&t.hasFocus()&&Zt(t,function(){return bo(t,n,0,null,"paste")}),!0}function cs(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),u=!1;if(o.electricChars){for(var c=0;c<o.electricChars.length;c++)if(t.indexOf(o.electricChars.charAt(c))>-1){u=Di(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Oe(e.doc,i.head.line).text.slice(0,i.head.ch))&&(u=Di(e,i.head.line,"smart"));u&&wt(e,"electricInput",e,i.head.line)}}}function hs(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:he(i,0),head:he(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Co(e,t,n,r){e.setAttribute("autocorrect",n?"on":"off"),e.setAttribute("autocapitalize",r?"on":"off"),e.setAttribute("spellcheck",!!t)}function ds(){var e=fe("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=fe("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return _?e.style.width="1000px":e.setAttribute("wrap","off"),S&&(e.style.border="1px solid black"),t}function df(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){ie(this).focus(),this.display.input.focus()},setOption:function(r,i){var o=this.options,u=o[r];o[r]==i&&r!="mode"||(o[r]=i,t.hasOwnProperty(r)&&Lt(this,t[r])(this,i,u),ot(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,i){this.state.keyMaps[i?"push":"unshift"](pa(r))},removeKeyMap:function(r){for(var i=this.state.keyMaps,o=0;o<i.length;++o)if(i[o]==r||i[o].name==r)return i.splice(o,1),!0},addOverlay:Ft(function(r,i){var o=r.token?r:e.getMode(this.options,r);if(o.startState)throw new Error("Overlays may not be stateful.");La(this.state.overlays,{mode:o,modeSpec:r,opaque:i&&i.opaque,priority:i&&i.priority||0},function(u){return u.priority}),this.state.modeGen++,Ut(this)}),removeOverlay:Ft(function(r){for(var i=this.state.overlays,o=0;o<i.length;++o){var u=i[o].modeSpec;if(u==r||typeof r=="string"&&u.name==r){i.splice(o,1),this.state.modeGen++,Ut(this);return}}}),indentLine:Ft(function(r,i,o){typeof i!="string"&&typeof i!="number"&&(i==null?i=this.options.smartIndent?"smart":"prev":i=i?"add":"subtract"),Nr(this.doc,r)&&Di(this,r,i,o)}),indentSelection:Ft(function(r){for(var i=this.doc.sel.ranges,o=-1,u=0;u<i.length;u++){var c=i[u];if(c.empty())c.head.line>o&&(Di(this,c.head.line,r,!0),o=c.head.line,u==this.doc.sel.primIndex&&Hn(this));else{var d=c.from(),g=c.to(),b=Math.max(o,d.line);o=Math.min(this.lastLine(),g.line-(g.ch?0:1))+1;for(var L=b;L<o;++L)Di(this,L,r);var K=this.doc.sel.ranges;d.ch==0&&i.length==K.length&&K[u].from().ch>0&&co(this.doc,u,new Ve(d,K[u].to()),rt)}}}),getTokenAt:function(r,i){return En(this,r,i)},getLineTokens:function(r,i){return En(this,he(r),i,!0)},getTokenTypeAt:function(r){r=Le(this.doc,r);var i=$r(this,Oe(this.doc,r.line)),o=0,u=(i.length-1)/2,c=r.ch,d;if(c==0)d=i[2];else for(;;){var g=o+u>>1;if((g?i[g*2-1]:0)>=c)u=g;else if(i[g*2+1]<c)o=g+1;else{d=i[g*2+2];break}}var b=d?d.indexOf("overlay "):-1;return b<0?d:b==0?null:d.slice(0,b-1)},getModeAt:function(r){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(r).state).mode:i},getHelper:function(r,i){return this.getHelpers(r,i)[0]},getHelpers:function(r,i){var o=[];if(!n.hasOwnProperty(i))return o;var u=n[i],c=this.getModeAt(r);if(typeof c[i]=="string")u[c[i]]&&o.push(u[c[i]]);else if(c[i])for(var d=0;d<c[i].length;d++){var g=u[c[i][d]];g&&o.push(g)}else c.helperType&&u[c.helperType]?o.push(u[c.helperType]):u[c.name]&&o.push(u[c.name]);for(var b=0;b<u._global.length;b++){var L=u._global[b];L.pred(c,this)&&me(o,L.val)==-1&&o.push(L.val)}return o},getStateAfter:function(r,i){var o=this.doc;return r=lr(o,r??o.first+o.size-1),Br(this,r+1,i).state},cursorCoords:function(r,i){var o,u=this.doc.sel.primary();return r==null?o=u.head:typeof r=="object"?o=Le(this.doc,r):o=r?u.from():u.to(),ur(this,o,i||"page")},charCoords:function(r,i){return $i(this,Le(this.doc,r),i||"page")},coordsChar:function(r,i){return r=Vo(this,r,i||"page"),ja(this,r.left,r.top)},lineAtHeight:function(r,i){return r=Vo(this,{top:r,left:0},i||"page").top,wr(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,i,o){var u=!1,c;if(typeof r=="number"){var d=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>d&&(r=d,u=!0),c=Oe(this.doc,r)}else c=r;return Vi(this,c,{top:0,left:0},i||"page",o||u).top+(u?this.doc.height-ne(c):0)},defaultTextHeight:function(){return Nn(this.display)},defaultCharWidth:function(){return Bn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,i,o,u,c){var d=this.display;r=ur(this,Le(this.doc,r));var g=r.bottom,b=r.left;if(i.style.position="absolute",i.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(i),d.sizer.appendChild(i),u=="over")g=r.top;else if(u=="above"||u=="near"){var L=Math.max(d.wrapper.clientHeight,this.doc.height),K=Math.max(d.sizer.clientWidth,d.lineSpace.clientWidth);(u=="above"||r.bottom+i.offsetHeight>L)&&r.top>i.offsetHeight?g=r.top-i.offsetHeight:r.bottom+i.offsetHeight<=L&&(g=r.bottom),b+i.offsetWidth>K&&(b=K-i.offsetWidth)}i.style.top=g+"px",i.style.left=i.style.right="",c=="right"?(b=d.sizer.clientWidth-i.offsetWidth,i.style.right="0px"):(c=="left"?b=0:c=="middle"&&(b=(d.sizer.clientWidth-i.offsetWidth)/2),i.style.left=b+"px"),o&&uu(this,{left:b,top:g,right:b+i.offsetWidth,bottom:g+i.offsetHeight})},triggerOnKeyDown:Ft(ts),triggerOnKeyPress:Ft(ns),triggerOnKeyUp:rs,triggerOnMouseDown:Ft(is),execCommand:function(r){if(Ri.hasOwnProperty(r))return Ri[r].call(null,this)},triggerElectric:Ft(function(r){cs(this,r)}),findPosH:function(r,i,o,u){var c=1;i<0&&(c=-1,i=-i);for(var d=Le(this.doc,r),g=0;g<i&&(d=So(this.doc,d,c,o,u),!d.hitSide);++g);return d},moveH:Ft(function(r,i){var o=this;this.extendSelectionsBy(function(u){return o.display.shift||o.doc.extend||u.empty()?So(o.doc,u.head,r,i,o.options.rtlMoveVisually):r<0?u.from():u.to()},dt)}),deleteH:Ft(function(r,i){var o=this.doc.sel,u=this.doc;o.somethingSelected()?u.replaceSelection("",null,"+delete"):qn(this,function(c){var d=So(u,c.head,r,i,!1);return r<0?{from:d,to:c.head}:{from:c.head,to:d}})}),findPosV:function(r,i,o,u){var c=1,d=u;i<0&&(c=-1,i=-i);for(var g=Le(this.doc,r),b=0;b<i;++b){var L=ur(this,g,"div");if(d==null?d=L.left:L.left=d,g=ps(this,L,c,o),g.hitSide)break}return g},moveV:Ft(function(r,i){var o=this,u=this.doc,c=[],d=!this.display.shift&&!u.extend&&u.sel.somethingSelected();if(u.extendSelectionsBy(function(b){if(d)return r<0?b.from():b.to();var L=ur(o,b.head,"div");b.goalColumn!=null&&(L.left=b.goalColumn),c.push(L.left);var K=ps(o,L,r,i);return i=="page"&&b==u.sel.primary()&&eo(o,$i(o,K,"div").top-L.top),K},dt),c.length)for(var g=0;g<u.sel.ranges.length;g++)u.sel.ranges[g].goalColumn=c[g]}),findWordAt:function(r){var i=this.doc,o=Oe(i,r.line).text,u=r.ch,c=r.ch;if(o){var d=this.getHelper(r,"wordChars");(r.sticky=="before"||c==o.length)&&u?--u:++c;for(var g=o.charAt(u),b=gn(g,d)?function(L){return gn(L,d)}:/\s/.test(g)?function(L){return/\s/.test(L)}:function(L){return!/\s/.test(L)&&!gn(L)};u>0&&b(o.charAt(u-1));)--u;for(;c<o.length&&b(o.charAt(c));)++c}return new Ve(he(r.line,u),he(r.line,c))},toggleOverwrite:function(r){r!=null&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?De(this.display.cursorDiv,"CodeMirror-overwrite"):xe(this.display.cursorDiv,"CodeMirror-overwrite"),ot(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ye(qe(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Ft(function(r,i){vi(this,r,i)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-mr(this)-this.display.barHeight,width:r.scrollWidth-mr(this)-this.display.barWidth,clientHeight:za(this),clientWidth:an(this)}},scrollIntoView:Ft(function(r,i){r==null?(r={from:this.doc.sel.primary().head,to:null},i==null&&(i=this.options.cursorScrollMargin)):typeof r=="number"?r={from:he(r,0),to:null}:r.from==null&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=i||0,r.from.line!=null?fu(this,r):ll(this,r.from,r.to,r.margin)}),setSize:Ft(function(r,i){var o=this,u=function(d){return typeof d=="number"||/^\d+$/.test(String(d))?d+"px":d};r!=null&&(this.display.wrapper.style.width=u(r)),i!=null&&(this.display.wrapper.style.height=u(i)),this.options.lineWrapping&&Jo(this);var c=this.display.viewFrom;this.doc.iter(c,this.display.viewTo,function(d){if(d.widgets){for(var g=0;g<d.widgets.length;g++)if(d.widgets[g].noHScroll){Hr(o,c,"widget");break}}++c}),this.curOp.forceUpdate=!0,ot(this,"refresh",this)}),operation:function(r){return Zt(this,r)},startOperation:function(){return cn(this)},endOperation:function(){return hn(this)},refresh:Ft(function(){var r=this.display.cachedTextHeight;Ut(this),this.curOp.forceUpdate=!0,di(this),vi(this,this.doc.scrollLeft,this.doc.scrollTop),no(this.display),(r==null||Math.abs(r-Nn(this.display))>.5||this.options.lineWrapping)&&Ya(this),ot(this,"refresh",this)}),swapDoc:Ft(function(r){var i=this.doc;return i.cm=null,this.state.selectingText&&this.state.selectingText(),Cl(this,r),di(this),this.display.input.reset(),vi(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,wt(this,"swapDoc",this,i),i}),phrase:function(r){var i=this.options.phrases;return i&&Object.prototype.hasOwnProperty.call(i,r)?i[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Cr(e),e.registerHelper=function(r,i,o){n.hasOwnProperty(r)||(n[r]=e[r]={_global:[]}),n[r][i]=o},e.registerGlobalHelper=function(r,i,o,u){e.registerHelper(r,i,u),n[r]._global.push({pred:o,val:u})}}function So(e,t,n,r,i){var o=t,u=n,c=Oe(e,t.line),d=i&&e.direction=="rtl"?-n:n;function g(){var ke=t.line+d;return ke<e.first||ke>=e.first+e.size?!1:(t=new he(ke,t.ch,t.sticky),c=Oe(e,ke))}function b(ke){var Se;if(r=="codepoint"){var Te=c.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(Te))Se=null;else{var Pe=n>0?Te>=55296&&Te<56320:Te>=56320&&Te<57343;Se=new he(t.line,Math.max(0,Math.min(c.text.length,t.ch+n*(Pe?2:1))),-n)}}else i?Se=Xu(e.cm,c,t,n):Se=po(c,t,n);if(Se==null)if(!ke&&g())t=vo(i,e.cm,c,t.line,d);else return!1;else t=Se;return!0}if(r=="char"||r=="codepoint")b();else if(r=="column")b(!0);else if(r=="word"||r=="group")for(var L=null,K=r=="group",F=e.cm&&e.cm.getHelper(t,"wordChars"),ee=!0;!(n<0&&!b(!ee));ee=!1){var oe=c.text.charAt(t.ch)||`
`,ve=gn(oe,F)?"w":K&&oe==`
`?"n":!K||/\s/.test(oe)?null:"p";if(K&&!ee&&!ve&&(ve="s"),L&&L!=ve){n<0&&(n=1,b(),t.sticky="after");break}if(ve&&(L=ve),n>0&&!b(!ee))break}var Ce=ca(e,t,o,u,!0);return ti(o,Ce)&&(Ce.hitSide=!0),Ce}function ps(e,t,n,r){var i=e.doc,o=t.left,u;if(r=="page"){var c=Math.min(e.display.wrapper.clientHeight,ie(e).innerHeight||i(e).documentElement.clientHeight),d=Math.max(c-.5*Nn(e.display),3);u=(n>0?t.bottom:t.top)+n*d}else r=="line"&&(u=n>0?t.bottom+3:t.top-3);for(var g;g=ja(e,o,u),!!g.outside;){if(n<0?u<=0:u>=i.height){g.hitSide=!0;break}u+=n*5}return g}var tt=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new U,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};tt.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;i.contentEditable=!0,Co(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize);function o(c){for(var d=c.target;d;d=d.parentNode){if(d==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(d.className))break}return!1}Ee(i,"paste",function(c){!o(c)||vt(r,c)||fs(c,r)||X<=11&&setTimeout(Lt(r,function(){return t.updateFromDOM()}),20)}),Ee(i,"compositionstart",function(c){t.composing={data:c.data,done:!1}}),Ee(i,"compositionupdate",function(c){t.composing||(t.composing={data:c.data,done:!1})}),Ee(i,"compositionend",function(c){t.composing&&(c.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),Ee(i,"touchstart",function(){return n.forceCompositionEnd()}),Ee(i,"input",function(){t.composing||t.readFromDOMSoon()});function u(c){if(!(!o(c)||vt(r,c))){if(r.somethingSelected())ya({lineWise:!1,text:r.getSelections()}),c.type=="cut"&&r.replaceSelection("",null,"cut");else if(r.options.lineWiseCopyCut){var d=hs(r);ya({lineWise:!0,text:d.text}),c.type=="cut"&&r.operation(function(){r.setSelections(d.ranges,0,rt),r.replaceSelection("",null,"cut")})}else return;if(c.clipboardData){c.clipboardData.clearData();var g=cr.text.join(`
`);if(c.clipboardData.setData("Text",g),c.clipboardData.getData("Text")==g){c.preventDefault();return}}var b=ds(),L=b.firstChild;Co(L),r.display.lineSpace.insertBefore(b,r.display.lineSpace.firstChild),L.value=cr.text.join(`
`);var K=ye(R(i));Re(L),setTimeout(function(){r.display.lineSpace.removeChild(b),K.focus(),K==i&&n.showPrimarySelection()},50)}}Ee(i,"copy",u),Ee(i,"cut",u)},tt.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},tt.prototype.prepareSelection=function(){var e=il(this.cm,!1);return e.focus=ye(R(this.div))==this.div,e},tt.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},tt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},tt.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||i.line<t.display.viewFrom){e.removeAllRanges();return}var o=ma(t,e.anchorNode,e.anchorOffset),u=ma(t,e.focusNode,e.focusOffset);if(!(o&&!o.bad&&u&&!u.bad&&Be(An(o,u),r)==0&&Be(Mn(o,u),i)==0)){var c=t.display.view,d=r.line>=t.display.viewFrom&&vs(t,r)||{node:c[0].measure.map[2],offset:0},g=i.line<t.display.viewTo&&vs(t,i);if(!g){var b=c[c.length-1].measure,L=b.maps?b.maps[b.maps.length-1]:b.map;g={node:L[L.length-1],offset:L[L.length-2]-L[L.length-3]}}if(!d||!g){e.removeAllRanges();return}var K=e.rangeCount&&e.getRangeAt(0),F;try{F=de(d.node,d.offset,g.offset,g.node)}catch{}F&&(!z&&t.state.focused?(e.collapse(d.node,d.offset),F.collapsed||(e.removeAllRanges(),e.addRange(F))):(e.removeAllRanges(),e.addRange(F)),K&&e.anchorNode==null?e.addRange(K):z&&this.startGracePeriod()),this.rememberSelection()}},tt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},tt.prototype.showMultipleSelections=function(e){Ae(this.cm.display.cursorDiv,e.cursors),Ae(this.cm.display.selectionDiv,e.selection)},tt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},tt.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Me(this.div,t)},tt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ye(R(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},tt.prototype.blur=function(){this.div.blur()},tt.prototype.getField=function(){return this.div},tt.prototype.supportsTouch=function(){return!0},tt.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Zt(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))}this.polling.set(this.cm.options.pollInterval,n)},tt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},tt.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(T&&H&&this.cm.display.gutterSpecs.length&&pf(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var n=ma(t,e.anchorNode,e.anchorOffset),r=ma(t,e.focusNode,e.focusOffset);n&&r&&Zt(t,function(){It(t.doc,zr(n,r),rt),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},tt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(r.ch==0&&r.line>e.firstLine()&&(r=he(r.line-1,Oe(e.doc,r.line-1).length)),i.ch==Oe(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=he(i.line+1,0)),r.line<t.viewFrom||i.line>t.viewTo-1)return!1;var o,u,c;r.line==t.viewFrom||(o=sn(e,r.line))==0?(u=Ze(t.view[0].line),c=t.view[0].node):(u=Ze(t.view[o].line),c=t.view[o-1].node.nextSibling);var d=sn(e,i.line),g,b;if(d==t.view.length-1?(g=t.viewTo-1,b=t.lineDiv.lastChild):(g=Ze(t.view[d+1].line)-1,b=t.view[d+1].node.previousSibling),!c)return!1;for(var L=e.doc.splitLines(vf(e,c,b,u,g)),K=kr(e.doc,he(u,0),he(g,Oe(e.doc,g).text.length));L.length>1&&K.length>1;)if(_e(L)==_e(K))L.pop(),K.pop(),g--;else if(L[0]==K[0])L.shift(),K.shift(),u++;else break;for(var F=0,ee=0,oe=L[0],ve=K[0],Ce=Math.min(oe.length,ve.length);F<Ce&&oe.charCodeAt(F)==ve.charCodeAt(F);)++F;for(var ke=_e(L),Se=_e(K),Te=Math.min(ke.length-(L.length==1?F:0),Se.length-(K.length==1?F:0));ee<Te&&ke.charCodeAt(ke.length-ee-1)==Se.charCodeAt(Se.length-ee-1);)++ee;if(L.length==1&&K.length==1&&u==r.line)for(;F&&F>r.ch&&ke.charCodeAt(ke.length-ee-1)==Se.charCodeAt(Se.length-ee-1);)F--,ee++;L[L.length-1]=ke.slice(0,ke.length-ee).replace(/^\u200b+/,""),L[0]=L[0].slice(F).replace(/\u200b+$/,"");var Pe=he(u,F),Ie=he(g,K.length?_e(K).length-ee:0);if(L.length>1||L[0]||Be(Pe,Ie))return Un(e.doc,L,Pe,Ie,"+input"),!0},tt.prototype.ensurePolled=function(){this.forceCompositionEnd()},tt.prototype.reset=function(){this.forceCompositionEnd()},tt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},tt.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},tt.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Zt(this.cm,function(){return Ut(e.cm)})},tt.prototype.setUneditable=function(e){e.contentEditable="false"},tt.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Lt(this.cm,bo)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},tt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},tt.prototype.onContextMenu=function(){},tt.prototype.resetPosition=function(){},tt.prototype.needsContentAttribute=!0;function vs(e,t){var n=Ka(e,t.line);if(!n||n.hidden)return null;var r=Oe(e.doc,t.line),i=jo(n,r,t.line),o=Qe(r,e.doc.direction),u="left";if(o){var c=$e(o,t.ch);u=c%2?"right":"left"}var d=Xo(i.map,t.ch,u);return d.offset=d.collapse=="right"?d.end:d.start,d}function pf(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function Yn(e,t){return t&&(e.bad=!0),e}function vf(e,t,n,r,i){var o="",u=!1,c=e.doc.lineSeparator(),d=!1;function g(F){return function(ee){return ee.id==F}}function b(){u&&(o+=c,d&&(o+=c),u=d=!1)}function L(F){F&&(b(),o+=F)}function K(F){if(F.nodeType==1){var ee=F.getAttribute("cm-text");if(ee){L(ee);return}var oe=F.getAttribute("cm-marker"),ve;if(oe){var Ce=e.findMarks(he(r,0),he(i+1,0),g(+oe));Ce.length&&(ve=Ce[0].find(0))&&L(kr(e.doc,ve.from,ve.to).join(c));return}if(F.getAttribute("contenteditable")=="false")return;var ke=/^(pre|div|p|li|table|br)$/i.test(F.nodeName);if(!/^br$/i.test(F.nodeName)&&F.textContent.length==0)return;ke&&b();for(var Se=0;Se<F.childNodes.length;Se++)K(F.childNodes[Se]);/^(pre|p)$/i.test(F.nodeName)&&(d=!0),ke&&(u=!0)}else F.nodeType==3&&L(F.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;K(t),t!=n;)t=t.nextSibling,d=!1;return o}function ma(e,t,n){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[n],!r)return Yn(e.clipPos(he(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return gf(o,t,n)}}function gf(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!Me(r,t))return Yn(he(Ze(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?_e(e.rest):e.line;return Yn(he(Ze(o),o.text.length),i)}var u=t.nodeType==3?t:null,c=t;for(!u&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(u=t.firstChild,n&&(n=u.nodeValue.length));c.parentNode!=r;)c=c.parentNode;var d=e.measure,g=d.maps;function b(ve,Ce,ke){for(var Se=-1;Se<(g?g.length:0);Se++)for(var Te=Se<0?d.map:g[Se],Pe=0;Pe<Te.length;Pe+=3){var Ie=Te[Pe+2];if(Ie==ve||Ie==Ce){var Ke=Ze(Se<0?e.line:e.rest[Se]),at=Te[Pe]+ke;return(ke<0||Ie!=ve)&&(at=Te[Pe+(ke?1:0)]),he(Ke,at)}}}var L=b(u,c,n);if(L)return Yn(L,i);for(var K=c.nextSibling,F=u?u.nodeValue.length-n:0;K;K=K.nextSibling){if(L=b(K,K.firstChild,0),L)return Yn(he(L.line,L.ch-F),i);F+=K.textContent.length}for(var ee=c.previousSibling,oe=n;ee;ee=ee.previousSibling){if(L=b(ee,ee.firstChild,-1),L)return Yn(he(L.line,L.ch+oe),i);oe+=ee.textContent.length}}var ht=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new U,this.hasSelection=!1,this.composing=null,this.resetting=!1};ht.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),S&&(i.style.width="0px"),Ee(i,"input",function(){I&&X>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),Ee(i,"paste",function(u){vt(r,u)||fs(u,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())});function o(u){if(!vt(r,u)){if(r.somethingSelected())ya({lineWise:!1,text:r.getSelections()});else if(r.options.lineWiseCopyCut){var c=hs(r);ya({lineWise:!0,text:c.text}),u.type=="cut"?r.setSelections(c.ranges,null,rt):(n.prevInput="",i.value=c.text.join(`
`),Re(i))}else return;u.type=="cut"&&(r.state.cutIncoming=+new Date)}}Ee(i,"cut",o),Ee(i,"copy",o),Ee(e.scroller,"paste",function(u){if(!(Lr(e,u)||vt(r,u))){if(!i.dispatchEvent){r.state.pasteIncoming=+new Date,n.focus();return}var c=new Event("paste");c.clipboardData=u.clipboardData,i.dispatchEvent(c)}}),Ee(e.lineSpace,"selectstart",function(u){Lr(e,u)||Et(u)}),Ee(i,"compositionstart",function(){var u=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:u,range:r.markText(u,r.getCursor("to"),{className:"CodeMirror-composing"})}}),Ee(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},ht.prototype.createField=function(e){this.wrapper=ds(),this.textarea=this.wrapper.firstChild;var t=this.cm.options;Co(this.textarea,t.spellcheck,t.autocorrect,t.autocapitalize)},ht.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},ht.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=il(e);if(e.options.moveInputWithCursor){var i=ur(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),u=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+u.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+u.left-o.left))}return r},ht.prototype.showSelection=function(e){var t=this.cm,n=t.display;Ae(n.cursorDiv,e.cursors),Ae(n.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},ht.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var t=this.cm;if(this.resetting=!0,t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&Re(this.textarea),I&&X>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",I&&X>=9&&(this.hasSelection=null));this.resetting=!1}},ht.prototype.getField=function(){return this.textarea},ht.prototype.supportsTouch=function(){return!1},ht.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!v||ye(R(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},ht.prototype.blur=function(){this.textarea.blur()},ht.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ht.prototype.receivedFocus=function(){this.slowPoll()},ht.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},ht.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function n(){var r=t.poll();!r&&!e?(e=!0,t.polling.set(60,n)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,n)},ht.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||this.resetting||!t.state.focused||Ra(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(I&&X>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(o==8203&&!r&&(r="​"),o==8666)return this.reset(),this.cm.execCommand("undo")}for(var u=0,c=Math.min(r.length,i.length);u<c&&r.charCodeAt(u)==i.charCodeAt(u);)++u;return Zt(t,function(){bo(t,i.slice(u),r.length-u,null,e.composing?"*compose":null),i.length>1e3||i.indexOf(`
`)>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ht.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ht.prototype.onKeyPress=function(){I&&X>=9&&(this.hasSelection=null),this.fastPoll()},ht.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=ln(n,e),u=r.scroller.scrollTop;if(!o||j)return;var c=n.options.resetSelectionOnContextMenu;c&&n.doc.sel.contains(o)==-1&&Lt(n,It)(n.doc,zr(o),rt);var d=i.style.cssText,g=t.wrapper.style.cssText,b=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",i.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-b.top-5)+"px; left: "+(e.clientX-b.left-5)+`px;
      z-index: 1000; background: `+(I?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var L;_&&(L=i.ownerDocument.defaultView.scrollY),r.input.focus(),_&&i.ownerDocument.defaultView.scrollTo(null,L),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=F,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll);function K(){if(i.selectionStart!=null){var oe=n.somethingSelected(),ve="​"+(oe?i.value:"");i.value="⇚",i.value=ve,t.prevInput=oe?"":"​",i.selectionStart=1,i.selectionEnd=ve.length,r.selForContextMenu=n.doc.sel}}function F(){if(t.contextMenuPending==F&&(t.contextMenuPending=!1,t.wrapper.style.cssText=g,i.style.cssText=d,I&&X<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=u),i.selectionStart!=null)){(!I||I&&X<9)&&K();var oe=0,ve=function(){r.selForContextMenu==n.doc.sel&&i.selectionStart==0&&i.selectionEnd>0&&t.prevInput=="​"?Lt(n,Dl)(n):oe++<10?r.detectingSelectAll=setTimeout(ve,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(ve,200)}}if(I&&X>=9&&K(),ce){Jr(e);var ee=function(){Je(window,"mouseup",ee),setTimeout(F,20)};Ee(window,"mouseup",ee)}else setTimeout(F,50)},ht.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},ht.prototype.setUneditable=function(){},ht.prototype.needsContentAttribute=!1;function yf(e,t){if(t=t?Z(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var n=ye(R(e));t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}function r(){e.value=c.getValue()}var i;if(e.form&&(Ee(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var u=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=u}}catch{}}t.finishInit=function(d){d.save=r,d.getTextArea=function(){return e},d.toTextArea=function(){d.toTextArea=isNaN,r(),e.parentNode.removeChild(d.getWrapperElement()),e.style.display="",e.form&&(Je(e.form,"submit",r),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=i))}},e.style.display="none";var c=lt(function(d){return e.parentNode.insertBefore(d,e.nextSibling)},t);return c}function mf(e){e.off=Je,e.on=Ee,e.wheelEventPixels=wu,e.Doc=jt,e.splitLines=Ir,e.countColumn=Y,e.findColumn=gr,e.isWordChar=Rr,e.Pass=Ge,e.signal=ot,e.Line=be,e.changeEnd=Kr,e.scrollbarModel=fl,e.Pos=he,e.cmpPos=Be,e.modes=Sn,e.mimeModes=Pr,e.resolveMode=Qr,e.getMode=Zr,e.modeExtensions=Dr,e.extendMode=or,e.copyState=Sr,e.startState=ei,e.innerMode=kn,e.commands=Ri,e.keyMap=Mr,e.keyName=Ql,e.isModifierKey=Yl,e.lookupKey=Gn,e.normalizeKeyMap=qu,e.StringStream=ft,e.SharedTextMarker=Mi,e.TextMarker=Ur,e.LineWidget=Ti,e.e_preventDefault=Et,e.e_stopPropagation=_i,e.e_stop=Jr,e.addClass=De,e.contains=Me,e.rmClass=xe,e.keyNames=jr}uf(lt),df(lt);var xf="iter insert remove copy getEditor constructor".split(" ");for(var xa in jt.prototype)jt.prototype.hasOwnProperty(xa)&&me(xf,xa)<0&&(lt.prototype[xa]=function(e){return function(){return e.apply(this.doc,arguments)}}(jt.prototype[xa]));return Cr(jt),lt.inputStyles={textarea:ht,contenteditable:tt},lt.defineMode=function(e){!lt.defaults.mode&&e!="null"&&(lt.defaults.mode=e),Ia.apply(this,arguments)},lt.defineMIME=Pa,lt.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),lt.defineMIME("text/plain","null"),lt.defineExtension=function(e,t){lt.prototype[e]=t},lt.defineDocExtension=function(e,t){jt.prototype[e]=t},lt.fromTextArea=yf,mf(lt),lt.version="5.65.17",lt})}(Oo)),Oo.exports}var qf=Rt();const Ls=Is(qf);(function(G,ue){(function(C){C(Rt())})(function(C){C.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var A=0;A<C.modeInfo.length;A++){var z=C.modeInfo[A];z.mimes&&(z.mime=z.mimes[0])}C.findModeByMIME=function(P){P=P.toLowerCase();for(var O=0;O<C.modeInfo.length;O++){var D=C.modeInfo[O];if(D.mime==P)return D;if(D.mimes){for(var I=0;I<D.mimes.length;I++)if(D.mimes[I]==P)return D}}if(/\+xml$/.test(P))return C.findModeByMIME("application/xml");if(/\+json$/.test(P))return C.findModeByMIME("application/json")},C.findModeByExtension=function(P){P=P.toLowerCase();for(var O=0;O<C.modeInfo.length;O++){var D=C.modeInfo[O];if(D.ext){for(var I=0;I<D.ext.length;I++)if(D.ext[I]==P)return D}}},C.findModeByFileName=function(P){for(var O=0;O<C.modeInfo.length;O++){var D=C.modeInfo[O];if(D.file&&D.file.test(P))return D}var I=P.lastIndexOf("."),X=I>-1&&P.substring(I+1,P.length);if(X)return C.findModeByExtension(X)},C.findModeByName=function(P){P=P.toLowerCase();for(var O=0;O<C.modeInfo.length;O++){var D=C.modeInfo[O];if(D.name.toLowerCase()==P)return D;if(D.alias){for(var I=0;I<D.alias.length;I++)if(D.alias[I].toLowerCase()==P)return D}}}})})();var Ro={tabSize:2,autoCloseBrackets:!0,matchBrackets:!0,showCursorWhenSelecting:!0,lineNumbers:!0,fullScreen:!0};function Xf(G,ue){G===void 0&&(G={});var{options:C={},value:A="",width:z="100%",height:P="100%",lazyLoadMode:O=!0}=G,[D,I]=ar.useState(),X=ar.useRef(),_=ar.useRef(G);ar.useImperativeHandle(ue,()=>({editor:D,textarea:X.current}),[D,X]),_.current=G;function re(){var j=Object.keys(G),ae=j.filter(J=>/^on+/.test(J)),W={};return ae.forEach(J=>{var S=J.slice(2);S&&S[0]&&(W[J]=S.replace(S[0],S[0].toLowerCase()))}),W}function H(j,ae){return q.apply(this,arguments)}function q(){return q=Gf(function*(j,ae){if(ae===void 0&&(ae={}),typeof ae=="object"&&window){var W=Ls.findModeByName(ae.mode||"");O&&W&&W.mode&&(yield Sf(()=>import("codemirror/mode/"+W.mode+"/"+W.mode+".js"),[])),W&&(ae.mode=W.mime),Object.keys(ae).forEach(J=>{(ae[J]||ae[J]===!1)&&JSON.stringify(ae[J])&&j.setOption(J,ae[J])})}}),q.apply(this,arguments)}return ar.useEffect(()=>{if(!D&&window){var j=Ls.fromTextArea(X.current,Lo({},Ro,C)),ae=re();Object.keys(ae).forEach(W=>{j.on(ae[W],function(){return _.current[W](...arguments)})}),j.setValue(A||""),(z||P)&&j.setSize(z,P),I(j),H(j,Lo({},Ro,C))}return()=>{D&&window&&(D.toTextArea(),I(void 0))}},[]),ar.useMemo(()=>{if(!(!D||!window)){var j=D.getValue();A!==void 0&&A!==j&&D.setValue(A)}},[A]),ar.useMemo(()=>{!D||!window||D.setSize(z,P)},[z,P]),ar.useMemo(()=>{!D||!window||H(D,Lo({},Ro,C))},[D,C]),ze.jsx("textarea",{ref:X,children:A})}const Yf=vn.forwardRef(Xf);var Do={},Jf=ka;Object.defineProperty(Do,"__esModule",{value:!0});var Hs=Do.default=void 0,Qf=Jf(wa()),Zf=ze;Hs=Do.default=(0,Qf.default)((0,Zf.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh");var No={},Vf=ka;Object.defineProperty(No,"__esModule",{value:!0});var Ws=No.default=void 0,$f=Vf(wa()),ec=ze;Ws=No.default=(0,$f.default)((0,ec.jsx)("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"}),"Fullscreen");var Bo={},tc=ka;Object.defineProperty(Bo,"__esModule",{value:!0});var zs=Bo.default=void 0,rc=tc(wa()),nc=ze;zs=Bo.default=(0,rc.default)((0,nc.jsx)("path",{d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"}),"FullscreenExit");(function(G,ue){(function(C){C(Rt())})(function(C){function A(X){return new RegExp("^(("+X.join(")|(")+"))\\b")}var z=A(["and","or","not","is"]),P=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in","False","True"],O=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];C.registerHelper("hintWords","python",P.concat(O).concat(["exec","print"]));function D(X){return X.scopes[X.scopes.length-1]}C.defineMode("python",function(X,_){for(var re="error",H=_.delimiters||_.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.\\]/,q=[_.singleOperators,_.doubleOperators,_.doubleDelimiters,_.tripleDelimiters,_.operators||/^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@]|\.\.\.)/],j=0;j<q.length;j++)q[j]||q.splice(j--,1);var ae=_.hangingIndent||X.indentUnit,W=P,J=O;_.extra_keywords!=null&&(W=W.concat(_.extra_keywords)),_.extra_builtins!=null&&(J=J.concat(_.extra_builtins));var S=!(_.version&&Number(_.version)<3);if(S){var T=_.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;W=W.concat(["nonlocal","None","aiter","anext","async","await","breakpoint","match","case"]),J=J.concat(["ascii","bytes","exec","print"]);var v=new RegExp(`^(([rbuf]|(br)|(rb)|(fr)|(rf))?('{3}|"{3}|['"]))`,"i")}else{var T=_.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;W=W.concat(["exec","print"]),J=J.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","None"]);var v=new RegExp(`^(([rubf]|(ur)|(br))?('{3}|"{3}|['"]))`,"i")}var y=A(W),k=A(J);function M(se,de){var Me=se.sol()&&de.lastToken!="\\";if(Me&&(de.indent=se.indentation()),Me&&D(de).type=="py"){var ye=D(de).offset;if(se.eatSpace()){var De=se.indentation();return De>ye?le(de):De<ye&&we(se,de)&&se.peek()!="#"&&(de.errorToken=!0),null}else{var He=B(se,de);return ye>0&&we(se,de)&&(He+=" "+re),He}}return B(se,de)}function B(se,de,Me){if(se.eatSpace())return null;if(!Me&&se.match(/^#.*/))return"comment";if(se.match(/^[0-9\.]/,!1)){var ye=!1;if(se.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)&&(ye=!0),se.match(/^[\d_]+\.\d*/)&&(ye=!0),se.match(/^\.\d+/)&&(ye=!0),ye)return se.eat(/J/i),"number";var De=!1;if(se.match(/^0x[0-9a-f_]+/i)&&(De=!0),se.match(/^0b[01_]+/i)&&(De=!0),se.match(/^0o[0-7_]+/i)&&(De=!0),se.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)&&(se.eat(/J/i),De=!0),se.match(/^0(?![\dx])/i)&&(De=!0),De)return se.eat(/L/i),"number"}if(se.match(v)){var He=se.current().toLowerCase().indexOf("f")!==-1;return He?(de.tokenize=Q(se.current(),de.tokenize),de.tokenize(se,de)):(de.tokenize=ce(se.current(),de.tokenize),de.tokenize(se,de))}for(var Re=0;Re<q.length;Re++)if(se.match(q[Re]))return"operator";return se.match(H)?"punctuation":de.lastToken=="."&&se.match(T)?"property":se.match(y)||se.match(z)?"keyword":se.match(k)?"builtin":se.match(/^(self|cls)\b/)?"variable-2":se.match(T)?de.lastToken=="def"||de.lastToken=="class"?"def":"variable":(se.next(),Me?null:re)}function Q(se,de){for(;"rubf".indexOf(se.charAt(0).toLowerCase())>=0;)se=se.substr(1);var Me=se.length==1,ye="string";function De(Re){return function(Ue,qe){var R=B(Ue,qe,!0);return R=="punctuation"&&(Ue.current()=="{"?qe.tokenize=De(Re+1):Ue.current()=="}"&&(Re>1?qe.tokenize=De(Re-1):qe.tokenize=He)),R}}function He(Re,Ue){for(;!Re.eol();)if(Re.eatWhile(/[^'"\{\}\\]/),Re.eat("\\")){if(Re.next(),Me&&Re.eol())return ye}else{if(Re.match(se))return Ue.tokenize=de,ye;if(Re.match("{{"))return ye;if(Re.match("{",!1))return Ue.tokenize=De(0),Re.current()?ye:Ue.tokenize(Re,Ue);if(Re.match("}}"))return ye;if(Re.match("}"))return re;Re.eat(/['"]/)}if(Me){if(_.singleLineStringErrors)return re;Ue.tokenize=de}return ye}return He.isString=!0,He}function ce(se,de){for(;"rubf".indexOf(se.charAt(0).toLowerCase())>=0;)se=se.substr(1);var Me=se.length==1,ye="string";function De(He,Re){for(;!He.eol();)if(He.eatWhile(/[^'"\\]/),He.eat("\\")){if(He.next(),Me&&He.eol())return ye}else{if(He.match(se))return Re.tokenize=de,ye;He.eat(/['"]/)}if(Me){if(_.singleLineStringErrors)return re;Re.tokenize=de}return ye}return De.isString=!0,De}function le(se){for(;D(se).type!="py";)se.scopes.pop();se.scopes.push({offset:D(se).offset+X.indentUnit,type:"py",align:null})}function xe(se,de,Me){var ye=se.match(/^[\s\[\{\(]*(?:#|$)/,!1)?null:se.column()+1;de.scopes.push({offset:de.indent+ae,type:Me,align:ye})}function we(se,de){for(var Me=se.indentation();de.scopes.length>1&&D(de).offset>Me;){if(D(de).type!="py")return!0;de.scopes.pop()}return D(de).offset!=Me}function Ae(se,de){se.sol()&&(de.beginningOfLine=!0,de.dedent=!1);var Me=de.tokenize(se,de),ye=se.current();if(de.beginningOfLine&&ye=="@")return se.match(T,!1)?"meta":S?"operator":re;if(/\S/.test(ye)&&(de.beginningOfLine=!1),(Me=="variable"||Me=="builtin")&&de.lastToken=="meta"&&(Me="meta"),(ye=="pass"||ye=="return")&&(de.dedent=!0),ye=="lambda"&&(de.lambda=!0),ye==":"&&!de.lambda&&D(de).type=="py"&&se.match(/^\s*(?:#|$)/,!1)&&le(de),ye.length==1&&!/string|comment/.test(Me)){var De="[({".indexOf(ye);if(De!=-1&&xe(se,de,"])}".slice(De,De+1)),De="])}".indexOf(ye),De!=-1)if(D(de).type==ye)de.indent=de.scopes.pop().offset-ae;else return re}return de.dedent&&se.eol()&&D(de).type=="py"&&de.scopes.length>1&&de.scopes.pop(),Me}var fe={startState:function(se){return{tokenize:M,scopes:[{offset:se||0,type:"py",align:null}],indent:se||0,lastToken:null,lambda:!1,dedent:0}},token:function(se,de){var Me=de.errorToken;Me&&(de.errorToken=!1);var ye=Ae(se,de);return ye&&ye!="comment"&&(de.lastToken=ye=="keyword"||ye=="punctuation"?se.current():ye),ye=="punctuation"&&(ye=null),se.eol()&&de.lambda&&(de.lambda=!1),Me?ye+" "+re:ye},indent:function(se,de){if(se.tokenize!=M)return se.tokenize.isString?C.Pass:0;var Me=D(se),ye=Me.type==de.charAt(0)||Me.type=="py"&&!se.dedent&&/^(else:|elif |except |finally:)/.test(de);return Me.align!=null?Me.align-(ye?1:0):Me.offset-(ye?ae:0)},electricInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/,closeBrackets:{triples:`'"`},lineComment:"#",fold:"indent"};return fe}),C.defineMIME("text/x-python","python");var I=function(X){return X.split(" ")};C.defineMIME("text/x-cython",{name:"python",extra_keywords:I("by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE")})})})();var Ts={exports:{}},Ms;function Ks(){return Ms||(Ms=1,function(G,ue){(function(C){C(Rt())})(function(C){var A=C.Pos;function z(S){var T=S.flags;return T??(S.ignoreCase?"i":"")+(S.global?"g":"")+(S.multiline?"m":"")}function P(S,T){for(var v=z(S),y=v,k=0;k<T.length;k++)y.indexOf(T.charAt(k))==-1&&(y+=T.charAt(k));return v==y?S:new RegExp(S.source,y)}function O(S){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(S.source)}function D(S,T,v){T=P(T,"g");for(var y=v.line,k=v.ch,M=S.lastLine();y<=M;y++,k=0){T.lastIndex=k;var B=S.getLine(y),Q=T.exec(B);if(Q)return{from:A(y,Q.index),to:A(y,Q.index+Q[0].length),match:Q}}}function I(S,T,v){if(!O(T))return D(S,T,v);T=P(T,"gm");for(var y,k=1,M=v.line,B=S.lastLine();M<=B;){for(var Q=0;Q<k&&!(M>B);Q++){var ce=S.getLine(M++);y=y==null?ce:y+`
`+ce}k=k*2,T.lastIndex=v.ch;var le=T.exec(y);if(le){var xe=y.slice(0,le.index).split(`
`),we=le[0].split(`
`),Ae=v.line+xe.length-1,fe=xe[xe.length-1].length;return{from:A(Ae,fe),to:A(Ae+we.length-1,we.length==1?fe+we[0].length:we[we.length-1].length),match:le}}}}function X(S,T,v){for(var y,k=0;k<=S.length;){T.lastIndex=k;var M=T.exec(S);if(!M)break;var B=M.index+M[0].length;if(B>S.length-v)break;(!y||B>y.index+y[0].length)&&(y=M),k=M.index+1}return y}function _(S,T,v){T=P(T,"g");for(var y=v.line,k=v.ch,M=S.firstLine();y>=M;y--,k=-1){var B=S.getLine(y),Q=X(B,T,k<0?0:B.length-k);if(Q)return{from:A(y,Q.index),to:A(y,Q.index+Q[0].length),match:Q}}}function re(S,T,v){if(!O(T))return _(S,T,v);T=P(T,"gm");for(var y,k=1,M=S.getLine(v.line).length-v.ch,B=v.line,Q=S.firstLine();B>=Q;){for(var ce=0;ce<k&&B>=Q;ce++){var le=S.getLine(B--);y=y==null?le:le+`
`+y}k*=2;var xe=X(y,T,M);if(xe){var we=y.slice(0,xe.index).split(`
`),Ae=xe[0].split(`
`),fe=B+we.length,se=we[we.length-1].length;return{from:A(fe,se),to:A(fe+Ae.length-1,Ae.length==1?se+Ae[0].length:Ae[Ae.length-1].length),match:xe}}}}var H,q;String.prototype.normalize?(H=function(S){return S.normalize("NFD").toLowerCase()},q=function(S){return S.normalize("NFD")}):(H=function(S){return S.toLowerCase()},q=function(S){return S});function j(S,T,v,y){if(S.length==T.length)return v;for(var k=0,M=v+Math.max(0,S.length-T.length);;){if(k==M)return k;var B=k+M>>1,Q=y(S.slice(0,B)).length;if(Q==v)return B;Q>v?M=B:k=B+1}}function ae(S,T,v,y){if(!T.length)return null;var k=y?H:q,M=k(T).split(/\r|\n\r?/);e:for(var B=v.line,Q=v.ch,ce=S.lastLine()+1-M.length;B<=ce;B++,Q=0){var le=S.getLine(B).slice(Q),xe=k(le);if(M.length==1){var we=xe.indexOf(M[0]);if(we==-1)continue e;var v=j(le,xe,we,k)+Q;return{from:A(B,j(le,xe,we,k)+Q),to:A(B,j(le,xe,we+M[0].length,k)+Q)}}else{var Ae=xe.length-M[0].length;if(xe.slice(Ae)!=M[0])continue e;for(var fe=1;fe<M.length-1;fe++)if(k(S.getLine(B+fe))!=M[fe])continue e;var se=S.getLine(B+M.length-1),de=k(se),Me=M[M.length-1];if(de.slice(0,Me.length)!=Me)continue e;return{from:A(B,j(le,xe,Ae,k)+Q),to:A(B+M.length-1,j(se,de,Me.length,k))}}}}function W(S,T,v,y){if(!T.length)return null;var k=y?H:q,M=k(T).split(/\r|\n\r?/);e:for(var B=v.line,Q=v.ch,ce=S.firstLine()-1+M.length;B>=ce;B--,Q=-1){var le=S.getLine(B);Q>-1&&(le=le.slice(0,Q));var xe=k(le);if(M.length==1){var we=xe.lastIndexOf(M[0]);if(we==-1)continue e;return{from:A(B,j(le,xe,we,k)),to:A(B,j(le,xe,we+M[0].length,k))}}else{var Ae=M[M.length-1];if(xe.slice(0,Ae.length)!=Ae)continue e;for(var fe=1,v=B-M.length+1;fe<M.length-1;fe++)if(k(S.getLine(v+fe))!=M[fe])continue e;var se=S.getLine(B+1-M.length),de=k(se);if(de.slice(de.length-M[0].length)!=M[0])continue e;return{from:A(B+1-M.length,j(se,de,se.length-M[0].length,k)),to:A(B,j(le,xe,Ae.length,k))}}}}function J(S,T,v,y){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=S,v=v?S.clipPos(v):A(0,0),this.pos={from:v,to:v};var k;typeof y=="object"?k=y.caseFold:(k=y,y=null),typeof T=="string"?(k==null&&(k=!1),this.matches=function(M,B){return(M?W:ae)(S,T,B,k)}):(T=P(T,"gm"),!y||y.multiline!==!1?this.matches=function(M,B){return(M?re:I)(S,T,B)}:this.matches=function(M,B){return(M?_:D)(S,T,B)})}J.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(S){var T=this.doc.clipPos(S?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(T=A(T.line,T.ch),S?(T.ch--,T.ch<0&&(T.line--,T.ch=(this.doc.getLine(T.line)||"").length)):(T.ch++,T.ch>(this.doc.getLine(T.line)||"").length&&(T.ch=0,T.line++)),C.cmpPos(T,this.doc.clipPos(T))!=0))return this.atOccurrence=!1;var v=this.matches(S,T);if(this.afterEmptyMatch=v&&C.cmpPos(v.from,v.to)==0,v)return this.pos=v,this.atOccurrence=!0,this.pos.match||!0;var y=A(S?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:y,to:y},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(S,T){if(this.atOccurrence){var v=C.splitLines(S);this.doc.replaceRange(v,this.pos.from,this.pos.to,T),this.pos.to=A(this.pos.from.line+v.length-1,v[v.length-1].length+(v.length==1?this.pos.from.ch:0))}}},C.defineExtension("getSearchCursor",function(S,T,v){return new J(this.doc,S,T,v)}),C.defineDocExtension("getSearchCursor",function(S,T,v){return new J(this,S,T,v)}),C.defineExtension("selectMatches",function(S,T){for(var v=[],y=this.getSearchCursor(S,this.getCursor("from"),T);y.findNext()&&!(C.cmpPos(y.to(),this.getCursor("to"))>0);)v.push({anchor:y.from(),head:y.to()});v.length&&this.setSelections(v,0)})})}()),Ts.exports}var As={exports:{}},Os;function _s(){return Os||(Os=1,function(G,ue){(function(C){C(Rt())})(function(C){var A=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),z=C.Pos,P={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function O(H){return H&&H.bracketRegex||/[(){}[\]]/}function D(H,q,j){var ae=H.getLineHandle(q.line),W=q.ch-1,J=j&&j.afterCursor;J==null&&(J=/(^| )cm-fat-cursor($| )/.test(H.getWrapperElement().className));var S=O(j),T=!J&&W>=0&&S.test(ae.text.charAt(W))&&P[ae.text.charAt(W)]||S.test(ae.text.charAt(W+1))&&P[ae.text.charAt(++W)];if(!T)return null;var v=T.charAt(1)==">"?1:-1;if(j&&j.strict&&v>0!=(W==q.ch))return null;var y=H.getTokenTypeAt(z(q.line,W+1)),k=I(H,z(q.line,W+(v>0?1:0)),v,y,j);return k==null?null:{from:z(q.line,W),to:k&&k.pos,match:k&&k.ch==T.charAt(0),forward:v>0}}function I(H,q,j,ae,W){for(var J=W&&W.maxScanLineLength||1e4,S=W&&W.maxScanLines||1e3,T=[],v=O(W),y=j>0?Math.min(q.line+S,H.lastLine()+1):Math.max(H.firstLine()-1,q.line-S),k=q.line;k!=y;k+=j){var M=H.getLine(k);if(M){var B=j>0?0:M.length-1,Q=j>0?M.length:-1;if(!(M.length>J))for(k==q.line&&(B=q.ch-(j<0?1:0));B!=Q;B+=j){var ce=M.charAt(B);if(v.test(ce)&&(ae===void 0||(H.getTokenTypeAt(z(k,B+1))||"")==(ae||""))){var le=P[ce];if(le&&le.charAt(1)==">"==j>0)T.push(ce);else if(T.length)T.pop();else return{pos:z(k,B),ch:ce}}}}}return k-j==(j>0?H.lastLine():H.firstLine())?!1:null}function X(H,q,j){for(var ae=H.state.matchBrackets.maxHighlightLineLength||1e3,W=j&&j.highlightNonMatching,J=[],S=H.listSelections(),T=0;T<S.length;T++){var v=S[T].empty()&&D(H,S[T].head,j);if(v&&(v.match||W!==!1)&&H.getLine(v.from.line).length<=ae){var y=v.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";J.push(H.markText(v.from,z(v.from.line,v.from.ch+1),{className:y})),v.to&&H.getLine(v.to.line).length<=ae&&J.push(H.markText(v.to,z(v.to.line,v.to.ch+1),{className:y}))}}if(J.length){A&&H.state.focused&&H.focus();var k=function(){H.operation(function(){for(var M=0;M<J.length;M++)J[M].clear()})};if(q)setTimeout(k,800);else return k}}function _(H){H.operation(function(){H.state.matchBrackets.currentlyHighlighted&&(H.state.matchBrackets.currentlyHighlighted(),H.state.matchBrackets.currentlyHighlighted=null),H.state.matchBrackets.currentlyHighlighted=X(H,!1,H.state.matchBrackets)})}function re(H){H.state.matchBrackets&&H.state.matchBrackets.currentlyHighlighted&&(H.state.matchBrackets.currentlyHighlighted(),H.state.matchBrackets.currentlyHighlighted=null)}C.defineOption("matchBrackets",!1,function(H,q,j){j&&j!=C.Init&&(H.off("cursorActivity",_),H.off("focus",_),H.off("blur",re),re(H)),q&&(H.state.matchBrackets=typeof q=="object"?q:{},H.on("cursorActivity",_),H.on("focus",_),H.on("blur",re))}),C.defineExtension("matchBrackets",function(){X(this,!0)}),C.defineExtension("findMatchingBracket",function(H,q,j){return(j||typeof q=="boolean")&&(j?(j.strict=q,q=j):q=q?{strict:!0}:null),D(this,H,q)}),C.defineExtension("scanForBracket",function(H,q,j,ae){return I(this,H,q,j,ae)})})}()),As.exports}(function(G,ue){(function(C){C(Rt(),Ks(),_s())})(function(C){var A=C.commands,z=C.Pos;function P(v,y,k){if(k<0&&y.ch==0)return v.clipPos(z(y.line-1));var M=v.getLine(y.line);if(k>0&&y.ch>=M.length)return v.clipPos(z(y.line+1,0));for(var B="start",Q,ce=y.ch,le=ce,xe=k<0?0:M.length,we=0;le!=xe;le+=k,we++){var Ae=M.charAt(k<0?le-1:le),fe=Ae!="_"&&C.isWordChar(Ae)?"w":"o";if(fe=="w"&&Ae.toUpperCase()==Ae&&(fe="W"),B=="start")fe!="o"?(B="in",Q=fe):ce=le+k;else if(B=="in"&&Q!=fe){if(Q=="w"&&fe=="W"&&k<0&&le--,Q=="W"&&fe=="w"&&k>0)if(le==ce+1){Q="w";continue}else le--;break}}return z(y.line,le)}function O(v,y){v.extendSelectionsBy(function(k){return v.display.shift||v.doc.extend||k.empty()?P(v.doc,k.head,y):y<0?k.from():k.to()})}A.goSubwordLeft=function(v){O(v,-1)},A.goSubwordRight=function(v){O(v,1)},A.scrollLineUp=function(v){var y=v.getScrollInfo();if(!v.somethingSelected()){var k=v.lineAtHeight(y.top+y.clientHeight,"local");v.getCursor().line>=k&&v.execCommand("goLineUp")}v.scrollTo(null,y.top-v.defaultTextHeight())},A.scrollLineDown=function(v){var y=v.getScrollInfo();if(!v.somethingSelected()){var k=v.lineAtHeight(y.top,"local")+1;v.getCursor().line<=k&&v.execCommand("goLineDown")}v.scrollTo(null,y.top+v.defaultTextHeight())},A.splitSelectionByLine=function(v){for(var y=v.listSelections(),k=[],M=0;M<y.length;M++)for(var B=y[M].from(),Q=y[M].to(),ce=B.line;ce<=Q.line;++ce)Q.line>B.line&&ce==Q.line&&Q.ch==0||k.push({anchor:ce==B.line?B:z(ce,0),head:ce==Q.line?Q:z(ce)});v.setSelections(k,0)},A.singleSelectionTop=function(v){var y=v.listSelections()[0];v.setSelection(y.anchor,y.head,{scroll:!1})},A.selectLine=function(v){for(var y=v.listSelections(),k=[],M=0;M<y.length;M++){var B=y[M];k.push({anchor:z(B.from().line,0),head:z(B.to().line+1,0)})}v.setSelections(k)};function D(v,y){if(v.isReadOnly())return C.Pass;v.operation(function(){for(var k=v.listSelections().length,M=[],B=-1,Q=0;Q<k;Q++){var ce=v.listSelections()[Q].head;if(!(ce.line<=B)){var le=z(ce.line+(y?0:1),0);v.replaceRange(`
`,le,null,"+insertLine"),v.indentLine(le.line,null,!0),M.push({head:le,anchor:le}),B=ce.line+1}}v.setSelections(M)}),v.execCommand("indentAuto")}A.insertLineAfter=function(v){return D(v,!1)},A.insertLineBefore=function(v){return D(v,!0)};function I(v,y){for(var k=y.ch,M=k,B=v.getLine(y.line);k&&C.isWordChar(B.charAt(k-1));)--k;for(;M<B.length&&C.isWordChar(B.charAt(M));)++M;return{from:z(y.line,k),to:z(y.line,M),word:B.slice(k,M)}}A.selectNextOccurrence=function(v){var y=v.getCursor("from"),k=v.getCursor("to"),M=v.state.sublimeFindFullWord==v.doc.sel;if(C.cmpPos(y,k)==0){var B=I(v,y);if(!B.word)return;v.setSelection(B.from,B.to),M=!0}else{var Q=v.getRange(y,k),ce=M?new RegExp("\\b"+Q+"\\b"):Q,le=v.getSearchCursor(ce,k),xe=le.findNext();if(xe||(le=v.getSearchCursor(ce,z(v.firstLine(),0)),xe=le.findNext()),!xe||_(v.listSelections(),le.from(),le.to()))return;v.addSelection(le.from(),le.to())}M&&(v.state.sublimeFindFullWord=v.doc.sel)},A.skipAndSelectNextOccurrence=function(v){var y=v.getCursor("anchor"),k=v.getCursor("head");A.selectNextOccurrence(v),C.cmpPos(y,k)!=0&&v.doc.setSelections(v.doc.listSelections().filter(function(M){return M.anchor!=y||M.head!=k}))};function X(v,y){for(var k=v.listSelections(),M=[],B=0;B<k.length;B++){var Q=k[B],ce=v.findPosV(Q.anchor,y,"line",Q.anchor.goalColumn),le=v.findPosV(Q.head,y,"line",Q.head.goalColumn);ce.goalColumn=Q.anchor.goalColumn!=null?Q.anchor.goalColumn:v.cursorCoords(Q.anchor,"div").left,le.goalColumn=Q.head.goalColumn!=null?Q.head.goalColumn:v.cursorCoords(Q.head,"div").left;var xe={anchor:ce,head:le};M.push(Q),M.push(xe)}v.setSelections(M)}A.addCursorToPrevLine=function(v){X(v,-1)},A.addCursorToNextLine=function(v){X(v,1)};function _(v,y,k){for(var M=0;M<v.length;M++)if(C.cmpPos(v[M].from(),y)==0&&C.cmpPos(v[M].to(),k)==0)return!0;return!1}var re="(){}[]";function H(v){for(var y=v.listSelections(),k=[],M=0;M<y.length;M++){var B=y[M],Q=B.head,ce=v.scanForBracket(Q,-1);if(!ce)return!1;for(;;){var le=v.scanForBracket(Q,1);if(!le)return!1;if(le.ch==re.charAt(re.indexOf(ce.ch)+1)){var xe=z(ce.pos.line,ce.pos.ch+1);if(C.cmpPos(xe,B.from())==0&&C.cmpPos(le.pos,B.to())==0){if(ce=v.scanForBracket(ce.pos,-1),!ce)return!1}else{k.push({anchor:xe,head:le.pos});break}}Q=z(le.pos.line,le.pos.ch+1)}}return v.setSelections(k),!0}A.selectScope=function(v){H(v)||v.execCommand("selectAll")},A.selectBetweenBrackets=function(v){if(!H(v))return C.Pass};function q(v){return v?/\bpunctuation\b/.test(v)?v:void 0:null}A.goToBracket=function(v){v.extendSelectionsBy(function(y){var k=v.scanForBracket(y.head,1,q(v.getTokenTypeAt(y.head)));if(k&&C.cmpPos(k.pos,y.head)!=0)return k.pos;var M=v.scanForBracket(y.head,-1,q(v.getTokenTypeAt(z(y.head.line,y.head.ch+1))));return M&&z(M.pos.line,M.pos.ch+1)||y.head})},A.swapLineUp=function(v){if(v.isReadOnly())return C.Pass;for(var y=v.listSelections(),k=[],M=v.firstLine()-1,B=[],Q=0;Q<y.length;Q++){var ce=y[Q],le=ce.from().line-1,xe=ce.to().line;B.push({anchor:z(ce.anchor.line-1,ce.anchor.ch),head:z(ce.head.line-1,ce.head.ch)}),ce.to().ch==0&&!ce.empty()&&--xe,le>M?k.push(le,xe):k.length&&(k[k.length-1]=xe),M=xe}v.operation(function(){for(var we=0;we<k.length;we+=2){var Ae=k[we],fe=k[we+1],se=v.getLine(Ae);v.replaceRange("",z(Ae,0),z(Ae+1,0),"+swapLine"),fe>v.lastLine()?v.replaceRange(`
`+se,z(v.lastLine()),null,"+swapLine"):v.replaceRange(se+`
`,z(fe,0),null,"+swapLine")}v.setSelections(B),v.scrollIntoView()})},A.swapLineDown=function(v){if(v.isReadOnly())return C.Pass;for(var y=v.listSelections(),k=[],M=v.lastLine()+1,B=y.length-1;B>=0;B--){var Q=y[B],ce=Q.to().line+1,le=Q.from().line;Q.to().ch==0&&!Q.empty()&&ce--,ce<M?k.push(ce,le):k.length&&(k[k.length-1]=le),M=le}v.operation(function(){for(var xe=k.length-2;xe>=0;xe-=2){var we=k[xe],Ae=k[xe+1],fe=v.getLine(we);we==v.lastLine()?v.replaceRange("",z(we-1),z(we),"+swapLine"):v.replaceRange("",z(we,0),z(we+1,0),"+swapLine"),v.replaceRange(fe+`
`,z(Ae,0),null,"+swapLine")}v.scrollIntoView()})},A.toggleCommentIndented=function(v){v.toggleComment({indent:!0})},A.joinLines=function(v){for(var y=v.listSelections(),k=[],M=0;M<y.length;M++){for(var B=y[M],Q=B.from(),ce=Q.line,le=B.to().line;M<y.length-1&&y[M+1].from().line==le;)le=y[++M].to().line;k.push({start:ce,end:le,anchor:!B.empty()&&Q})}v.operation(function(){for(var xe=0,we=[],Ae=0;Ae<k.length;Ae++){for(var fe=k[Ae],se=fe.anchor&&z(fe.anchor.line-xe,fe.anchor.ch),de,Me=fe.start;Me<=fe.end;Me++){var ye=Me-xe;Me==fe.end&&(de=z(ye,v.getLine(ye).length+1)),ye<v.lastLine()&&(v.replaceRange(" ",z(ye),z(ye+1,/^\s*/.exec(v.getLine(ye+1))[0].length)),++xe)}we.push({anchor:se||de,head:de})}v.setSelections(we,0)})},A.duplicateLine=function(v){v.operation(function(){for(var y=v.listSelections().length,k=0;k<y;k++){var M=v.listSelections()[k];M.empty()?v.replaceRange(v.getLine(M.head.line)+`
`,z(M.head.line,0)):v.replaceRange(v.getRange(M.from(),M.to()),M.from())}v.scrollIntoView()})};function j(v,y,k){if(v.isReadOnly())return C.Pass;for(var M=v.listSelections(),B=[],Q,ce=0;ce<M.length;ce++){var le=M[ce];if(!le.empty()){for(var xe=le.from().line,we=le.to().line;ce<M.length-1&&M[ce+1].from().line==we;)we=M[++ce].to().line;M[ce].to().ch||we--,B.push(xe,we)}}B.length?Q=!0:B.push(v.firstLine(),v.lastLine()),v.operation(function(){for(var Ae=[],fe=0;fe<B.length;fe+=2){var se=B[fe],de=B[fe+1],Me=z(se,0),ye=z(de),De=v.getRange(Me,ye,!1);y?De.sort(function(He,Re){return He<Re?-k:He==Re?0:k}):De.sort(function(He,Re){var Ue=He.toUpperCase(),qe=Re.toUpperCase();return Ue!=qe&&(He=Ue,Re=qe),He<Re?-k:He==Re?0:k}),v.replaceRange(De,Me,ye),Q&&Ae.push({anchor:Me,head:z(de+1,0)})}Q&&v.setSelections(Ae,0)})}A.sortLines=function(v){j(v,!0,1)},A.reverseSortLines=function(v){j(v,!0,-1)},A.sortLinesInsensitive=function(v){j(v,!1,1)},A.reverseSortLinesInsensitive=function(v){j(v,!1,-1)},A.nextBookmark=function(v){var y=v.state.sublimeBookmarks;if(y)for(;y.length;){var k=y.shift(),M=k.find();if(M)return y.push(k),v.setSelection(M.from,M.to)}},A.prevBookmark=function(v){var y=v.state.sublimeBookmarks;if(y)for(;y.length;){y.unshift(y.pop());var k=y[y.length-1].find();if(!k)y.pop();else return v.setSelection(k.from,k.to)}},A.toggleBookmark=function(v){for(var y=v.listSelections(),k=v.state.sublimeBookmarks||(v.state.sublimeBookmarks=[]),M=0;M<y.length;M++){for(var B=y[M].from(),Q=y[M].to(),ce=y[M].empty()?v.findMarksAt(B):v.findMarks(B,Q),le=0;le<ce.length;le++)if(ce[le].sublimeBookmark){ce[le].clear();for(var xe=0;xe<k.length;xe++)k[xe]==ce[le]&&k.splice(xe--,1);break}le==ce.length&&k.push(v.markText(B,Q,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},A.clearBookmarks=function(v){var y=v.state.sublimeBookmarks;if(y)for(var k=0;k<y.length;k++)y[k].clear();y.length=0},A.selectBookmarks=function(v){var y=v.state.sublimeBookmarks,k=[];if(y)for(var M=0;M<y.length;M++){var B=y[M].find();B?k.push({anchor:B.from,head:B.to}):y.splice(M--,0)}k.length&&v.setSelections(k,0)};function ae(v,y){v.operation(function(){for(var k=v.listSelections(),M=[],B=[],Q=0;Q<k.length;Q++){var ce=k[Q];ce.empty()?(M.push(Q),B.push("")):B.push(y(v.getRange(ce.from(),ce.to())))}v.replaceSelections(B,"around","case");for(var Q=M.length-1,le;Q>=0;Q--){var ce=k[M[Q]];if(!(le&&C.cmpPos(ce.head,le)>0)){var xe=I(v,ce.head);le=xe.from,v.replaceRange(y(xe.word),xe.from,xe.to)}}})}A.smartBackspace=function(v){if(v.somethingSelected())return C.Pass;v.operation(function(){for(var y=v.listSelections(),k=v.getOption("indentUnit"),M=y.length-1;M>=0;M--){var B=y[M].head,Q=v.getRange({line:B.line,ch:0},B),ce=C.countColumn(Q,null,v.getOption("tabSize")),le=v.findPosH(B,-1,"char",!1);if(Q&&!/\S/.test(Q)&&ce%k==0){var xe=new z(B.line,C.findColumn(Q,ce-k,k));xe.ch!=B.ch&&(le=xe)}v.replaceRange("",le,B,"+delete")}})},A.delLineRight=function(v){v.operation(function(){for(var y=v.listSelections(),k=y.length-1;k>=0;k--)v.replaceRange("",y[k].anchor,z(y[k].to().line),"+delete");v.scrollIntoView()})},A.upcaseAtCursor=function(v){ae(v,function(y){return y.toUpperCase()})},A.downcaseAtCursor=function(v){ae(v,function(y){return y.toLowerCase()})},A.setSublimeMark=function(v){v.state.sublimeMark&&v.state.sublimeMark.clear(),v.state.sublimeMark=v.setBookmark(v.getCursor())},A.selectToSublimeMark=function(v){var y=v.state.sublimeMark&&v.state.sublimeMark.find();y&&v.setSelection(v.getCursor(),y)},A.deleteToSublimeMark=function(v){var y=v.state.sublimeMark&&v.state.sublimeMark.find();if(y){var k=v.getCursor(),M=y;if(C.cmpPos(k,M)>0){var B=M;M=k,k=B}v.state.sublimeKilled=v.getRange(k,M),v.replaceRange("",k,M)}},A.swapWithSublimeMark=function(v){var y=v.state.sublimeMark&&v.state.sublimeMark.find();y&&(v.state.sublimeMark.clear(),v.state.sublimeMark=v.setBookmark(v.getCursor()),v.setCursor(y))},A.sublimeYank=function(v){v.state.sublimeKilled!=null&&v.replaceSelection(v.state.sublimeKilled,null,"paste")},A.showInCenter=function(v){var y=v.cursorCoords(null,"local");v.scrollTo(null,(y.top+y.bottom)/2-v.getScrollInfo().clientHeight/2)};function W(v){var y=v.getCursor("from"),k=v.getCursor("to");if(C.cmpPos(y,k)==0){var M=I(v,y);if(!M.word)return;y=M.from,k=M.to}return{from:y,to:k,query:v.getRange(y,k),word:M}}function J(v,y){var k=W(v);if(k){var M=k.query,B=v.getSearchCursor(M,y?k.to:k.from);(y?B.findNext():B.findPrevious())?v.setSelection(B.from(),B.to()):(B=v.getSearchCursor(M,y?z(v.firstLine(),0):v.clipPos(z(v.lastLine()))),(y?B.findNext():B.findPrevious())?v.setSelection(B.from(),B.to()):k.word&&v.setSelection(k.from,k.to))}}A.findUnder=function(v){J(v,!0)},A.findUnderPrevious=function(v){J(v,!1)},A.findAllUnder=function(v){var y=W(v);if(y){for(var k=v.getSearchCursor(y.query),M=[],B=-1;k.findNext();)M.push({anchor:k.from(),head:k.to()}),k.from().line<=y.from.line&&k.from().ch<=y.from.ch&&B++;v.setSelections(M,B)}};var S=C.keyMap;S.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Shift-F5":"reverseSortLines","Cmd-F5":"sortLinesInsensitive","Shift-Cmd-F5":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},C.normalizeKeyMap(S.macSublime),S.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Shift-F9":"reverseSortLines","Ctrl-F9":"sortLinesInsensitive","Shift-Ctrl-F9":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},C.normalizeKeyMap(S.pcSublime);var T=S.default==S.macDefault;S.sublime=T?S.macSublime:S.pcSublime})})();(function(G,ue){(function(C){C(Rt())})(function(C){var A=C.commands,z=C.Pos;function P(R,ie){return R.line==ie.line&&R.ch==ie.ch}var O=[];function D(R){O.push(R),O.length>50&&O.shift()}function I(R){if(!O.length)return D(R);O[O.length-1]+=R}function X(R){return O[O.length-(R?Math.min(R,1):1)]||""}function _(){return O.length>1&&O.pop(),X()}var re=null;function H(R,ie,pe,Z,Y){Y==null&&(Y=R.getRange(ie,pe)),Z=="grow"&&re&&re.cm==R&&P(ie,re.pos)&&R.isClean(re.gen)?I(Y):Z!==!1&&D(Y),R.replaceRange("",ie,pe,"+delete"),Z=="grow"?re={cm:R,pos:ie,gen:R.changeGeneration()}:re=null}function q(R,ie,pe){return R.findPosH(ie,pe,"char",!0)}function j(R,ie,pe){return R.findPosH(ie,pe,"word",!0)}function ae(R,ie,pe){return R.findPosV(ie,pe,"line",R.doc.sel.goalColumn)}function W(R,ie,pe){return R.findPosV(ie,pe,"page",R.doc.sel.goalColumn)}function J(R,ie,pe){for(var Z=ie.line,Y=R.getLine(Z),U=/\S/.test(pe<0?Y.slice(0,ie.ch):Y.slice(ie.ch)),me=R.firstLine(),Xe=R.lastLine();;){if(Z+=pe,Z<me||Z>Xe)return R.clipPos(z(Z-pe,pe<0?0:null));Y=R.getLine(Z);var Ge=/\S/.test(Y);if(Ge)U=!0;else if(U)return z(Z,0)}}function S(R,ie,pe){for(var Z=ie.line,Y=ie.ch,U=R.getLine(ie.line),me=!1;;){var Xe=U.charAt(Y+(pe<0?-1:0));if(!Xe){if(Z==(pe<0?R.firstLine():R.lastLine())||(U=R.getLine(Z+pe),!/\S/.test(U)))return z(Z,Y);Z+=pe,Y=pe<0?U.length:0;continue}if(me&&/[!?.]/.test(Xe))return z(Z,Y+(pe>0?1:0));me||(me=/\w/.test(Xe)),Y+=pe}}function T(R,ie,pe){var Z;if(R.findMatchingBracket&&(Z=R.findMatchingBracket(ie,{strict:!0}))&&Z.match&&(Z.forward?1:-1)==pe)return pe>0?z(Z.to.line,Z.to.ch+1):Z.to;for(var Y=!0;;Y=!1){var U=R.getTokenAt(ie),me=z(ie.line,pe<0?U.start:U.end);if(Y&&pe>0&&U.end==ie.ch||!/\w/.test(U.string)){var Xe=R.findPosH(me,pe,"char");if(P(me,Xe))return ie;ie=Xe}else return me}}function v(R,ie){var pe=R.state.emacsPrefix;return pe?(we(R),pe=="-"?-1:Number(pe)):ie?null:1}function y(R){var ie=typeof R=="string"?function(pe){pe.execCommand(R)}:R;return function(pe){var Z=v(pe);ie(pe);for(var Y=1;Y<Z;++Y)ie(pe)}}function k(R,ie,pe,Z){var Y=v(R);Y<0&&(Z=-Z,Y=-Y);for(var U=0;U<Y;++U){var me=pe(R,ie,Z);if(P(me,ie))break;ie=me}return ie}function M(R,ie){var pe=function(Z){Z.extendSelection(k(Z,Z.getCursor(),R,ie))};return pe.motion=!0,pe}function B(R,ie,pe,Z){for(var Y=R.listSelections(),U,me=Y.length;me--;)U=Y[me].head,H(R,U,k(R,U,ie,pe),Z)}function Q(R,ie){if(R.somethingSelected()){for(var pe=R.listSelections(),Z,Y=pe.length;Y--;)Z=pe[Y],H(R,Z.anchor,Z.head,ie);return!0}}function ce(R,ie){if(R.state.emacsPrefix){ie!="-"&&(R.state.emacsPrefix+=ie);return}R.state.emacsPrefix=ie,R.on("keyHandled",xe),R.on("inputRead",Ae)}var le={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0};function xe(R,ie){!R.state.emacsPrefixMap&&!le.hasOwnProperty(ie)&&we(R)}function we(R){R.state.emacsPrefix=null,R.off("keyHandled",xe),R.off("inputRead",Ae)}function Ae(R,ie){var pe=v(R);if(pe>1&&ie.origin=="+input"){for(var Z=ie.text.join(`
`),Y="",U=1;U<pe;++U)Y+=Z;R.replaceSelection(Y)}}function fe(R,ie){typeof ie=="string"&&(/^\d$/.test(ie)||ie=="Ctrl-U")||(R.removeKeyMap(Re),R.state.emacsPrefixMap=!1,R.off("keyHandled",fe),R.off("inputRead",fe))}A.setMark=function(R){R.setCursor(R.getCursor()),R.setExtending(!R.getExtending()),R.on("change",function(){R.setExtending(!1)})};function se(R){R.setExtending(!1),R.setCursor(R.getCursor())}function de(R){var ie=document.createDocumentFragment(),pe=document.createElement("input");return pe.setAttribute("type","text"),pe.style.width="10em",ie.appendChild(document.createTextNode(R+": ")),ie.appendChild(pe),ie}function Me(R,ie,pe){R.openDialog?R.openDialog(de(ie),pe,{bottom:!0}):pe(prompt(ie,""))}function ye(R,ie){var pe=R.getCursor(),Z=R.findPosH(pe,1,"word");R.replaceRange(ie(R.getRange(pe,Z)),pe,Z),R.setCursor(Z)}function De(R){for(var ie=R.getCursor(),pe=ie.line,Z=ie.ch,Y=[];pe>=R.firstLine();){for(var U=R.getLine(pe),me=Z??U.length;me>0;){var Z=U.charAt(--me);if(Z==")")Y.push("(");else if(Z=="]")Y.push("[");else if(Z=="}")Y.push("{");else if(/[\(\{\[]/.test(Z)&&(!Y.length||Y.pop()!=Z))return R.extendSelection(z(pe,me))}--pe,Z=null}}A.killRegion=function(R){H(R,R.getCursor("start"),R.getCursor("end"),!0)},A.killLineEmacs=y(function(R){var ie=R.getCursor(),pe=R.clipPos(z(ie.line)),Z=R.getRange(ie,pe);/\S/.test(Z)||(Z+=`
`,pe=z(ie.line+1,0)),H(R,ie,pe,"grow",Z)}),A.killRingSave=function(R){D(R.getSelection()),se(R)},A.yank=function(R){var ie=R.getCursor();R.replaceRange(X(v(R)),ie,ie,"paste"),R.setSelection(ie,R.getCursor())},A.yankPop=function(R){R.replaceSelection(_(),"around","paste")},A.forwardChar=M(q,1),A.backwardChar=M(q,-1),A.deleteChar=function(R){B(R,q,1,!1)},A.deleteForwardChar=function(R){Q(R,!1)||B(R,q,1,!1)},A.deleteBackwardChar=function(R){Q(R,!1)||B(R,q,-1,!1)},A.forwardWord=M(j,1),A.backwardWord=M(j,-1),A.killWord=function(R){B(R,j,1,"grow")},A.backwardKillWord=function(R){B(R,j,-1,"grow")},A.nextLine=M(ae,1),A.previousLine=M(ae,-1),A.scrollDownCommand=M(W,-1),A.scrollUpCommand=M(W,1),A.backwardParagraph=M(J,-1),A.forwardParagraph=M(J,1),A.backwardSentence=M(S,-1),A.forwardSentence=M(S,1),A.killSentence=function(R){B(R,S,1,"grow")},A.backwardKillSentence=function(R){H(R,R.getCursor(),S(R,R.getCursor(),1),"grow")},A.killSexp=function(R){B(R,T,1,"grow")},A.backwardKillSexp=function(R){B(R,T,-1,"grow")},A.forwardSexp=M(T,1),A.backwardSexp=M(T,-1),A.markSexp=function(R){var ie=R.getCursor();R.setSelection(k(R,ie,T,1),ie)},A.transposeSexps=function(R){var ie=T(R,R.getCursor(),-1),pe=T(R,ie,1),Z=T(R,pe,1),Y=T(R,Z,-1);R.replaceRange(R.getRange(Y,Z)+R.getRange(pe,Y)+R.getRange(ie,pe),ie,Z)},A.backwardUpList=y(De),A.justOneSpace=function(R){for(var ie=R.getCursor(),pe=ie.ch,Z=ie.ch,Y=R.getLine(ie.line);pe&&/\s/.test(Y.charAt(pe-1));)--pe;for(;Z<Y.length&&/\s/.test(Y.charAt(Z));)++Z;R.replaceRange(" ",z(ie.line,pe),z(ie.line,Z))},A.openLine=y(function(R){R.replaceSelection(`
`,"start")}),A.transposeCharsRepeatable=y(function(R){R.execCommand("transposeChars")}),A.capitalizeWord=y(function(R){ye(R,function(ie){var pe=ie.search(/\w/);return pe==-1?ie:ie.slice(0,pe)+ie.charAt(pe).toUpperCase()+ie.slice(pe+1).toLowerCase()})}),A.upcaseWord=y(function(R){ye(R,function(ie){return ie.toUpperCase()})}),A.downcaseWord=y(function(R){ye(R,function(ie){return ie.toLowerCase()})}),A.undoRepeatable=y("undo"),A.keyboardQuit=function(R){R.execCommand("clearSearch"),se(R)},A.newline=y(function(R){R.replaceSelection(`
`,"end")}),A.gotoLine=function(R){var ie=v(R,!0);if(ie!=null&&ie>0)return R.setCursor(ie-1);Me(R,"Goto line",function(pe){var Z;pe&&!isNaN(Z=Number(pe))&&Z==(Z|0)&&Z>0&&R.setCursor(Z-1)})},A.indentRigidly=function(R){R.indentSelection(v(R,!0)||R.getOption("indentUnit"))},A.exchangePointAndMark=function(R){R.setSelection(R.getCursor("head"),R.getCursor("anchor"))},A.quotedInsertTab=y("insertTab"),A.universalArgument=function(ie){ie.state.emacsPrefixMap=!0,ie.addKeyMap(Re),ie.on("keyHandled",fe),ie.on("inputRead",fe)},C.emacs={kill:H,killRegion:Q,repeated:y};var He=C.keyMap.emacs=C.normalizeKeyMap({"Ctrl-W":"killRegion","Ctrl-K":"killLineEmacs","Alt-W":"killRingSave","Ctrl-Y":"yank","Alt-Y":"yankPop","Ctrl-Space":"setMark","Ctrl-Shift-2":"setMark","Ctrl-F":"forwardChar","Ctrl-B":"backwardChar",Right:"forwardChar",Left:"backwardChar","Ctrl-D":"deleteChar",Delete:"deleteForwardChar","Ctrl-H":"deleteBackwardChar",Backspace:"deleteBackwardChar","Alt-F":"forwardWord","Alt-B":"backwardWord","Alt-Right":"forwardWord","Alt-Left":"backwardWord","Alt-D":"killWord","Alt-Backspace":"backwardKillWord","Ctrl-N":"nextLine","Ctrl-P":"previousLine",Down:"nextLine",Up:"previousLine","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":"scrollDownCommand","Ctrl-V":"scrollUpCommand",PageUp:"scrollDownCommand",PageDown:"scrollUpCommand","Ctrl-Up":"backwardParagraph","Ctrl-Down":"forwardParagraph","Alt-{":"backwardParagraph","Alt-}":"forwardParagraph","Alt-A":"backwardSentence","Alt-E":"forwardSentence","Alt-K":"killSentence","Ctrl-X Delete":"backwardKillSentence","Ctrl-Alt-K":"killSexp","Ctrl-Alt-Backspace":"backwardKillSexp","Ctrl-Alt-F":"forwardSexp","Ctrl-Alt-B":"backwardSexp","Shift-Ctrl-Alt-2":"markSexp","Ctrl-Alt-T":"transposeSexps","Ctrl-Alt-U":"backwardUpList","Alt-Space":"justOneSpace","Ctrl-O":"openLine","Ctrl-T":"transposeCharsRepeatable","Alt-C":"capitalizeWord","Alt-U":"upcaseWord","Alt-L":"downcaseWord","Alt-;":"toggleComment","Ctrl-/":"undoRepeatable","Shift-Ctrl--":"undoRepeatable","Ctrl-Z":"undoRepeatable","Cmd-Z":"undoRepeatable","Ctrl-X U":"undoRepeatable","Shift-Ctrl-Z":"redo","Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findPersistentNext","Ctrl-R":"findPersistentPrev","Ctrl-G":"keyboardQuit","Shift-Alt-5":"replace","Alt-/":"autocomplete",Enter:"newlineAndIndent","Ctrl-J":"newline",Tab:"indentAuto","Alt-G G":"gotoLine","Ctrl-X Tab":"indentRigidly","Ctrl-X Ctrl-X":"exchangePointAndMark","Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X K":"close","Ctrl-X H":"selectAll","Ctrl-Q Tab":"quotedInsertTab","Ctrl-U":"universalArgument",fallthrough:"default"}),Re={"Ctrl-G":we};function Ue(R){Re[R]=function(ie){ce(ie,R)},He["Ctrl-"+R]=function(ie){ce(ie,R)},le["Ctrl-"+R]=!0}for(var qe=0;qe<10;++qe)Ue(String(qe));Ue("-")})})();var Rs={exports:{}},Es;function ic(){return Es||(Es=1,function(G,ue){(function(C){C(Rt())})(function(C){function A(P,O,D){var I=P.getWrapperElement(),X;return X=I.appendChild(document.createElement("div")),D?X.className="CodeMirror-dialog CodeMirror-dialog-bottom":X.className="CodeMirror-dialog CodeMirror-dialog-top",typeof O=="string"?X.innerHTML=O:X.appendChild(O),C.addClass(I,"dialog-opened"),X}function z(P,O){P.state.currentNotificationClose&&P.state.currentNotificationClose(),P.state.currentNotificationClose=O}C.defineExtension("openDialog",function(P,O,D){D||(D={}),z(this,null);var I=A(this,P,D.bottom),X=!1,_=this;function re(j){if(typeof j=="string")H.value=j;else{if(X)return;X=!0,C.rmClass(I.parentNode,"dialog-opened"),I.parentNode.removeChild(I),_.focus(),D.onClose&&D.onClose(I)}}var H=I.getElementsByTagName("input")[0],q;return H?(H.focus(),D.value&&(H.value=D.value,D.selectValueOnOpen!==!1&&H.select()),D.onInput&&C.on(H,"input",function(j){D.onInput(j,H.value,re)}),D.onKeyUp&&C.on(H,"keyup",function(j){D.onKeyUp(j,H.value,re)}),C.on(H,"keydown",function(j){D&&D.onKeyDown&&D.onKeyDown(j,H.value,re)||((j.keyCode==27||D.closeOnEnter!==!1&&j.keyCode==13)&&(H.blur(),C.e_stop(j),re()),j.keyCode==13&&O(H.value,j))}),D.closeOnBlur!==!1&&C.on(I,"focusout",function(j){j.relatedTarget!==null&&re()})):(q=I.getElementsByTagName("button")[0])&&(C.on(q,"click",function(){re(),_.focus()}),D.closeOnBlur!==!1&&C.on(q,"blur",re),q.focus()),re}),C.defineExtension("openConfirm",function(P,O,D){z(this,null);var I=A(this,P,D&&D.bottom),X=I.getElementsByTagName("button"),_=!1,re=this,H=1;function q(){_||(_=!0,C.rmClass(I.parentNode,"dialog-opened"),I.parentNode.removeChild(I),re.focus())}X[0].focus();for(var j=0;j<X.length;++j){var ae=X[j];(function(W){C.on(ae,"click",function(J){C.e_preventDefault(J),q(),W&&W(re)})})(O[j]),C.on(ae,"blur",function(){--H,setTimeout(function(){H<=0&&q()},200)}),C.on(ae,"focus",function(){++H})}}),C.defineExtension("openNotification",function(P,O){z(this,re);var D=A(this,P,O&&O.bottom),I=!1,X,_=O&&typeof O.duration<"u"?O.duration:5e3;function re(){I||(I=!0,clearTimeout(X),C.rmClass(D.parentNode,"dialog-opened"),D.parentNode.removeChild(D))}return C.on(D,"click",function(H){C.e_preventDefault(H),re()}),_&&(X=setTimeout(re,_)),re})})}()),Rs.exports}(function(G,ue){(function(C){C(Rt(),Ks(),ic(),_s())})(function(C){function A(P){var O=P.Pos;function D(a,l){var s=a.state.vim;if(!s||s.insertMode)return l.head;var f=s.sel.head;if(!f)return l.head;if(!(s.visualBlock&&l.head.line!=f.line))return l.from()==l.anchor&&!l.empty()&&l.head.line==f.line&&l.head.ch!=f.ch?new O(l.head.line,l.head.ch-1):l.head}var I=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"g<Up>",type:"keyToKey",toKeys:"gk"},{keys:"g<Down>",type:"keyToKey",toKeys:"gj"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"keyToKey",toKeys:"i",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"g$",type:"motion",motion:"moveToEndOfDisplayLine"},{keys:"g^",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"g0",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],X=I.length,_=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"global",shortName:"g"}];function re(a){a.setOption("disableInput",!0),a.setOption("showCursorWhenSelecting",!1),P.signal(a,"vim-mode-change",{mode:"normal"}),a.on("cursorActivity",Pn),Y(a),P.on(a.getInputField(),"paste",T(a))}function H(a){a.setOption("disableInput",!1),a.off("cursorActivity",Pn),P.off(a.getInputField(),"paste",T(a)),a.state.vim=null,$r&&clearTimeout($r)}function q(a,l){this==P.keyMap.vim&&(a.options.$customCursor=null,P.rmClass(a.getWrapperElement(),"cm-fat-cursor")),(!l||l.attach!=j)&&H(a)}function j(a,l){this==P.keyMap.vim&&(a.curOp&&(a.curOp.selectionChanged=!0),a.options.$customCursor=D,P.addClass(a.getWrapperElement(),"cm-fat-cursor")),(!l||l.attach!=j)&&re(a)}P.defineOption("vimMode",!1,function(a,l,s){l&&a.getOption("keyMap")!="vim"?a.setOption("keyMap","vim"):!l&&s!=P.Init&&/^vim/.test(a.getOption("keyMap"))&&a.setOption("keyMap","default")});function ae(a,l){if(l){if(this[a])return this[a];var s=S(a);if(!s)return!1;var f=Ge.findKey(l,s);return typeof f=="function"&&P.signal(l,"vim-keypress",s),f}}var W={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},J={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function S(a){if(a.charAt(0)=="'")return a.charAt(1);var l=a.split(/-(?!$)/),s=l[l.length-1];if(l.length==1&&l[0].length==1)return!1;if(l.length==2&&l[0]=="Shift"&&s.length==1)return!1;for(var f=!1,h=0;h<l.length;h++){var p=l[h];p in W?l[h]=W[p]:f=!0,p in J&&(l[h]=J[p])}return f?(Me(s)&&(l[l.length-1]=s.toLowerCase()),"<"+l.join("-")+">"):!1}function T(a){var l=a.state.vim;return l.onPasteFn||(l.onPasteFn=function(){l.insertMode||(a.setCursor(pt(a.getCursor(),0,1)),Rr.enterInsertMode(a,{},l))}),l.onPasteFn}var v=/[\d]/,y=[P.isWordChar,function(a){return a&&!P.isWordChar(a)&&!/\s/.test(a)}],k=[function(a){return/\S/.test(a)}];function M(a,l){for(var s=[],f=a;f<a+l;f++)s.push(String.fromCharCode(f));return s}var B=M(65,26),Q=M(97,26),ce=M(48,10),le=[].concat(B,Q,ce,["<",">"]),xe=[].concat(B,Q,ce,["-",'"',".",":","_","/"]),we;try{we=new RegExp("^[\\p{Lu}]$","u")}catch{we=/^[A-Z]$/}function Ae(a,l){return l>=a.firstLine()&&l<=a.lastLine()}function fe(a){return/^[a-z]$/.test(a)}function se(a){return"()[]{}".indexOf(a)!=-1}function de(a){return v.test(a)}function Me(a){return we.test(a)}function ye(a){return/^\s*$/.test(a)}function De(a){return".?!".indexOf(a)!=-1}function He(a,l){for(var s=0;s<l.length;s++)if(l[s]==a)return!0;return!1}var Re={};function Ue(a,l,s,f,h){if(l===void 0&&!h)throw Error("defaultValue is required unless callback is provided");if(s||(s="string"),Re[a]={type:s,defaultValue:l,callback:h},f)for(var p=0;p<f.length;p++)Re[f[p]]=Re[a];l&&qe(a,l)}function qe(a,l,s,f){var h=Re[a];f=f||{};var p=f.scope;if(!h)return new Error("Unknown option: "+a);if(h.type=="boolean"){if(l&&l!==!0)return new Error("Invalid argument: "+a+"="+l);l!==!1&&(l=!0)}h.callback?(p!=="local"&&h.callback(l,void 0),p!=="global"&&s&&h.callback(l,s)):(p!=="local"&&(h.value=h.type=="boolean"?!!l:l),p!=="global"&&s&&(s.state.vim.options[a]={value:l}))}function R(a,l,s){var f=Re[a];s=s||{};var h=s.scope;if(!f)return new Error("Unknown option: "+a);if(f.callback){var p=l&&f.callback(void 0,l);return h!=="global"&&p!==void 0?p:h!=="local"?f.callback():void 0}else{var p=h!=="global"&&l&&l.state.vim.options[a];return(p||h!=="local"&&f||{}).value}}Ue("filetype",void 0,"string",["ft"],function(a,l){if(l!==void 0)if(a===void 0){var s=l.getOption("mode");return s=="null"?"":s}else{var s=a==""?"null":a;l.setOption("mode",s)}});var ie=function(){var a=100,l=-1,s=0,f=0,h=new Array(a);function p(x,E,N){var te=l%a,ne=h[te];function $(be){var ge=++l%a,Ne=h[ge];Ne&&Ne.clear(),h[ge]=x.setBookmark(be)}if(ne){var V=ne.find();V&&!Jt(V,E)&&$(E)}else $(E);$(N),s=l,f=l-a+1,f<0&&(f=0)}function m(x,E){l+=E,l>s?l=s:l<f&&(l=f);var N=h[(a+l)%a];if(N&&!N.find()){var te=E>0?1:-1,ne,$=x.getCursor();do if(l+=te,N=h[(a+l)%a],N&&(ne=N.find())&&!Jt($,ne))break;while(l<s&&l>f)}return N}function w(x,E){var N=l,te=m(x,E);return l=N,te&&te.find()}return{cachedCursor:void 0,add:p,find:w,move:m}},pe=function(a){return a?{changes:a.changes,expectCursorActivityForChange:a.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function Z(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=pe()}Z.prototype={exitMacroRecordMode:function(){var a=U.macroModeState;a.onRecordingDone&&a.onRecordingDone(),a.onRecordingDone=void 0,a.isRecording=!1},enterMacroRecordMode:function(a,l){var s=U.registerController.getRegister(l);if(s){if(s.clear(),this.latestRegister=l,a.openDialog){var f=lr("span",{class:"cm-vim-message"},"recording @"+l);this.onRecordingDone=a.openDialog(f,null,{bottom:!0})}this.isRecording=!0}}};function Y(a){return a.state.vim||(a.state.vim={inputState:new rt,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),a.state.vim}var U;function me(){U={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:ie(),macroModeState:new Z,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new qr({}),searchHistoryController:new Xr,exCommandHistoryController:new Xr};for(var a in Re){var l=Re[a];l.value=l.defaultValue}}var Xe,Ge={enterVimMode:re,buildKeyMap:function(){},getRegisterController:function(){return U.registerController},resetVimGlobalState_:me,getVimGlobalState_:function(){return U},maybeInitVimState_:Y,suppressErrorLogging:!1,InsertModeKey:ai,map:function(a,l,s){$t.map(a,l,s)},unmap:function(a,l){return $t.unmap(a,l)},noremap:function(a,l,s){function f(ne){return ne?[ne]:["normal","insert","visual"]}for(var h=f(s),p=I.length,m=X,w=p-m;w<p&&h.length;w++){var x=I[w];if(x.keys==l&&(!s||!x.context||x.context===s)&&x.type.substr(0,2)!=="ex"&&x.type.substr(0,3)!=="key"){var E={};for(var N in x)E[N]=x[N];E.keys=a,s&&!E.context&&(E.context=s),this._mapCommand(E);var te=f(x.context);h=h.filter(function(ne){return te.indexOf(ne)===-1})}}},mapclear:function(a){var l=I.length,s=X,f=I.slice(0,l-s);if(I=I.slice(l-s),a)for(var h=f.length-1;h>=0;h--){var p=f[h];if(a!==p.context)if(p.context)this._mapCommand(p);else{var m=["normal","insert","visual"];for(var w in m)if(m[w]!==a){var x={};for(var E in p)x[E]=p[E];x.context=m[w],this._mapCommand(x)}}}},setOption:qe,getOption:R,defineOption:Ue,defineEx:function(a,l,s){if(!l)l=a;else if(a.indexOf(l)!==0)throw new Error('(Vim.defineEx) "'+l+'" is not a prefix of "'+a+'", command not registered');Yi[a]=s,$t.commandMap_[l]={name:a,shortName:l,type:"api"}},handleKey:function(a,l,s){var f=this.findKey(a,l,s);if(typeof f=="function")return f()},multiSelectHandleKey:si,findKey:function(a,l,s){var f=Y(a);function h(){var N=U.macroModeState;if(N.isRecording){if(l=="q")return N.exitMacroRecordMode(),it(a),!0;s!="mapping"&&Na(N,l)}}function p(){if(l=="<Esc>"){if(f.visualMode)Qt(a);else if(f.insertMode)tn(a);else return;return it(a),!0}}function m(N){for(var te;N;)te=/<\w+-.+?>|<\w+>|./.exec(N),l=te[0],N=N.substring(te.index+l.length),Ge.handleKey(a,l,"mapping")}function w(){if(p())return!0;for(var N=f.inputState.keyBuffer=f.inputState.keyBuffer+l,te=l.length==1,ne=_e.matchCommand(N,I,f.inputState,"insert");N.length>1&&ne.type!="full";){var N=f.inputState.keyBuffer=N.slice(1),$=_e.matchCommand(N,I,f.inputState,"insert");$.type!="none"&&(ne=$)}if(ne.type=="none")return it(a),!1;if(ne.type=="partial")return Xe&&window.clearTimeout(Xe),Xe=window.setTimeout(function(){f.insertMode&&f.inputState.keyBuffer&&it(a)},R("insertModeEscKeysTimeout")),!te;if(Xe&&window.clearTimeout(Xe),te){for(var V=a.listSelections(),be=0;be<V.length;be++){var ge=V[be].head;a.replaceRange("",pt(ge,0,-(N.length-1)),ge,"+input")}U.macroModeState.lastInsertModeChanges.changes.pop()}return it(a),ne.command}function x(){if(h()||p())return!0;var N=f.inputState.keyBuffer=f.inputState.keyBuffer+l;if(/^[1-9]\d*$/.test(N))return!0;var te=/^(\d*)(.*)$/.exec(N);if(!te)return it(a),!1;var ne=f.visualMode?"visual":"normal",$=te[2]||te[1];f.inputState.operatorShortcut&&f.inputState.operatorShortcut.slice(-1)==$&&($=f.inputState.operatorShortcut);var V=_e.matchCommand($,I,f.inputState,ne);return V.type=="none"?(it(a),!1):V.type=="partial"?!0:V.type=="clear"?(it(a),!0):(f.inputState.keyBuffer="",te=/^(\d*)(.*)$/.exec(N),te[1]&&te[1]!="0"&&f.inputState.pushRepeatDigit(te[1]),V.command)}var E;return f.insertMode?E=w():E=x(),E===!1?!f.insertMode&&l.length===1?function(){return!0}:void 0:E===!0?function(){return!0}:function(){return a.operation(function(){a.curOp.isVimOp=!0;try{E.type=="keyToKey"?m(E.toKeys):_e.processCommand(a,f,E)}catch(N){throw a.state.vim=void 0,Y(a),Ge.suppressErrorLogging||console.log(N),N}return!0})}},handleEx:function(a,l){$t.processCommand(a,l)},defineMotion:La,defineAction:gn,defineOperator:Ta,mapCommand:In,_mapCommand:Ji,defineRegister:gr,exitVisualMode:Qt,exitInsertMode:tn};function rt(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}rt.prototype.pushRepeatDigit=function(a){this.operator?this.motionRepeat=this.motionRepeat.concat(a):this.prefixRepeat=this.prefixRepeat.concat(a)},rt.prototype.getRepeat=function(){var a=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(a=1,this.prefixRepeat.length>0&&(a*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(a*=parseInt(this.motionRepeat.join(""),10))),a};function it(a,l){a.state.vim.inputState=new rt,P.signal(a,"vim-command-done",l)}function dt(a,l,s){this.clear(),this.keyBuffer=[a||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!l,this.blockwise=!!s}dt.prototype={setText:function(a,l,s){this.keyBuffer=[a||""],this.linewise=!!l,this.blockwise=!!s},pushText:function(a,l){l&&(this.linewise||this.keyBuffer.push(`
`),this.linewise=!0),this.keyBuffer.push(a)},pushInsertModeChanges:function(a){this.insertModeChanges.push(pe(a))},pushSearchQuery:function(a){this.searchQueries.push(a)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}};function gr(a,l){var s=U.registerController.registers;if(!a||a.length!=1)throw Error("Register name must be 1 character");if(s[a])throw Error("Register already defined "+a);s[a]=l,xe.push(a)}function qr(a){this.registers=a,this.unnamedRegister=a['"']=new dt,a["."]=new dt,a[":"]=new dt,a["/"]=new dt}qr.prototype={pushText:function(a,l,s,f,h){if(a!=="_"){f&&s.charAt(s.length-1)!==`
`&&(s+=`
`);var p=this.isValidRegister(a)?this.getRegister(a):null;if(!p){switch(l){case"yank":this.registers[0]=new dt(s,f,h);break;case"delete":case"change":s.indexOf(`
`)==-1?this.registers["-"]=new dt(s,f):(this.shiftNumericRegisters_(),this.registers[1]=new dt(s,f));break}this.unnamedRegister.setText(s,f,h);return}var m=Me(a);m?p.pushText(s,f):p.setText(s,f,h),this.unnamedRegister.setText(p.toString(),f)}},getRegister:function(a){return this.isValidRegister(a)?(a=a.toLowerCase(),this.registers[a]||(this.registers[a]=new dt),this.registers[a]):this.unnamedRegister},isValidRegister:function(a){return a&&He(a,xe)},shiftNumericRegisters_:function(){for(var a=9;a>=2;a--)this.registers[a]=this.getRegister(""+(a-1))}};function Xr(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}Xr.prototype={nextMatch:function(a,l){var s=this.historyBuffer,f=l?-1:1;this.initialPrefix===null&&(this.initialPrefix=a);for(var h=this.iterator+f;l?h>=0:h<s.length;h+=f)for(var p=s[h],m=0;m<=p.length;m++)if(this.initialPrefix==p.substring(0,m))return this.iterator=h,p;if(h>=s.length)return this.iterator=s.length,this.initialPrefix;if(h<0)return a},pushInput:function(a){var l=this.historyBuffer.indexOf(a);l>-1&&this.historyBuffer.splice(l,1),a.length&&this.historyBuffer.push(a)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var _e={matchCommand:function(a,l,s,f){var h=zi(a,l,f,s);if(!h.full&&!h.partial)return{type:"none"};if(!h.full&&h.partial)return{type:"partial"};for(var p,m=0;m<h.full.length;m++){var w=h.full[m];p||(p=w)}if(p.keys.slice(-11)=="<character>"){var x=Ma(a);if(!x||x.length>1)return{type:"clear"};s.selectedCharacter=x}return{type:"full",command:p}},processCommand:function(a,l,s){switch(l.inputState.repeatOverride=s.repeatOverride,s.type){case"motion":this.processMotion(a,l,s);break;case"operator":this.processOperator(a,l,s);break;case"operatorMotion":this.processOperatorMotion(a,l,s);break;case"action":this.processAction(a,l,s);break;case"search":this.processSearch(a,l,s);break;case"ex":case"keyToEx":this.processEx(a,l,s);break}},processMotion:function(a,l,s){l.inputState.motion=s.motion,l.inputState.motionArgs=yn(s.motionArgs),this.evalInput(a,l)},processOperator:function(a,l,s){var f=l.inputState;if(f.operator)if(f.operator==s.operator){f.motion="expandToLine",f.motionArgs={linewise:!0},this.evalInput(a,l);return}else it(a);f.operator=s.operator,f.operatorArgs=yn(s.operatorArgs),s.keys.length>1&&(f.operatorShortcut=s.keys),s.exitVisualBlock&&(l.visualBlock=!1,yr(a)),l.visualMode&&this.evalInput(a,l)},processOperatorMotion:function(a,l,s){var f=l.visualMode,h=yn(s.operatorMotionArgs);h&&f&&h.visualLine&&(l.visualLine=!0),this.processOperator(a,l,s),f||this.processMotion(a,l,s)},processAction:function(a,l,s){var f=l.inputState,h=f.getRepeat(),p=!!h,m=yn(s.actionArgs)||{};f.selectedCharacter&&(m.selectedCharacter=f.selectedCharacter),s.operator&&this.processOperator(a,l,s),s.motion&&this.processMotion(a,l,s),(s.motion||s.operator)&&this.evalInput(a,l),m.repeat=h||1,m.repeatIsExplicit=p,m.registerName=f.registerName,it(a),l.lastMotion=null,s.isEdit&&this.recordLastEdit(l,f,s),Rr[s.action](a,m,l)},processSearch:function(a,l,s){if(!a.getSearchCursor)return;var f=s.searchArgs.forward,h=s.searchArgs.wholeWordOnly;gt(a).setReversed(!f);var p=f?"/":"?",m=gt(a).getQuery(),w=a.getScrollInfo();function x(ge,Ne,We){U.searchHistoryController.pushInput(ge),U.searchHistoryController.reset();try{Nt(a,ge,Ne,We)}catch{Le(a,"Invalid regex: "+ge),it(a);return}_e.processMotion(a,l,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:s.searchArgs.toJumplist}})}function E(ge){a.scrollTo(w.left,w.top),x(ge,!0,!0);var Ne=U.macroModeState;Ne.isRecording&&Fa(Ne,ge)}function N(ge,Ne,We){var Fe=P.keyName(ge),Ye,yt;Fe=="Up"||Fe=="Down"?(Ye=Fe=="Up",yt=ge.target?ge.target.selectionEnd:0,Ne=U.searchHistoryController.nextMatch(Ne,Ye)||"",We(Ne),yt&&ge.target&&(ge.target.selectionEnd=ge.target.selectionStart=Math.min(yt,ge.target.value.length))):Fe!="Left"&&Fe!="Right"&&Fe!="Ctrl"&&Fe!="Alt"&&Fe!="Shift"&&U.searchHistoryController.reset();var st;try{st=Nt(a,Ne,!0,!0)}catch{}st?a.scrollIntoView(Rn(a,!f,st),30):(en(a),a.scrollTo(w.left,w.top))}function te(ge,Ne,We){var Fe=P.keyName(ge);Fe=="Esc"||Fe=="Ctrl-C"||Fe=="Ctrl-["||Fe=="Backspace"&&Ne==""?(U.searchHistoryController.pushInput(Ne),U.searchHistoryController.reset(),Nt(a,m),en(a),a.scrollTo(w.left,w.top),P.e_stop(ge),it(a),We(),a.focus()):Fe=="Up"||Fe=="Down"?P.e_stop(ge):Fe=="Ctrl-U"&&(P.e_stop(ge),We(""))}switch(s.searchArgs.querySrc){case"prompt":var ne=U.macroModeState;if(ne.isPlaying){var be=ne.replaySearchQueries.shift();x(be,!0,!1)}else Vr(a,{onClose:E,prefix:p,desc:"(JavaScript regexp)",onKeyUp:N,onKeyDown:te});break;case"wordUnderCursor":var $=Ir(a,!1,!0,!1,!0),V=!0;if($||($=Ir(a,!1,!0,!1,!1),V=!1),!$)return;var be=a.getLine($.start.line).substring($.start.ch,$.end.ch);V&&h?be="\\b"+be+"\\b":be=vt(be),U.jumpList.cachedCursor=a.getCursor(),a.setCursor($.start),x(be,!0,!1);break}},processEx:function(a,l,s){function f(p){U.exCommandHistoryController.pushInput(p),U.exCommandHistoryController.reset(),$t.processCommand(a,p),it(a)}function h(p,m,w){var x=P.keyName(p),E,N;(x=="Esc"||x=="Ctrl-C"||x=="Ctrl-["||x=="Backspace"&&m=="")&&(U.exCommandHistoryController.pushInput(m),U.exCommandHistoryController.reset(),P.e_stop(p),it(a),w(),a.focus()),x=="Up"||x=="Down"?(P.e_stop(p),E=x=="Up",N=p.target?p.target.selectionEnd:0,m=U.exCommandHistoryController.nextMatch(m,E)||"",w(m),N&&p.target&&(p.target.selectionEnd=p.target.selectionStart=Math.min(N,p.target.value.length))):x=="Ctrl-U"?(P.e_stop(p),w("")):x!="Left"&&x!="Right"&&x!="Ctrl"&&x!="Alt"&&x!="Shift"&&U.exCommandHistoryController.reset()}s.type=="keyToEx"?$t.processCommand(a,s.exArgs.input):l.visualMode?Vr(a,{onClose:f,prefix:":",value:"'<,'>",onKeyDown:h,selectValueOnOpen:!1}):Vr(a,{onClose:f,prefix:":",onKeyDown:h})},evalInput:function(a,l){var s=l.inputState,f=s.motion,h=s.motionArgs||{},p=s.operator,m=s.operatorArgs||{},w=s.registerName,x=l.sel,E=$e(l.visualMode?Dt(a,x.head):a.getCursor("head")),N=$e(l.visualMode?Dt(a,x.anchor):a.getCursor("anchor")),te=$e(E),ne=$e(N),$,V,be;if(p&&this.recordLastEdit(l,s),s.repeatOverride!==void 0?be=s.repeatOverride:be=s.getRepeat(),be>0&&h.explicitRepeat?h.repeatIsExplicit=!0:(h.noRepeat||!h.explicitRepeat&&be===0)&&(be=1,h.repeatIsExplicit=!1),s.selectedCharacter&&(h.selectedCharacter=m.selectedCharacter=s.selectedCharacter),h.repeat=be,it(a),f){var ge=Yt[f](a,E,h,l,s);if(l.lastMotion=Yt[f],!ge)return;if(h.toJumplist){var Ne=U.jumpList,We=Ne.cachedCursor;We?(Ui(a,We,ge),delete Ne.cachedCursor):Ui(a,E,ge)}ge instanceof Array?(V=ge[0],$=ge[1]):$=ge,$||($=$e(E)),l.visualMode?(l.visualBlock&&$.ch===1/0||($=Dt(a,$)),V&&(V=Dt(a,V)),V=V||ne,x.anchor=V,x.head=$,yr(a),or(a,l,"<",Qe(V,$)?V:$),or(a,l,">",Qe(V,$)?$:V)):p||($=Dt(a,$),a.setCursor($.line,$.ch))}if(p){if(m.lastSel){V=ne;var Fe=m.lastSel,Ye=Math.abs(Fe.head.line-Fe.anchor.line),yt=Math.abs(Fe.head.ch-Fe.anchor.ch);Fe.visualLine?$=new O(ne.line+Ye,ne.ch):Fe.visualBlock?$=new O(ne.line+Ye,ne.ch+yt):Fe.head.line==Fe.anchor.line?$=new O(ne.line,ne.ch+yt):$=new O(ne.line+Ye,ne.ch),l.visualMode=!0,l.visualLine=Fe.visualLine,l.visualBlock=Fe.visualBlock,x=l.sel={anchor:V,head:$},yr(a)}else l.visualMode&&(m.lastSel={anchor:$e(x.anchor),head:$e(x.head),visualBlock:l.visualBlock,visualLine:l.visualLine});var st,kt,et,je,bt;if(l.visualMode){if(st=Kt(x.head,x.anchor),kt=Ee(x.head,x.anchor),et=l.visualLine||m.linewise,je=l.visualBlock?"block":et?"line":"char",bt=bn(a,{anchor:st,head:kt},je),et){var Bt=bt.ranges;if(je=="block")for(var Ct=0;Ct<Bt.length;Ct++)Bt[Ct].head.ch=Je(a,Bt[Ct].head.line);else je=="line"&&(Bt[0].head=new O(Bt[0].head.line+1,0))}}else{if(st=$e(V||ne),kt=$e($||te),Qe(kt,st)){var rr=st;st=kt,kt=rr}et=h.linewise||m.linewise,et?$n(a,st,kt):h.forward&&Oa(a,st,kt),je="char";var nr=!h.inclusive||et;bt=bn(a,{anchor:st,head:kt},je,nr)}a.setSelections(bt.ranges,bt.primary),l.lastMotion=null,m.repeat=be,m.registerName=w,m.linewise=et;var ui=Vn[p](a,m,bt.ranges,ne,$);l.visualMode&&Qt(a,ui!=null),ui&&a.setCursor(ui)}},recordLastEdit:function(a,l,s){var f=U.macroModeState;f.isPlaying||(a.lastEditInputState=l,a.lastEditActionCommand=s,f.lastInsertModeChanges.changes=[],f.lastInsertModeChanges.expectCursorActivityForChange=!1,f.lastInsertModeChanges.visualBlock=a.visualBlock?a.sel.head.line-a.sel.anchor.line:0)}},Yt={moveToTopLine:function(a,l,s){var f=En(a).top+s.repeat-1;return new O(f,tr(a.getLine(f)))},moveToMiddleLine:function(a){var l=En(a),s=Math.floor((l.top+l.bottom)*.5);return new O(s,tr(a.getLine(s)))},moveToBottomLine:function(a,l,s){var f=En(a).bottom-s.repeat+1;return new O(f,tr(a.getLine(f)))},expandToLine:function(a,l,s){var f=l;return new O(f.line+s.repeat-1,1/0)},findNext:function(a,l,s){var f=gt(a),h=f.getQuery();if(h){var p=!s.forward;return p=f.isReversed()?!p:p,Br(a,h),Rn(a,p,h,s.repeat)}},findAndSelectNextInclusive:function(a,l,s,f,h){var p=gt(a),m=p.getQuery();if(m){var w=!s.forward;w=p.isReversed()?!w:w;var x=Gi(a,w,m,s.repeat,f);if(x){if(h.operator)return x;var E=x[0],N=new O(x[1].line,x[1].ch-1);if(f.visualMode){(f.visualLine||f.visualBlock)&&(f.visualLine=!1,f.visualBlock=!1,P.signal(a,"vim-mode-change",{mode:"visual",subMode:""}));var te=f.sel.anchor;if(te)return p.isReversed()?s.forward?[te,E]:[te,N]:s.forward?[te,N]:[te,E]}else f.visualMode=!0,f.visualLine=!1,f.visualBlock=!1,P.signal(a,"vim-mode-change",{mode:"visual",subMode:""});return w?[N,E]:[E,N]}}},goToMark:function(a,l,s,f){var h=ri(a,f,s.selectedCharacter);return h?s.linewise?{line:h.line,ch:tr(a.getLine(h.line))}:h:null},moveToOtherHighlightedEnd:function(a,l,s,f){if(f.visualBlock&&s.sameLine){var h=f.sel;return[Dt(a,new O(h.anchor.line,h.head.ch)),Dt(a,new O(h.head.line,h.anchor.ch))]}else return[f.sel.head,f.sel.anchor]},jumpToMark:function(a,l,s,f){for(var h=l,p=0;p<s.repeat;p++){var m=h;for(var w in f.marks)if(fe(w)){var x=f.marks[w].find(),E=s.forward?Qe(x,m):Qe(m,x);if(!E&&!(s.linewise&&x.line==m.line)){var N=Jt(m,h),te=s.forward?mn(m,x,h):mn(h,x,m);(N||te)&&(h=x)}}}return s.linewise&&(h=new O(h.line,tr(a.getLine(h.line)))),h},moveByCharacters:function(a,l,s){var f=l,h=s.repeat,p=s.forward?f.ch+h:f.ch-h;return new O(f.line,p)},moveByLines:function(a,l,s,f){var h=l,p=h.ch;switch(f.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:p=f.lastHPos;break;default:f.lastHPos=p}var m=s.repeat+(s.repeatOffset||0),w=s.forward?h.line+m:h.line-m,x=a.firstLine(),E=a.lastLine(),N=a.findPosV(h,s.forward?m:-m,"line",f.lastHSPos),te=s.forward?N.line>w:N.line<w;return te&&(w=N.line,p=N.ch),w<x&&h.line==x?this.moveToStartOfLine(a,l,s,f):w>E&&h.line==E?Qr(a,l,s,f,!0):(s.toFirstChar&&(p=tr(a.getLine(w)),f.lastHPos=p),f.lastHSPos=a.charCoords(new O(w,p),"div").left,new O(w,p))},moveByDisplayLines:function(a,l,s,f){var h=l;switch(f.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:f.lastHSPos=a.charCoords(h,"div").left}var p=s.repeat,m=a.findPosV(h,s.forward?p:-p,"line",f.lastHSPos);if(m.hitSide)if(s.forward)var w=a.charCoords(m,"div"),x={top:w.top+8,left:f.lastHSPos},m=a.coordsChar(x,"div");else{var E=a.charCoords(new O(a.firstLine(),0),"div");E.left=f.lastHSPos,m=a.coordsChar(E,"div")}return f.lastHPos=m.ch,m},moveByPage:function(a,l,s){var f=l,h=s.repeat;return a.findPosV(f,s.forward?h:-h,"page")},moveByParagraph:function(a,l,s){var f=s.forward?1:-1;return kn(a,l,s.repeat,f)},moveBySentence:function(a,l,s){var f=s.forward?1:-1;return ft(a,l,s.repeat,f)},moveByScroll:function(a,l,s,f){var h=a.getScrollInfo(),p=null,m=s.repeat;m||(m=h.clientHeight/(2*a.defaultTextHeight()));var w=a.charCoords(l,"local");if(s.repeat=m,p=Yt.moveByDisplayLines(a,l,s,f),!p)return null;var x=a.charCoords(p,"local");return a.scrollTo(null,h.top+x.top-w.top),p},moveByWords:function(a,l,s){return Pa(a,l,s.repeat,!!s.forward,!!s.wordEnd,!!s.bigWord)},moveTillCharacter:function(a,l,s){var f=s.repeat,h=Zr(a,f,s.forward,s.selectedCharacter),p=s.forward?-1:1;return Cn(p,s),h?(h.ch+=p,h):null},moveToCharacter:function(a,l,s){var f=s.repeat;return Cn(0,s),Zr(a,f,s.forward,s.selectedCharacter)||l},moveToSymbol:function(a,l,s){var f=s.repeat;return Pr(a,f,s.forward,s.selectedCharacter)||l},moveToColumn:function(a,l,s,f){var h=s.repeat;return f.lastHPos=h-1,f.lastHSPos=a.charCoords(l,"div").left,Dr(a,h)},moveToEol:function(a,l,s,f){return Qr(a,l,s,f,!1)},moveToFirstNonWhiteSpaceCharacter:function(a,l){var s=l;return new O(s.line,tr(a.getLine(s.line)))},moveToMatchedSymbol:function(a,l){for(var s=l,f=s.line,h=s.ch,p=a.getLine(f),m;h<p.length;h++)if(m=p.charAt(h),m&&se(m)){var w=a.getTokenTypeAt(new O(f,h+1));if(w!=="string"&&w!=="comment")break}if(h<p.length){var x=h==="<"||h===">"?/[(){}[\]<>]/:/[(){}[\]]/,E=a.findMatchingBracket(new O(f,h),{bracketRegex:x});return E.to}else return s},moveToStartOfLine:function(a,l){return new O(l.line,0)},moveToLineOrEdgeOfDocument:function(a,l,s){var f=s.forward?a.lastLine():a.firstLine();return s.repeatIsExplicit&&(f=s.repeat-a.getOption("firstLineNumber")),new O(f,tr(a.getLine(f)))},moveToStartOfDisplayLine:function(a){return a.execCommand("goLineLeft"),a.getCursor()},moveToEndOfDisplayLine:function(a){a.execCommand("goLineRight");var l=a.getCursor();return l.sticky=="before"&&l.ch--,l},textObjectManipulation:function(a,l,s,f){var h={"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"},p={"'":!0,'"':!0,"`":!0},m=s.selectedCharacter;m=="b"?m="(":m=="B"&&(m="{");var w=!s.textObjectInner,x;if(h[m])x=Oe(a,l,m,w);else if(p[m])x=kr(a,l,m,w);else if(m==="W")x=Ir(a,w,!0,!0);else if(m==="w")x=Ir(a,w,!0,!1);else if(m==="p")if(x=kn(a,l,s.repeat,0,w),s.linewise=!0,f.visualMode)f.visualLine||(f.visualLine=!0);else{var E=f.inputState.operatorArgs;E&&(E.linewise=!0),x.end.line--}else if(m==="t")x=Ra(a,l,w);else if(m==="s"){var N=a.getLine(l.line);l.ch>0&&De(N[l.ch])&&(l.ch-=1);var te=ei(a,l,s.repeat,1,w),ne=ei(a,l,s.repeat,-1,w);ye(a.getLine(ne.line)[ne.ch])&&ye(a.getLine(te.line)[te.ch-1])&&(ne={line:ne.line,ch:ne.ch+1}),x={start:ne,end:te}}else return null;return a.state.vim.visualMode?Jr(a,x.start,x.end):[x.start,x.end]},repeatLastCharacterSearch:function(a,l,s){var f=U.lastCharacterSearch,h=s.repeat,p=s.forward===f.forward,m=(f.increment?1:0)*(p?-1:1);a.moveH(-m,"char"),s.inclusive=!!p;var w=Zr(a,h,p,f.selectedCharacter);return w?(w.ch+=m,w):(a.moveH(m,"char"),l)}};function La(a,l){Yt[a]=l}function Zn(a,l){for(var s=[],f=0;f<l;f++)s.push(a);return s}var Vn={change:function(a,l,s){var f,h,p=a.state.vim,m=s[0].anchor,w=s[0].head;if(p.visualMode)if(l.fullLine)w.ch=Number.MAX_VALUE,w.line--,a.setSelection(m,w),h=a.getSelection(),a.replaceSelection(""),f=m;else{h=a.getSelection();var ne=Zn("",s.length);a.replaceSelections(ne),f=Kt(s[0].head,s[0].anchor)}else{h=a.getRange(m,w);var x=p.lastEditInputState||{};if(x.motion=="moveByWords"&&!ye(h)){var E=/\s+$/.exec(h);E&&x.motionArgs&&x.motionArgs.forward&&(w=pt(w,0,-E[0].length),h=h.slice(0,-E[0].length))}var N=new O(m.line-1,Number.MAX_VALUE),te=a.firstLine()==a.lastLine();w.line>a.lastLine()&&l.linewise&&!te?a.replaceRange("",N,w):a.replaceRange("",m,w),l.linewise&&(te||(a.setCursor(N),P.commands.newlineAndIndent(a)),m.ch=Number.MAX_VALUE),f=m}U.registerController.pushText(l.registerName,"change",h,l.linewise,s.length>1),Rr.enterInsertMode(a,{head:f},a.state.vim)},delete:function(a,l,s){var f,h,p=a.state.vim;if(p.visualBlock){h=a.getSelection();var x=Zn("",s.length);a.replaceSelections(x),f=Kt(s[0].head,s[0].anchor)}else{var m=s[0].anchor,w=s[0].head;l.linewise&&w.line!=a.firstLine()&&m.line==a.lastLine()&&m.line==w.line-1&&(m.line==a.firstLine()?m.ch=0:m=new O(m.line-1,Je(a,m.line-1))),h=a.getRange(m,w),a.replaceRange("",m,w),f=m,l.linewise&&(f=Yt.moveToFirstNonWhiteSpaceCharacter(a,m))}return U.registerController.pushText(l.registerName,"delete",h,l.linewise,p.visualBlock),Dt(a,f)},indent:function(a,l,s){var f=a.state.vim;if(a.indentMore)for(var h=f.visualMode?l.repeat:1,p=0;p<h;p++)l.indentRight?a.indentMore():a.indentLess();else{var m=s[0].anchor.line,w=f.visualBlock?s[s.length-1].anchor.line:s[0].head.line,h=f.visualMode?l.repeat:1;l.linewise&&w--;for(var x=m;x<=w;x++)for(var p=0;p<h;p++)a.indentLine(x,l.indentRight)}return Yt.moveToFirstNonWhiteSpaceCharacter(a,s[0].anchor)},indentAuto:function(a,l,s){return a.execCommand("indentAuto"),Yt.moveToFirstNonWhiteSpaceCharacter(a,s[0].anchor)},changeCase:function(a,l,s,f,h){for(var p=a.getSelections(),m=[],w=l.toLower,x=0;x<p.length;x++){var E=p[x],N="";if(w===!0)N=E.toLowerCase();else if(w===!1)N=E.toUpperCase();else for(var te=0;te<E.length;te++){var ne=E.charAt(te);N+=Me(ne)?ne.toLowerCase():ne.toUpperCase()}m.push(N)}return a.replaceSelections(m),l.shouldMoveCursor?h:!a.state.vim.visualMode&&l.linewise&&s[0].anchor.line+1==s[0].head.line?Yt.moveToFirstNonWhiteSpaceCharacter(a,f):l.linewise?f:Kt(s[0].anchor,s[0].head)},yank:function(a,l,s,f){var h=a.state.vim,p=a.getSelection(),m=h.visualMode?Kt(h.sel.anchor,h.sel.head,s[0].head,s[0].anchor):f;return U.registerController.pushText(l.registerName,"yank",p,l.linewise,h.visualBlock),m}};function Ta(a,l){Vn[a]=l}var Rr={jumpListWalk:function(a,l,s){if(!s.visualMode){var f=l.repeat,h=l.forward,p=U.jumpList,m=p.move(a,h?f:-f),w=m?m.find():void 0;w=w||a.getCursor(),a.setCursor(w)}},scroll:function(a,l,s){if(!s.visualMode){var f=l.repeat||1,h=a.defaultTextHeight(),p=a.getScrollInfo().top,m=h*f,w=l.forward?p+m:p-m,x=$e(a.getCursor()),E=a.charCoords(x,"local");if(l.forward)w>E.top?(x.line+=(w-E.top)/h,x.line=Math.ceil(x.line),a.setCursor(x),E=a.charCoords(x,"local"),a.scrollTo(null,E.top)):a.scrollTo(null,w);else{var N=w+a.getScrollInfo().clientHeight;N<E.bottom?(x.line-=(E.bottom-N)/h,x.line=Math.floor(x.line),a.setCursor(x),E=a.charCoords(x,"local"),a.scrollTo(null,E.bottom-a.getScrollInfo().clientHeight)):a.scrollTo(null,w)}}},scrollToCursor:function(a,l){var s=a.getCursor().line,f=a.charCoords(new O(s,0),"local"),h=a.getScrollInfo().clientHeight,p=f.top;switch(l.position){case"center":p=f.bottom-h/2;break;case"bottom":var m=new O(s,a.getLine(s).length-1),w=a.charCoords(m,"local"),x=w.bottom-p;p=p-h+x;break}a.scrollTo(null,p)},replayMacro:function(a,l,s){var f=l.selectedCharacter,h=l.repeat,p=U.macroModeState;for(f=="@"?f=p.latestRegister:p.latestRegister=f;h--;)rn(a,s,p,f)},enterMacroRecordMode:function(a,l){var s=U.macroModeState,f=l.selectedCharacter;U.registerController.isValidRegister(f)&&s.enterMacroRecordMode(a,f)},toggleOverwrite:function(a){a.state.overwrite?(a.toggleOverwrite(!1),a.setOption("keyMap","vim-insert"),P.signal(a,"vim-mode-change",{mode:"insert"})):(a.toggleOverwrite(!0),a.setOption("keyMap","vim-replace"),P.signal(a,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(a,l,s){if(!a.getOption("readOnly")){s.insertMode=!0,s.insertModeRepeat=l&&l.repeat||1;var f=l?l.insertAt:null,h=s.sel,p=l.head||a.getCursor("head"),m=a.listSelections().length;if(f=="eol")p=new O(p.line,Je(a,p.line));else if(f=="bol")p=new O(p.line,0);else if(f=="charAfter")p=pt(p,0,1);else if(f=="firstNonBlank")p=Yt.moveToFirstNonWhiteSpaceCharacter(a,p);else if(f=="startOfSelectedArea"){if(!s.visualMode)return;s.visualBlock?(p=new O(Math.min(h.head.line,h.anchor.line),Math.min(h.head.ch,h.anchor.ch)),m=Math.abs(h.head.line-h.anchor.line)+1):h.head.line<h.anchor.line?p=h.head:p=new O(h.anchor.line,0)}else if(f=="endOfSelectedArea"){if(!s.visualMode)return;s.visualBlock?(p=new O(Math.min(h.head.line,h.anchor.line),Math.max(h.head.ch,h.anchor.ch)+1),m=Math.abs(h.head.line-h.anchor.line)+1):h.head.line>=h.anchor.line?p=pt(h.head,0,1):p=new O(h.anchor.line,0)}else if(f=="inplace"){if(s.visualMode)return}else f=="lastEdit"&&(p=ni(a)||p);a.setOption("disableInput",!1),l&&l.replace?(a.toggleOverwrite(!0),a.setOption("keyMap","vim-replace"),P.signal(a,"vim-mode-change",{mode:"replace"})):(a.toggleOverwrite(!1),a.setOption("keyMap","vim-insert"),P.signal(a,"vim-mode-change",{mode:"insert"})),U.macroModeState.isPlaying||(a.on("change",Qi),P.on(a.getInputField(),"keydown",oi)),s.visualMode&&Qt(a),Cr(a,p,m)}},toggleVisualMode:function(a,l,s){var f=l.repeat,h=a.getCursor(),p;s.visualMode?s.visualLine^l.linewise||s.visualBlock^l.blockwise?(s.visualLine=!!l.linewise,s.visualBlock=!!l.blockwise,P.signal(a,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""}),yr(a)):Qt(a):(s.visualMode=!0,s.visualLine=!!l.linewise,s.visualBlock=!!l.blockwise,p=Dt(a,new O(h.line,h.ch+f-1)),s.sel={anchor:h,head:p},P.signal(a,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""}),yr(a),or(a,s,"<",Kt(h,p)),or(a,s,">",Ee(h,p)))},reselectLastSelection:function(a,l,s){var f=s.lastSelection;if(s.visualMode&&xn(a,s),f){var h=f.anchorMark.find(),p=f.headMark.find();if(!h||!p)return;s.sel={anchor:h,head:p},s.visualMode=!0,s.visualLine=f.visualLine,s.visualBlock=f.visualBlock,yr(a),or(a,s,"<",Kt(h,p)),or(a,s,">",Ee(h,p)),P.signal(a,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""})}},joinLines:function(a,l,s){var f,h;if(s.visualMode){if(f=a.getCursor("anchor"),h=a.getCursor("head"),Qe(h,f)){var p=h;h=f,f=p}h.ch=Je(a,h.line)-1}else{var m=Math.max(l.repeat,2);f=a.getCursor(),h=Dt(a,new O(f.line+m-1,1/0))}for(var w=0,x=f.line;x<h.line;x++){w=Je(a,f.line);var p=new O(f.line+1,Je(a,f.line+1)),E=a.getRange(f,p);E=l.keepSpaces?E.replace(/\n\r?/g,""):E.replace(/\n\s*/g," "),a.replaceRange(E,f,p)}var N=new O(f.line,w);s.visualMode&&Qt(a,!1),a.setCursor(N)},newLineAndEnterInsertMode:function(a,l,s){s.insertMode=!0;var f=$e(a.getCursor());if(f.line===a.firstLine()&&!l.after)a.replaceRange(`
`,new O(a.firstLine(),0)),a.setCursor(a.firstLine(),0);else{f.line=l.after?f.line:f.line-1,f.ch=Je(a,f.line),a.setCursor(f);var h=P.commands.newlineAndIndentContinueComment||P.commands.newlineAndIndent;h(a)}this.enterInsertMode(a,{repeat:l.repeat},s)},paste:function(a,l,s){var f=$e(a.getCursor()),h=U.registerController.getRegister(l.registerName),p=h.toString();if(p){if(l.matchIndent){var m=a.getOption("tabSize"),w=function(Ct){var rr=Ct.split("	").length-1,nr=Ct.split(" ").length-1;return rr*m+nr*1},x=a.getLine(a.getCursor().line),E=w(x.match(/^\s*/)[0]),N=p.replace(/\n$/,""),te=p!==N,ne=w(p.match(/^\s*/)[0]),p=N.replace(/^\s*/gm,function(Ct){var rr=E+(w(Ct)-ne);if(rr<0)return"";if(a.getOption("indentWithTabs")){var nr=Math.floor(rr/m);return Array(nr+1).join("	")}else return Array(rr+1).join(" ")});p+=te?`
`:""}if(l.repeat>1)var p=Array(l.repeat+1).join(p);var $=h.linewise,V=h.blockwise;if(V){p=p.split(`
`),$&&p.pop();for(var be=0;be<p.length;be++)p[be]=p[be]==""?" ":p[be];f.ch+=l.after?1:0,f.ch=Math.min(Je(a,f.line),f.ch)}else $?s.visualMode?p=s.visualLine?p.slice(0,-1):`
`+p.slice(0,p.length-1)+`
`:l.after?(p=`
`+p.slice(0,p.length-1),f.ch=Je(a,f.line)):f.ch=0:f.ch+=l.after?1:0;var ge,Ne;if(s.visualMode){s.lastPastedText=p;var We,Fe=_i(a,s),Ye=Fe[0],yt=Fe[1],st=a.getSelection(),kt=a.listSelections(),et=new Array(kt.length).join("1").split("1");s.lastSelection&&(We=s.lastSelection.headMark.find()),U.registerController.unnamedRegister.setText(st),V?(a.replaceSelections(et),yt=new O(Ye.line+p.length-1,Ye.ch),a.setCursor(Ye),_t(a,yt),a.replaceSelections(p),ge=Ye):s.visualBlock?(a.replaceSelections(et),a.setCursor(Ye),a.replaceRange(p,Ye,Ye),ge=Ye):(a.replaceRange(p,Ye,yt),ge=a.posFromIndex(a.indexFromPos(Ye)+p.length-1)),We&&(s.lastSelection.headMark=a.setBookmark(We)),$&&(ge.ch=0)}else if(V){a.setCursor(f);for(var be=0;be<p.length;be++){var je=f.line+be;je>a.lastLine()&&a.replaceRange(`
`,new O(je,0));var bt=Je(a,je);bt<f.ch&&Ki(a,je,f.ch)}a.setCursor(f),_t(a,new O(f.line+p.length-1,f.ch)),a.replaceSelections(p),ge=f}else a.replaceRange(p,f),$&&l.after?ge=new O(f.line+1,tr(a.getLine(f.line+1))):$&&!l.after?ge=new O(f.line,tr(a.getLine(f.line))):!$&&l.after?(Ne=a.indexFromPos(f),ge=a.posFromIndex(Ne+p.length-1)):(Ne=a.indexFromPos(f),ge=a.posFromIndex(Ne+p.length));s.visualMode&&Qt(a,!1),a.setCursor(ge)}},undo:function(a,l){a.operation(function(){Er(a,P.commands.undo,l.repeat)(),a.setCursor(a.getCursor("anchor"))})},redo:function(a,l){Er(a,P.commands.redo,l.repeat)()},setRegister:function(a,l,s){s.inputState.registerName=l.selectedCharacter},setMark:function(a,l,s){var f=l.selectedCharacter;or(a,s,f,a.getCursor())},replace:function(a,l,s){var f=l.selectedCharacter,h=a.getCursor(),p,m,w=a.listSelections();if(s.visualMode)h=a.getCursor("start"),m=a.getCursor("end");else{var x=a.getLine(h.line);p=h.ch+l.repeat,p>x.length&&(p=x.length),m=new O(h.line,p)}if(f==`
`)s.visualMode||a.replaceRange("",h,m),(P.commands.newlineAndIndentContinueComment||P.commands.newlineAndIndent)(a);else{var E=a.getRange(h,m);if(E=E.replace(/[^\n]/g,f),s.visualBlock){var N=new Array(a.getOption("tabSize")+1).join(" ");E=a.getSelection(),E=E.replace(/\t/g,N).replace(/[^\n]/g,f).split(`
`),a.replaceSelections(E)}else a.replaceRange(E,h,m);s.visualMode?(h=Qe(w[0].anchor,w[0].head)?w[0].anchor:w[0].head,a.setCursor(h),Qt(a,!1)):a.setCursor(pt(m,0,-1))}},incrementNumberToken:function(a,l){for(var s=a.getCursor(),f=a.getLine(s.line),h=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,p,m,w,x;(p=h.exec(f))!==null&&(m=p.index,w=m+p[0].length,!(s.ch<w)););if(!(!l.backtrack&&w<=s.ch)){if(p){var E=p[2]||p[4],N=p[3]||p[5],te=l.increase?1:-1,ne={"0b":2,0:8,"":10,"0x":16}[E.toLowerCase()],$=parseInt(p[1]+N,ne)+te*l.repeat;x=$.toString(ne);var V=E?new Array(N.length-x.length+1+p[1].length).join("0"):"";x.charAt(0)==="-"?x="-"+E+V+x.substr(1):x=E+V+x;var be=new O(s.line,m),ge=new O(s.line,w);a.replaceRange(x,be,ge)}else return;a.setCursor(new O(s.line,m+x.length-1))}},repeatLastEdit:function(a,l,s){var f=s.lastEditInputState;if(f){var h=l.repeat;h&&l.repeatIsExplicit?s.lastEditInputState.repeatOverride=h:h=s.lastEditInputState.repeatOverride||h,li(a,s,h,!1)}},indent:function(a,l){a.indentLine(a.getCursor().line,l.indentRight)},exitInsertMode:tn};function gn(a,l){Rr[a]=l}function Dt(a,l){var s=a.state.vim,f=s.insertMode||s.visualMode,h=Math.min(Math.max(a.firstLine(),l.line),a.lastLine()),p=Je(a,h)-1+!!f,m=Math.min(Math.max(0,l.ch),p);return new O(h,m)}function yn(a){var l={};for(var s in a)a.hasOwnProperty(s)&&(l[s]=a[s]);return l}function pt(a,l,s){return typeof l=="object"&&(s=l.ch,l=l.line),new O(a.line+l,a.ch+s)}function zi(a,l,s,f){for(var h,p=[],m=[],w=0;w<l.length;w++){var x=l[w];s=="insert"&&x.context!="insert"||x.context&&x.context!=s||f.operator&&x.type=="action"||!(h=Yr(a,x.keys))||(h=="partial"&&p.push(x),h=="full"&&m.push(x))}return{partial:p.length&&p,full:m.length&&m}}function Yr(a,l){if(l.slice(-11)=="<character>"){var s=l.length-11,f=a.slice(0,s),h=l.slice(0,s);return f==h&&a.length>s?"full":h.indexOf(f)==0?"partial":!1}else return a==l?"full":l.indexOf(a)==0?"partial":!1}function Ma(a){var l=/^.*(<[^>]+>)$/.exec(a),s=l?l[1]:a.slice(-1);if(s.length>1)switch(s){case"<CR>":s=`
`;break;case"<Space>":s=" ";break;default:s="";break}return s}function Er(a,l,s){return function(){for(var f=0;f<s;f++)l(a)}}function $e(a){return new O(a.line,a.ch)}function Jt(a,l){return a.ch==l.ch&&a.line==l.line}function Qe(a,l){return a.line<l.line||a.line==l.line&&a.ch<l.ch}function Kt(a,l){return arguments.length>2&&(l=Kt.apply(void 0,Array.prototype.slice.call(arguments,1))),Qe(a,l)?a:l}function Ee(a,l){return arguments.length>2&&(l=Ee.apply(void 0,Array.prototype.slice.call(arguments,1))),Qe(a,l)?l:a}function mn(a,l,s){var f=Qe(a,l),h=Qe(l,s);return f&&h}function Je(a,l){return a.getLine(l).length}function ot(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function vt(a){return a.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function Ki(a,l,s){var f=Je(a,l),h=new Array(s-f+1).join(" ");a.setCursor(new O(l,f)),a.replaceRange(h,a.getCursor())}function _t(a,l){var s=[],f=a.listSelections(),h=$e(a.clipPos(l)),p=!Jt(l,h),m=a.getCursor("head"),w=Et(f,m),x=Jt(f[w].head,f[w].anchor),E=f.length-1,N=E-w>w?E:0,te=f[N].anchor,ne=Math.min(te.line,h.line),$=Math.max(te.line,h.line),V=te.ch,be=h.ch,ge=f[N].head.ch-V,Ne=be-V;ge>0&&Ne<=0?(V++,p||be--):ge<0&&Ne>=0?(V--,x||be++):ge<0&&Ne==-1&&(V--,be++);for(var We=ne;We<=$;We++){var Fe={anchor:new O(We,V),head:new O(We,be)};s.push(Fe)}return a.setSelections(s),l.ch=be,te.ch=V,te}function Cr(a,l,s){for(var f=[],h=0;h<s;h++){var p=pt(l,h,0);f.push({anchor:p,head:p})}a.setSelections(f,0)}function Et(a,l,s){for(var f=0;f<a.length;f++){var h=Jt(a[f].anchor,l),p=Jt(a[f].head,l);if(h||p)return f}return-1}function _i(a,l){var s=l.lastSelection,f=function(){var p=a.listSelections(),m=p[0],w=p[p.length-1],x=Qe(m.anchor,m.head)?m.anchor:m.head,E=Qe(w.anchor,w.head)?w.head:w.anchor;return[x,E]},h=function(){var p=a.getCursor(),m=a.getCursor(),w=s.visualBlock;if(w){var x=w.width,E=w.height;m=new O(p.line+E,p.ch+x);for(var N=[],te=p.line;te<m.line;te++){var ne=new O(te,p.ch),$=new O(te,m.ch),V={anchor:ne,head:$};N.push(V)}a.setSelections(N)}else{var be=s.anchorMark.find(),ge=s.headMark.find(),Ne=ge.line-be.line,We=ge.ch-be.ch;m={line:m.line+Ne,ch:Ne?m.ch:We+m.ch},s.visualLine&&(p=new O(p.line,0),m=new O(m.line,Je(a,m.line))),a.setSelection(p,m)}return[p,m]};return l.visualMode?f():h()}function xn(a,l){var s=l.sel.anchor,f=l.sel.head;l.lastPastedText&&(f=a.posFromIndex(a.indexFromPos(s)+l.lastPastedText.length),l.lastPastedText=null),l.lastSelection={anchorMark:a.setBookmark(s),headMark:a.setBookmark(f),anchor:$e(s),head:$e(f),visualMode:l.visualMode,visualLine:l.visualLine,visualBlock:l.visualBlock}}function Jr(a,l,s){var f=a.state.vim.sel,h=f.head,p=f.anchor,m;return Qe(s,l)&&(m=s,s=l,l=m),Qe(h,p)?(h=Kt(l,h),p=Ee(p,s)):(p=Kt(l,p),h=Ee(h,s),h=pt(h,0,-1),h.ch==-1&&h.line!=a.firstLine()&&(h=new O(h.line-1,Je(a,h.line-1)))),[p,h]}function yr(a,l,h){var f=a.state.vim;l=l||f.sel;var h=h||f.visualLine?"line":f.visualBlock?"block":"char",p=bn(a,l,h);a.setSelections(p.ranges,p.primary)}function bn(a,l,s,f){var h=$e(l.head),p=$e(l.anchor);if(s=="char"){var m=!f&&!Qe(l.head,l.anchor)?1:0,w=Qe(l.head,l.anchor)?1:0;return h=pt(l.head,0,m),p=pt(l.anchor,0,w),{ranges:[{anchor:p,head:h}],primary:0}}else if(s=="line"){if(Qe(l.head,l.anchor))h.ch=0,p.ch=Je(a,p.line);else{p.ch=0;var x=a.lastLine();h.line>x&&(h.line=x),h.ch=Je(a,h.line)}return{ranges:[{anchor:p,head:h}],primary:0}}else if(s=="block"){var E=Math.min(p.line,h.line),N=p.ch,te=Math.max(p.line,h.line),ne=h.ch;N<ne?ne+=1:N+=1;for(var $=te-E+1,V=h.line==E?0:$-1,be=[],ge=0;ge<$;ge++)be.push({anchor:new O(E+ge,N),head:new O(E+ge,ne)});return{ranges:be,primary:V}}}function Aa(a){var l=a.getCursor("head");return a.getSelection().length==1&&(l=Kt(l,a.getCursor("anchor"))),l}function Qt(a,l){var s=a.state.vim;l!==!1&&a.setCursor(Dt(a,s.sel.head)),xn(a,s),s.visualMode=!1,s.visualLine=!1,s.visualBlock=!1,s.insertMode||P.signal(a,"vim-mode-change",{mode:"normal"})}function Oa(a,l,s){var f=a.getRange(l,s);if(/\n\s*$/.test(f)){var h=f.split(`
`);h.pop();for(var p,p=h.pop();h.length>0&&p&&ye(p);p=h.pop())s.line--,s.ch=0;p?(s.line--,s.ch=Je(a,s.line)):s.ch=0}}function $n(a,l,s){l.ch=0,s.ch=0,s.line++}function tr(a){if(!a)return 0;var l=a.search(/\S/);return l==-1?a.length:l}function Ir(a,l,s,f,h){for(var p=Aa(a),m=a.getLine(p.line),w=p.ch,x=h?y[0]:k[0];!x(m.charAt(w));)if(w++,w>=m.length)return null;f?x=k[0]:(x=y[0],x(m.charAt(w))||(x=y[1]));for(var E=w,N=w;x(m.charAt(E))&&E<m.length;)E++;for(;x(m.charAt(N))&&N>=0;)N--;if(N++,l){for(var te=E;/\s/.test(m.charAt(E))&&E<m.length;)E++;if(te==E){for(var ne=N;/\s/.test(m.charAt(N-1))&&N>0;)N--;N||(N=ne)}}return{start:new O(p.line,N),end:new O(p.line,E)}}function Ra(a,l,s){var f=l;if(!P.findMatchingTag||!P.findEnclosingTag)return{start:f,end:f};var h=P.findMatchingTag(a,l)||P.findEnclosingTag(a,l);return!h||!h.open||!h.close?{start:f,end:f}:s?{start:h.open.from,end:h.close.to}:{start:h.open.to,end:h.close.from}}function Ui(a,l,s){Jt(l,s)||U.jumpList.add(a,l,s)}function Cn(a,l){U.lastCharacterSearch.increment=a,U.lastCharacterSearch.forward=l.forward,U.lastCharacterSearch.selectedCharacter=l.selectedCharacter}var Ea={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},Sn={bracket:{isComplete:function(a){if(a.nextCh===a.symb){if(a.depth++,a.depth>=1)return!0}else a.nextCh===a.reverseSymb&&a.depth--;return!1}},section:{init:function(a){a.curMoveThrough=!0,a.symb=(a.forward?"]":"[")===a.symb?"{":"}"},isComplete:function(a){return a.index===0&&a.nextCh===a.symb}},comment:{isComplete:function(a){var l=a.lastCh==="*"&&a.nextCh==="/";return a.lastCh=a.nextCh,l}},method:{init:function(a){a.symb=a.symb==="m"?"{":"}",a.reverseSymb=a.symb==="{"?"}":"{"},isComplete:function(a){return a.nextCh===a.symb}},preprocess:{init:function(a){a.index=0},isComplete:function(a){if(a.nextCh==="#"){var l=a.lineText.match(/^#(\w+)/)[1];if(l==="endif"){if(a.forward&&a.depth===0)return!0;a.depth++}else if(l==="if"){if(!a.forward&&a.depth===0)return!0;a.depth--}if(l==="else"&&a.depth===0)return!0}return!1}}};function Pr(a,l,s,f){var h=$e(a.getCursor()),p=s?1:-1,m=s?a.lineCount():-1,w=h.ch,x=h.line,E=a.getLine(x),N={lineText:E,nextCh:E.charAt(w),lastCh:null,index:w,symb:f,reverseSymb:(s?{")":"(","}":"{"}:{"(":")","{":"}"})[f],forward:s,depth:0,curMoveThrough:!1},te=Ea[f];if(!te)return h;var ne=Sn[te].init,$=Sn[te].isComplete;for(ne&&ne(N);x!==m&&l;){if(N.index+=p,N.nextCh=N.lineText.charAt(N.index),!N.nextCh){if(x+=p,N.lineText=a.getLine(x)||"",p>0)N.index=0;else{var V=N.lineText.length;N.index=V>0?V-1:0}N.nextCh=N.lineText.charAt(N.index)}$(N)&&(h.line=x,h.ch=N.index,l--)}return N.nextCh||N.curMoveThrough?new O(x,N.index):h}function Ia(a,l,s,f,h){var p=l.line,m=l.ch,w=a.getLine(p),x=s?1:-1,E=f?k:y;if(h&&w==""){if(p+=x,w=a.getLine(p),!Ae(a,p))return null;m=s?0:w.length}for(;;){if(h&&w=="")return{from:0,to:0,line:p};for(var N=x>0?w.length:-1,te=N,ne=N;m!=N;){for(var $=!1,V=0;V<E.length&&!$;++V)if(E[V](w.charAt(m))){for(te=m;m!=N&&E[V](w.charAt(m));)m+=x;if(ne=m,$=te!=ne,te==l.ch&&p==l.line&&ne==te+x)continue;return{from:Math.min(te,ne+1),to:Math.max(te,ne),line:p}}$||(m+=x)}if(p+=x,!Ae(a,p))return null;w=a.getLine(p),m=x>0?0:w.length}}function Pa(a,l,s,f,h,p){var m=$e(l),w=[];(f&&!h||!f&&h)&&s++;for(var x=!(f&&h),E=0;E<s;E++){var N=Ia(a,l,f,p,x);if(!N){var te=Je(a,a.lastLine());w.push(f?{line:a.lastLine(),from:te,to:te}:{line:0,from:0,to:0});break}w.push(N),l=new O(N.line,f?N.to-1:N.from)}var ne=w.length!=s,$=w[0],V=w.pop();return f&&!h?(!ne&&($.from!=m.ch||$.line!=m.line)&&(V=w.pop()),new O(V.line,V.from)):f&&h?new O(V.line,V.to-1):!f&&h?(!ne&&($.to!=m.ch||$.line!=m.line)&&(V=w.pop()),new O(V.line,V.to)):new O(V.line,V.from)}function Qr(a,l,s,f,h){var p=l,m=new O(p.line+s.repeat-1,1/0),w=a.clipPos(m);return w.ch--,h||(f.lastHPos=1/0,f.lastHSPos=a.charCoords(w,"div").left),m}function Zr(a,l,s,f){for(var h=a.getCursor(),p=h.ch,m,w=0;w<l;w++){var x=a.getLine(h.line);if(m=Sr(p,x,f,s,!0),m==-1)return null;p=m}return new O(a.getCursor().line,m)}function Dr(a,l){var s=a.getCursor().line;return Dt(a,new O(s,l-1))}function or(a,l,s,f){He(s,le)&&(l.marks[s]&&l.marks[s].clear(),l.marks[s]=a.setBookmark(f))}function Sr(a,l,s,f,h){var p;return f?(p=l.indexOf(s,a+1),p!=-1&&!h&&(p-=1)):(p=l.lastIndexOf(s,a-1),p!=-1&&!h&&(p+=1)),p}function kn(a,l,s,f,h){var p=l.line,m=a.firstLine(),w=a.lastLine(),x,E,N=p;function te(ge){return!a.getLine(ge)}function ne(ge,Ne,We){return We?te(ge)!=te(ge+Ne):!te(ge)&&te(ge+Ne)}if(f){for(;m<=N&&N<=w&&s>0;)ne(N,f)&&s--,N+=f;return new O(N,0)}var $=a.state.vim;if($.visualLine&&ne(p,1,!0)){var V=$.sel.anchor;ne(V.line,-1,!0)&&(!h||V.line!=p)&&(p+=1)}var be=te(p);for(N=p;N<=w&&s;N++)ne(N,1,!0)&&(!h||te(N)!=be)&&s--;for(E=new O(N,0),N>w&&!be?be=!0:h=!1,N=p;N>m&&!((!h||te(N)==be||N==p)&&ne(N,-1,!0));N--);return x=new O(N,0),{start:x,end:E}}function ei(a,l,s,f,h){function p(E){E.pos+E.dir<0||E.pos+E.dir>=E.line.length?E.line=null:E.pos+=E.dir}function m(E,N,te,ne){var $=E.getLine(N),V={line:$,ln:N,pos:te,dir:ne};if(V.line==="")return{ln:V.ln,pos:V.pos};var be=V.pos;for(p(V);V.line!==null;){if(be=V.pos,De(V.line[V.pos]))if(h){for(p(V);V.line!==null&&ye(V.line[V.pos]);)be=V.pos,p(V);return{ln:V.ln,pos:be+1}}else return{ln:V.ln,pos:V.pos+1};p(V)}return{ln:V.ln,pos:be+1}}function w(E,N,te,ne){var $=E.getLine(N),V={line:$,ln:N,pos:te,dir:ne};if(V.line==="")return{ln:V.ln,pos:V.pos};var be=V.pos;for(p(V);V.line!==null;){if(!ye(V.line[V.pos])&&!De(V.line[V.pos]))be=V.pos;else if(De(V.line[V.pos]))return h?ye(V.line[V.pos+1])?{ln:V.ln,pos:V.pos+1}:{ln:V.ln,pos:be}:{ln:V.ln,pos:be};p(V)}return V.line=$,h&&ye(V.line[V.pos])?{ln:V.ln,pos:V.pos}:{ln:V.ln,pos:be}}for(var x={ln:l.line,pos:l.ch};s>0;)f<0?x=w(a,x.ln,x.pos,f):x=m(a,x.ln,x.pos,f),s--;return new O(x.ln,x.pos)}function ft(a,l,s,f){function h(x,E){if(E.pos+E.dir<0||E.pos+E.dir>=E.line.length){if(E.ln+=E.dir,!Ae(x,E.ln)){E.line=null,E.ln=null,E.pos=null;return}E.line=x.getLine(E.ln),E.pos=E.dir>0?0:E.line.length-1}else E.pos+=E.dir}function p(x,E,N,te){var ge=x.getLine(E),ne=ge==="",$={line:ge,ln:E,pos:N,dir:te},V={ln:$.ln,pos:$.pos},be=$.line==="";for(h(x,$);$.line!==null;){if(V.ln=$.ln,V.pos=$.pos,$.line===""&&!be)return{ln:$.ln,pos:$.pos};if(ne&&$.line!==""&&!ye($.line[$.pos]))return{ln:$.ln,pos:$.pos};De($.line[$.pos])&&!ne&&($.pos===$.line.length-1||ye($.line[$.pos+1]))&&(ne=!0),h(x,$)}var ge=x.getLine(V.ln);V.pos=0;for(var Ne=ge.length-1;Ne>=0;--Ne)if(!ye(ge[Ne])){V.pos=Ne;break}return V}function m(x,E,N,te){var be=x.getLine(E),ne={line:be,ln:E,pos:N,dir:te},$={ln:ne.ln,pos:null},V=ne.line==="";for(h(x,ne);ne.line!==null;){if(ne.line===""&&!V)return $.pos!==null?$:{ln:ne.ln,pos:ne.pos};if(De(ne.line[ne.pos])&&$.pos!==null&&!(ne.ln===$.ln&&ne.pos+1===$.pos))return $;ne.line!==""&&!ye(ne.line[ne.pos])&&(V=!1,$={ln:ne.ln,pos:ne.pos}),h(x,ne)}var be=x.getLine($.ln);$.pos=0;for(var ge=0;ge<be.length;++ge)if(!ye(be[ge])){$.pos=ge;break}return $}for(var w={ln:l.line,pos:l.ch};s>0;)f<0?w=m(a,w.ln,w.pos,f):w=p(a,w.ln,w.pos,f),s--;return new O(w.ln,w.pos)}function Oe(a,l,s,f){var h=l,p,m,w={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[s],x={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[s],E=a.getLine(h.line).charAt(h.ch),N=E===x?1:0;if(p=a.scanForBracket(new O(h.line,h.ch+N),-1,void 0,{bracketRegex:w}),m=a.scanForBracket(new O(h.line,h.ch+N),1,void 0,{bracketRegex:w}),!p||!m)return{start:h,end:h};if(p=p.pos,m=m.pos,p.line==m.line&&p.ch>m.ch||p.line>m.line){var te=p;p=m,m=te}return f?m.ch+=1:p.ch+=1,{start:p,end:m}}function kr(a,l,s,f){var h=$e(l),p=a.getLine(h.line),m=p.split(""),w,x,E,N,te=m.indexOf(s);if(h.ch<te?h.ch=te:te<h.ch&&m[h.ch]==s&&(x=h.ch,--h.ch),m[h.ch]==s&&!x)w=h.ch+1;else for(E=h.ch;E>-1&&!w;E--)m[E]==s&&(w=E+1);if(w&&!x)for(E=w,N=m.length;E<N&&!x;E++)m[E]==s&&(x=E);return!w||!x?{start:h,end:h}:(f&&(--w,++x),{start:new O(h.line,w),end:new O(h.line,x)})}Ue("pcre",!0,"boolean");function wn(){}wn.prototype={getQuery:function(){return U.query},setQuery:function(a){U.query=a},getOverlay:function(){return this.searchOverlay},setOverlay:function(a){this.searchOverlay=a},isReversed:function(){return U.isReversed},setReversed:function(a){U.isReversed=a},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(a){this.annotate=a}};function gt(a){var l=a.state.vim;return l.searchState_||(l.searchState_=new wn)}function Ze(a){return Nr(a,"/")}function wr(a){return Ln(a,"/")}function Nr(a,l){var s=Ln(a,l)||[];if(!s.length)return[];var f=[];if(s[0]===0){for(var h=0;h<s.length;h++)typeof s[h]=="number"&&f.push(a.substring(s[h]+1,s[h+1]));return f}}function Ln(a,l){l||(l="/");for(var s=!1,f=[],h=0;h<a.length;h++){var p=a.charAt(h);!s&&p==l&&f.push(h),s=!s&&p=="\\"}return f}function he(a){for(var l="|(){",s="}",f=!1,h=[],p=-1;p<a.length;p++){var m=a.charAt(p)||"",w=a.charAt(p+1)||"",x=w&&l.indexOf(w)!=-1;f?((m!=="\\"||!x)&&h.push(m),f=!1):m==="\\"?(f=!0,w&&s.indexOf(w)!=-1&&(x=!0),(!x||w==="\\")&&h.push(m)):(h.push(m),x&&w!=="\\"&&h.push("\\"))}return h.join("")}var Be={"\\n":`
`,"\\r":"\r","\\t":"	"};function ti(a){for(var l=!1,s=[],f=-1;f<a.length;f++){var h=a.charAt(f)||"",p=a.charAt(f+1)||"";Be[h+p]?(s.push(Be[h+p]),f++):l?(s.push(h),l=!1):h==="\\"?(l=!0,de(p)||p==="$"?s.push("$"):p!=="/"&&p!=="\\"&&s.push("\\")):(h==="$"&&s.push("$"),s.push(h),p==="/"&&s.push("\\"))}return s.join("")}var Tn={"\\/":"/","\\\\":"\\","\\n":`
`,"\\r":"\r","\\t":"	","\\&":"&"};function Mn(a){for(var l=new P.StringStream(a),s=[];!l.eol();){for(;l.peek()&&l.peek()!="\\";)s.push(l.next());var f=!1;for(var h in Tn)if(l.match(h,!0)){f=!0,s.push(Tn[h]);break}f||s.push(l.next())}return s.join("")}function An(a,l,s){var f=U.registerController.getRegister("/");if(f.setText(a),a instanceof RegExp)return a;var h=wr(a),p,m;if(!h.length)p=a;else{p=a.substring(0,h[0]);var w=a.substring(h[0]);m=w.indexOf("i")!=-1}if(!p)return null;R("pcre")||(p=he(p)),s&&(l=/^[^A-Z]*$/.test(p));var x=new RegExp(p,l||m?"im":"m");return x}function lr(a){typeof a=="string"&&(a=document.createElement(a));for(var l,s=1;s<arguments.length;s++)if(l=arguments[s])if(typeof l!="object"&&(l=document.createTextNode(l)),l.nodeType)a.appendChild(l);else for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(f[0]==="$"?a.style[f.slice(1)]=l[f]:a.setAttribute(f,l[f]));return a}function Le(a,l){var s=lr("div",{$color:"red",$whiteSpace:"pre",class:"cm-vim-message"},l);a.openNotification?a.openNotification(s,{bottom:!0,duration:5e3}):alert(s.innerText)}function Da(a,l){return lr(document.createDocumentFragment(),lr("span",{$fontFamily:"monospace",$whiteSpace:"pre"},a,lr("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),l&&lr("span",{$color:"#888"},l))}function Vr(a,l){var s=Da(l.prefix,l.desc);if(a.openDialog)a.openDialog(s,l.onClose,{onKeyDown:l.onKeyDown,onKeyUp:l.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:l.value});else{var f="";typeof l.prefix!="string"&&l.prefix&&(f+=l.prefix.textContent),l.desc&&(f+=" "+l.desc),l.onClose(prompt(f,""))}}function On(a,l){if(a instanceof RegExp&&l instanceof RegExp){for(var s=["global","multiline","ignoreCase","source"],f=0;f<s.length;f++){var h=s[f];if(a[h]!==l[h])return!1}return!0}return!1}function Nt(a,l,s,f){if(l){var h=gt(a),p=An(l,!!s,!!f);if(p)return Br(a,p),On(p,h.getQuery())||h.setQuery(p),p}}function ji(a){if(a.source.charAt(0)=="^")var l=!0;return{token:function(s){if(l&&!s.sol()){s.skipToEnd();return}var f=s.match(a,!1);if(f)return f[0].length==0?(s.next(),"searching"):!s.sol()&&(s.backUp(1),!a.exec(s.next()+f[0]))?(s.next(),null):(s.match(a),"searching");for(;!s.eol()&&(s.next(),!s.match(a,!1)););},query:a}}var $r=0;function Br(a,l){clearTimeout($r),$r=setTimeout(function(){if(a.state.vim){var s=gt(a),f=s.getOverlay();(!f||l!=f.query)&&(f&&a.removeOverlay(f),f=ji(l),a.addOverlay(f),a.showMatchesOnScrollbar&&(s.getScrollbarAnnotate()&&s.getScrollbarAnnotate().clear(),s.setScrollbarAnnotate(a.showMatchesOnScrollbar(l))),s.setOverlay(f))}},50)}function Rn(a,l,s,f){return f===void 0&&(f=1),a.operation(function(){for(var h=a.getCursor(),p=a.getSearchCursor(s,h),m=0;m<f;m++){var w=p.find(l);if(m==0&&w&&Jt(p.from(),h)){var x=l?p.from():p.to();w=p.find(l),w&&!w[0]&&Jt(p.from(),x)&&a.getLine(x.line).length==x.ch&&(w=p.find(l))}if(!w&&(p=a.getSearchCursor(s,l?new O(a.lastLine()):new O(a.firstLine(),0)),!p.find(l)))return}return p.from()})}function Gi(a,l,s,f,h){return f===void 0&&(f=1),a.operation(function(){var p=a.getCursor(),m=a.getSearchCursor(s,p),w=m.find(!l);!h.visualMode&&w&&Jt(m.from(),p)&&m.find(!l);for(var x=0;x<f;x++)if(w=m.find(l),!w&&(m=a.getSearchCursor(s,l?new O(a.lastLine()):new O(a.firstLine(),0)),!m.find(l)))return;return[m.from(),m.to()]})}function en(a){var l=gt(a);a.removeOverlay(gt(a).getOverlay()),l.setOverlay(null),l.getScrollbarAnnotate()&&(l.getScrollbarAnnotate().clear(),l.setScrollbarAnnotate(null))}function qi(a,l,s){return typeof a!="number"&&(a=a.line),l instanceof Array?He(a,l):typeof s=="number"?a>=l&&a<=s:a==l}function En(a){var l=a.getScrollInfo(),s=6,f=10,h=a.coordsChar({left:0,top:s+l.top},"local"),p=l.clientHeight-f+l.top,m=a.coordsChar({left:0,top:p},"local");return{top:h.line,bottom:m.line}}function ri(a,l,s){if(s=="'"||s=="`")return U.jumpList.find(a,-1)||new O(0,0);if(s==".")return ni(a);var f=l.marks[s];return f&&f.find()}function ni(a){for(var l=a.doc.history.done,s=l.length;s--;)if(l[s].changes)return $e(l[s].changes[0].to)}var Xi=function(){this.buildCommandMap_()};Xi.prototype={processCommand:function(a,l,s){var f=this;a.operation(function(){a.curOp.isVimOp=!0,f._processCommand(a,l,s)})},_processCommand:function(a,l,s){var f=a.state.vim,h=U.registerController.getRegister(":"),p=h.toString();f.visualMode&&Qt(a);var m=new P.StringStream(l);h.setText(l);var w=s||{};w.input=l;try{this.parseInput_(a,m,w)}catch(te){throw Le(a,te.toString()),te}var x,E;if(!w.commandName)w.line!==void 0&&(E="move");else if(x=this.matchCommand_(w.commandName),x){if(E=x.name,x.excludeFromCommandHistory&&h.setText(p),this.parseCommandArgs_(m,w,x),x.type=="exToKey"){for(var N=0;N<x.toKeys.length;N++)Ge.handleKey(a,x.toKeys[N],"mapping");return}else if(x.type=="exToEx"){this.processCommand(a,x.toInput);return}}if(!E){Le(a,'Not an editor command ":'+l+'"');return}try{Yi[E](a,w),(!x||!x.possiblyAsync)&&w.callback&&w.callback()}catch(te){throw Le(a,te.toString()),te}},parseInput_:function(a,l,s){l.eatWhile(":"),l.eat("%")?(s.line=a.firstLine(),s.lineEnd=a.lastLine()):(s.line=this.parseLineSpec_(a,l),s.line!==void 0&&l.eat(",")&&(s.lineEnd=this.parseLineSpec_(a,l)));var f=l.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return f?s.commandName=f[1]:s.commandName=l.match(/.*/)[0],s},parseLineSpec_:function(a,l){var s=l.match(/^(\d+)/);if(s)return parseInt(s[1],10)-1;switch(l.next()){case".":return this.parseLineSpecOffset_(l,a.getCursor().line);case"$":return this.parseLineSpecOffset_(l,a.lastLine());case"'":var f=l.next(),h=ri(a,a.state.vim,f);if(!h)throw new Error("Mark not set");return this.parseLineSpecOffset_(l,h.line);case"-":case"+":return l.backUp(1),this.parseLineSpecOffset_(l,a.getCursor().line);default:l.backUp(1);return}},parseLineSpecOffset_:function(a,l){var s=a.match(/^([+-])?(\d+)/);if(s){var f=parseInt(s[2],10);s[1]=="-"?l-=f:l+=f}return l},parseCommandArgs_:function(a,l,s){if(!a.eol()){l.argString=a.match(/.*/)[0];var f=s.argDelimiter||/\s+/,h=ot(l.argString).split(f);h.length&&h[0]&&(l.args=h)}},matchCommand_:function(a){for(var l=a.length;l>0;l--){var s=a.substring(0,l);if(this.commandMap_[s]){var f=this.commandMap_[s];if(f.name.indexOf(a)===0)return f}}return null},buildCommandMap_:function(){this.commandMap_={};for(var a=0;a<_.length;a++){var l=_[a],s=l.shortName||l.name;this.commandMap_[s]=l}},map:function(a,l,s){if(a!=":"&&a.charAt(0)==":"){if(s)throw Error("Mode not supported for ex mappings");var f=a.substring(1);l!=":"&&l.charAt(0)==":"?this.commandMap_[f]={name:f,type:"exToEx",toInput:l.substring(1),user:!0}:this.commandMap_[f]={name:f,type:"exToKey",toKeys:l,user:!0}}else if(l!=":"&&l.charAt(0)==":"){var h={keys:a,type:"keyToEx",exArgs:{input:l.substring(1)}};s&&(h.context=s),I.unshift(h)}else{var h={keys:a,type:"keyToKey",toKeys:l};s&&(h.context=s),I.unshift(h)}},unmap:function(a,l){if(a!=":"&&a.charAt(0)==":"){if(l)throw Error("Mode not supported for ex mappings");var s=a.substring(1);if(this.commandMap_[s]&&this.commandMap_[s].user)return delete this.commandMap_[s],!0}else for(var f=a,h=0;h<I.length;h++)if(f==I[h].keys&&I[h].context===l)return I.splice(h,1),!0}};var Yi={colorscheme:function(a,l){if(!l.args||l.args.length<1){Le(a,a.getOption("theme"));return}a.setOption("theme",l.args[0])},map:function(a,l,s){var f=l.args;if(!f||f.length<2){a&&Le(a,"Invalid mapping: "+l.input);return}$t.map(f[0],f[1],s)},imap:function(a,l){this.map(a,l,"insert")},nmap:function(a,l){this.map(a,l,"normal")},vmap:function(a,l){this.map(a,l,"visual")},unmap:function(a,l,s){var f=l.args;(!f||f.length<1||!$t.unmap(f[0],s))&&a&&Le(a,"No such mapping: "+l.input)},move:function(a,l){_e.processCommand(a,a.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:l.line+1})},set:function(a,l){var s=l.args,f=l.setCfg||{};if(!s||s.length<1){a&&Le(a,"Invalid mapping: "+l.input);return}var h=s[0].split("="),p=h[0],m=h[1],w=!1;if(p.charAt(p.length-1)=="?"){if(m)throw Error("Trailing characters: "+l.argString);p=p.substring(0,p.length-1),w=!0}m===void 0&&p.substring(0,2)=="no"&&(p=p.substring(2),m=!1);var x=Re[p]&&Re[p].type=="boolean";if(x&&m==null&&(m=!0),!x&&m===void 0||w){var E=R(p,a,f);E instanceof Error?Le(a,E.message):E===!0||E===!1?Le(a," "+(E?"":"no")+p):Le(a,"  "+p+"="+E)}else{var N=qe(p,m,a,f);N instanceof Error&&Le(a,N.message)}},setlocal:function(a,l){l.setCfg={scope:"local"},this.set(a,l)},setglobal:function(a,l){l.setCfg={scope:"global"},this.set(a,l)},registers:function(a,l){var s=l.args,f=U.registerController.registers,h=`----------Registers----------

`;if(s){var p;s=s.join("");for(var w=0;w<s.length;w++)if(p=s.charAt(w),!!U.registerController.isValidRegister(p)){var x=f[p]||new dt;h+='"'+p+"    "+x.toString()+`
`}}else for(var p in f){var m=f[p].toString();m.length&&(h+='"'+p+"    "+m+`
`)}Le(a,h)},sort:function(a,l){var s,f,h,p,m;function w(){if(l.argString){var et=new P.StringStream(l.argString);if(et.eat("!")&&(s=!0),et.eol())return;if(!et.eatSpace())return"Invalid arguments";var je=et.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!je&&!et.eol())return"Invalid arguments";if(je[1]){f=je[1].indexOf("i")!=-1,h=je[1].indexOf("u")!=-1;var bt=je[1].indexOf("d")!=-1||je[1].indexOf("n")!=-1&&1,Bt=je[1].indexOf("x")!=-1&&1,Ct=je[1].indexOf("o")!=-1&&1;if(bt+Bt+Ct>1)return"Invalid arguments";p=bt&&"decimal"||Bt&&"hex"||Ct&&"octal"}je[2]&&(m=new RegExp(je[2].substr(1,je[2].length-2),f?"i":""))}}var x=w();if(x){Le(a,x+": "+l.argString);return}var E=l.line||a.firstLine(),N=l.lineEnd||l.line||a.lastLine();if(E==N)return;var te=new O(E,0),ne=new O(N,Je(a,N)),$=a.getRange(te,ne).split(`
`),V=m||(p=="decimal"?/(-?)([\d]+)/:p=="hex"?/(-?)(?:0x)?([0-9a-f]+)/i:p=="octal"?/([0-7]+)/:null),be=p=="decimal"?10:p=="hex"?16:p=="octal"?8:null,ge=[],Ne=[];if(p||m)for(var We=0;We<$.length;We++){var Fe=m?$[We].match(m):null;Fe&&Fe[0]!=""?ge.push(Fe):!m&&V.exec($[We])?ge.push($[We]):Ne.push($[We])}else Ne=$;function Ye(et,je){if(s){var bt;bt=et,et=je,je=bt}f&&(et=et.toLowerCase(),je=je.toLowerCase());var Bt=p&&V.exec(et),Ct=p&&V.exec(je);return Bt?(Bt=parseInt((Bt[1]+Bt[2]).toLowerCase(),be),Ct=parseInt((Ct[1]+Ct[2]).toLowerCase(),be),Bt-Ct):et<je?-1:1}function yt(et,je){if(s){var bt;bt=et,et=je,je=bt}return f&&(et[0]=et[0].toLowerCase(),je[0]=je[0].toLowerCase()),et[0]<je[0]?-1:1}if(ge.sort(m?yt:Ye),m)for(var We=0;We<ge.length;We++)ge[We]=ge[We].input;else p||Ne.sort(Ye);if($=s?ge.concat(Ne):Ne.concat(ge),h){var st=$,kt;$=[];for(var We=0;We<st.length;We++)st[We]!=kt&&$.push(st[We]),kt=st[We]}a.replaceRange($.join(`
`),te,ne)},vglobal:function(a,l){this.global(a,l)},global:function(a,l){var s=l.argString;if(!s){Le(a,"Regular Expression missing from global");return}var f=l.commandName[0]==="v",h=l.line!==void 0?l.line:a.firstLine(),p=l.lineEnd||l.line||a.lastLine(),m=Ze(s),w=s,x;if(m.length&&(w=m[0],x=m.slice(1,m.length).join("/")),w)try{Nt(a,w,!0,!0)}catch{Le(a,"Invalid regex: "+w);return}for(var E=gt(a).getQuery(),N=[],te=h;te<=p;te++){var ne=a.getLineHandle(te),$=E.test(ne.text);$!==f&&N.push(x?ne:ne.text)}if(!x){Le(a,N.join(`
`));return}var V=0,be=function(){if(V<N.length){var ge=N[V++],Ne=a.getLineNumber(ge);if(Ne==null){be();return}var We=Ne+1+x;$t.processCommand(a,We,{callback:be})}};be()},substitute:function(a,l){if(!a.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var s=l.argString,f=s?Nr(s,s[0]):[],h,p="",m,w,x,E=!1,N=!1;if(f.length)h=f[0],R("pcre")&&h!==""&&(h=new RegExp(h).source),p=f[1],p!==void 0&&(R("pcre")?p=Mn(p.replace(/([^\\])&/g,"$1$$&")):p=ti(p),U.lastSubstituteReplacePart=p),m=f[2]?f[2].split(" "):[];else if(s&&s.length){Le(a,"Substitutions should be of the form :s/pattern/replace/");return}if(m&&(w=m[0],x=parseInt(m[1]),w&&(w.indexOf("c")!=-1&&(E=!0),w.indexOf("g")!=-1&&(N=!0),R("pcre")?h=h+"/"+w:h=h.replace(/\//g,"\\/")+"/"+w)),h)try{Nt(a,h,!0,!0)}catch{Le(a,"Invalid regex: "+h);return}if(p=p||U.lastSubstituteReplacePart,p===void 0){Le(a,"No previous substitute regular expression");return}var te=gt(a),ne=te.getQuery(),$=l.line!==void 0?l.line:a.getCursor().line,V=l.lineEnd||$;$==a.firstLine()&&V==a.lastLine()&&(V=1/0),x&&($=V,V=$+x-1);var be=Dt(a,new O($,0)),ge=a.getSearchCursor(ne,be);sr(a,E,N,$,V,ge,ne,p,l.callback)},redo:P.commands.redo,undo:P.commands.undo,write:function(a){P.commands.save?P.commands.save(a):a.save&&a.save()},nohlsearch:function(a){en(a)},yank:function(a){var l=$e(a.getCursor()),s=l.line,f=a.getLine(s);U.registerController.pushText("0","yank",f,!0,!0)},delmarks:function(a,l){if(!l.argString||!ot(l.argString)){Le(a,"Argument required");return}for(var s=a.state.vim,f=new P.StringStream(ot(l.argString));!f.eol();){f.eatSpace();var h=f.pos;if(!f.match(/[a-zA-Z]/,!1)){Le(a,"Invalid argument: "+l.argString.substring(h));return}var p=f.next();if(f.match("-",!0)){if(!f.match(/[a-zA-Z]/,!1)){Le(a,"Invalid argument: "+l.argString.substring(h));return}var m=p,w=f.next();if(fe(m)&&fe(w)||Me(m)&&Me(w)){var x=m.charCodeAt(0),E=w.charCodeAt(0);if(x>=E){Le(a,"Invalid argument: "+l.argString.substring(h));return}for(var N=0;N<=E-x;N++){var te=String.fromCharCode(x+N);delete s.marks[te]}}else{Le(a,"Invalid argument: "+m+"-");return}}else delete s.marks[p]}}},$t=new Xi;function sr(a,l,s,f,h,p,m,w,x){a.state.vim.exMode=!0;var E=!1,N,te,ne;function $(){a.operation(function(){for(;!E;)V(),ge();Ne()})}function V(){var Fe=a.getRange(p.from(),p.to()),Ye=Fe.replace(m,w),yt=p.to().line;p.replace(Ye),te=p.to().line,h+=te-yt,ne=te<yt}function be(){var Fe=N&&$e(p.to()),Ye=p.findNext();return Ye&&!Ye[0]&&Fe&&Jt(p.from(),Fe)&&(Ye=p.findNext()),Ye}function ge(){for(;be()&&qi(p.from(),f,h);)if(!(!s&&p.from().line==te&&!ne)){a.scrollIntoView(p.from(),30),a.setSelection(p.from(),p.to()),N=p.from(),E=!1;return}E=!0}function Ne(Fe){if(Fe&&Fe(),a.focus(),N){a.setCursor(N);var Ye=a.state.vim;Ye.exMode=!1,Ye.lastHPos=Ye.lastHSPos=N.ch}x&&x()}function We(Fe,Ye,yt){P.e_stop(Fe);var st=P.keyName(Fe);switch(st){case"Y":V(),ge();break;case"N":ge();break;case"A":var kt=x;x=void 0,a.operation($),x=kt;break;case"L":V();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":Ne(yt);break}return E&&Ne(yt),!0}if(ge(),E){Le(a,"No matches for "+m.source);return}if(!l){$(),x&&x();return}Vr(a,{prefix:lr("span","replace with ",lr("strong",w)," (y/n/a/q/l)"),onKeyDown:We})}P.keyMap.vim={attach:j,detach:q,call:ae};function tn(a){var l=a.state.vim,s=U.macroModeState,f=U.registerController.getRegister("."),h=s.isPlaying,p=s.lastInsertModeChanges;h||(a.off("change",Qi),P.off(a.getInputField(),"keydown",oi)),!h&&l.insertModeRepeat>1&&(li(a,l,l.insertModeRepeat-1,!0),l.lastEditInputState.repeatOverride=l.insertModeRepeat),delete l.insertModeRepeat,l.insertMode=!1,a.setCursor(a.getCursor().line,a.getCursor().ch-1),a.setOption("keyMap","vim"),a.setOption("disableInput",!0),a.toggleOverwrite(!1),f.setText(p.changes.join("")),P.signal(a,"vim-mode-change",{mode:"normal"}),s.isRecording&&Ba(s)}function Ji(a){I.unshift(a)}function In(a,l,s,f,h){var p={keys:a,type:l};p[l]=s,p[l+"Args"]=f;for(var m in h)p[m]=h[m];Ji(p)}Ue("insertModeEscKeysTimeout",200,"number"),P.keyMap["vim-insert"]={fallthrough:["default"],attach:j,detach:q,call:ae},P.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:j,detach:q,call:ae};function rn(a,l,s,f){var h=U.registerController.getRegister(f);if(f==":"){h.keyBuffer[0]&&$t.processCommand(a,h.keyBuffer[0]),s.isPlaying=!1;return}var p=h.keyBuffer,m=0;s.isPlaying=!0,s.replaySearchQueries=h.searchQueries.slice(0);for(var w=0;w<p.length;w++)for(var x=p[w],E,N;x;)if(E=/<\w+-.+?>|<\w+>|./.exec(x),N=E[0],x=x.substring(E.index+N.length),Ge.handleKey(a,N,"macro"),l.insertMode){var te=h.insertModeChanges[m++].changes;U.macroModeState.lastInsertModeChanges.changes=te,nn(a,te,1),tn(a)}s.isPlaying=!1}function Na(a,l){if(!a.isPlaying){var s=a.latestRegister,f=U.registerController.getRegister(s);f&&f.pushText(l)}}function Ba(a){if(!a.isPlaying){var l=a.latestRegister,s=U.registerController.getRegister(l);s&&s.pushInsertModeChanges&&s.pushInsertModeChanges(a.lastInsertModeChanges)}}function Fa(a,l){if(!a.isPlaying){var s=a.latestRegister,f=U.registerController.getRegister(s);f&&f.pushSearchQuery&&f.pushSearchQuery(l)}}function Qi(a,l){var s=U.macroModeState,f=s.lastInsertModeChanges;if(!s.isPlaying)for(;l;){if(f.expectCursorActivityForChange=!0,f.ignoreCount>1)f.ignoreCount--;else if(l.origin=="+input"||l.origin=="paste"||l.origin===void 0){var h=a.listSelections().length;h>1&&(f.ignoreCount=h);var p=l.text.join(`
`);f.maybeReset&&(f.changes=[],f.maybeReset=!1),p&&(a.state.overwrite&&!/\n/.test(p)?f.changes.push([p]):f.changes.push(p))}l=l.next}}function Pn(a){var l=a.state.vim;if(l.insertMode){var s=U.macroModeState;if(s.isPlaying)return;var f=s.lastInsertModeChanges;f.expectCursorActivityForChange?f.expectCursorActivityForChange=!1:f.maybeReset=!0}else a.curOp.isVimOp||ii(a,l)}function ii(a,l){var s=a.getCursor("anchor"),f=a.getCursor("head");if(l.visualMode&&!a.somethingSelected()?Qt(a,!1):!l.visualMode&&!l.insertMode&&a.somethingSelected()&&(l.visualMode=!0,l.visualLine=!1,P.signal(a,"vim-mode-change",{mode:"visual"})),l.visualMode){var h=Qe(f,s)?0:-1,p=Qe(f,s)?-1:0;f=pt(f,0,h),s=pt(s,0,p),l.sel={anchor:s,head:f},or(a,l,"<",Kt(f,s)),or(a,l,">",Ee(f,s))}else l.insertMode||(l.lastHPos=a.getCursor().ch)}function ai(a){this.keyName=a}function oi(a){var l=U.macroModeState,s=l.lastInsertModeChanges,f=P.keyName(a);if(!f)return;function h(){return s.maybeReset&&(s.changes=[],s.maybeReset=!1),s.changes.push(new ai(f)),!0}(f.indexOf("Delete")!=-1||f.indexOf("Backspace")!=-1)&&P.lookupKey(f,"vim-insert",h)}function li(a,l,s,f){var h=U.macroModeState;h.isPlaying=!0;var p=!!l.lastEditActionCommand,m=l.inputState;function w(){p?_e.processAction(a,l,l.lastEditActionCommand):_e.evalInput(a,l)}function x(N){if(h.lastInsertModeChanges.changes.length>0){N=l.lastEditActionCommand?N:1;var te=h.lastInsertModeChanges;nn(a,te.changes,N)}}if(l.inputState=l.lastEditInputState,p&&l.lastEditActionCommand.interlaceInsertRepeat)for(var E=0;E<s;E++)w(),x(1);else f||w(),x(s);l.inputState=m,l.insertMode&&!f&&tn(a),h.isPlaying=!1}function nn(a,l,s){function f(te){return typeof te=="string"?P.commands[te](a):te(a),!0}var h=a.getCursor("head"),p=U.macroModeState.lastInsertModeChanges.visualBlock;p&&(Cr(a,h,p+1),s=a.listSelections().length,a.setCursor(h));for(var m=0;m<s;m++){p&&a.setCursor(pt(h,m,0));for(var w=0;w<l.length;w++){var x=l[w];if(x instanceof ai)P.lookupKey(x.keyName,"vim-insert",f);else if(typeof x=="string")a.replaceSelection(x);else{var E=a.getCursor(),N=pt(E,0,x[0].length);a.replaceRange(x[0],E,N),a.setCursor(N)}}}p&&a.setCursor(pt(h,0,1))}function Fr(a){var l=new a.constructor;return Object.keys(a).forEach(function(s){var f=a[s];Array.isArray(f)?f=f.slice():f&&typeof f=="object"&&f.constructor!=Object&&(f=Fr(f)),l[s]=f}),a.sel&&(l.sel={head:a.sel.head&&$e(a.sel.head),anchor:a.sel.anchor&&$e(a.sel.anchor)}),l}function si(a,l,s){var f=!1,h=Ge.maybeInitVimState_(a),p=h.visualBlock||h.wasInVisualBlock,m=a.isInMultiSelectMode();if(h.wasInVisualBlock&&!m?h.wasInVisualBlock=!1:m&&h.visualBlock&&(h.wasInVisualBlock=!0),l=="<Esc>"&&!h.insertMode&&!h.visualMode&&m&&h.status=="<Esc>")it(a);else if(p||!m||a.inVirtualSelectionMode)f=Ge.handleKey(a,l,s);else{var w=Fr(h);a.operation(function(){a.curOp.isVimOp=!0,a.forEachSelection(function(){var x=a.getCursor("head"),E=a.getCursor("anchor"),N=Qe(x,E)?0:-1,te=Qe(x,E)?-1:0;x=pt(x,0,N),E=pt(E,0,te),a.state.vim.sel.head=x,a.state.vim.sel.anchor=E,f=Ge.handleKey(a,l,s),a.virtualSelection&&(a.state.vim=Fr(w))}),a.curOp.cursorActivity&&!f&&(a.curOp.cursorActivity=!1),a.state.vim=h},!0)}return f&&!h.visualMode&&!h.insert&&h.visualMode!=a.somethingSelected()&&ii(a,h),f}return me(),Ge}function z(P){return P.Vim=A(P),P.Vim}C.Vim=z(C)})})();(function(G,ue){(function(C){C(Rt())})(function(C){var A={},z=/[^\s\u00a0]/,P=C.Pos,O=C.cmpPos;function D(_){var re=_.search(z);return re==-1?0:re}C.commands.toggleComment=function(_){_.toggleComment()},C.defineExtension("toggleComment",function(_){_||(_=A);for(var re=this,H=1/0,q=this.listSelections(),j=null,ae=q.length-1;ae>=0;ae--){var W=q[ae].from(),J=q[ae].to();W.line>=H||(J.line>=H&&(J=P(H,0)),H=W.line,j==null?re.uncomment(W,J,_)?j="un":(re.lineComment(W,J,_),j="line"):j=="un"?re.uncomment(W,J,_):re.lineComment(W,J,_))}});function I(_,re,H){return/\bstring\b/.test(_.getTokenTypeAt(P(re.line,0)))&&!/^[\'\"\`]/.test(H)}function X(_,re){var H=_.getMode();return H.useInnerComments===!1||!H.innerMode?H:_.getModeAt(re)}C.defineExtension("lineComment",function(_,re,H){H||(H=A);var q=this,j=X(q,_),ae=q.getLine(_.line);if(!(ae==null||I(q,_,ae))){var W=H.lineComment||j.lineComment;if(!W){(H.blockCommentStart||j.blockCommentStart)&&(H.fullLines=!0,q.blockComment(_,re,H));return}var J=Math.min(re.ch!=0||re.line==_.line?re.line+1:re.line,q.lastLine()+1),S=H.padding==null?" ":H.padding,T=H.commentBlankLines||_.line==re.line;q.operation(function(){if(H.indent){for(var v=null,y=_.line;y<J;++y){var k=q.getLine(y),M=k.search(z)===-1?k:k.slice(0,D(k));(v==null||v.length>M.length)&&(v=M)}for(var y=_.line;y<J;++y){var k=q.getLine(y),B=v.length;!T&&!z.test(k)||(k.slice(0,B)!=v&&(B=D(k)),q.replaceRange(v+W+S,P(y,0),P(y,B)))}}else for(var y=_.line;y<J;++y)(T||z.test(q.getLine(y)))&&q.replaceRange(W+S,P(y,0))})}}),C.defineExtension("blockComment",function(_,re,H){H||(H=A);var q=this,j=X(q,_),ae=H.blockCommentStart||j.blockCommentStart,W=H.blockCommentEnd||j.blockCommentEnd;if(!ae||!W){(H.lineComment||j.lineComment)&&H.fullLines!=!1&&q.lineComment(_,re,H);return}if(!/\bcomment\b/.test(q.getTokenTypeAt(P(_.line,0)))){var J=Math.min(re.line,q.lastLine());J!=_.line&&re.ch==0&&z.test(q.getLine(J))&&--J;var S=H.padding==null?" ":H.padding;_.line>J||q.operation(function(){if(H.fullLines!=!1){var T=z.test(q.getLine(J));q.replaceRange(S+W,P(J)),q.replaceRange(ae+S,P(_.line,0));var v=H.blockCommentLead||j.blockCommentLead;if(v!=null)for(var y=_.line+1;y<=J;++y)(y!=J||T)&&q.replaceRange(v+S,P(y,0))}else{var k=O(q.getCursor("to"),re)==0,M=!q.somethingSelected();q.replaceRange(W,re),k&&q.setSelection(M?re:q.getCursor("from"),re),q.replaceRange(ae,_)}})}}),C.defineExtension("uncomment",function(_,re,H){H||(H=A);var q=this,j=X(q,_),ae=Math.min(re.ch!=0||re.line==_.line?re.line:re.line-1,q.lastLine()),W=Math.min(_.line,ae),J=H.lineComment||j.lineComment,S=[],T=H.padding==null?" ":H.padding,v;e:{if(!J)break e;for(var y=W;y<=ae;++y){var k=q.getLine(y),M=k.indexOf(J);if(M>-1&&!/comment/.test(q.getTokenTypeAt(P(y,M+1)))&&(M=-1),M==-1&&z.test(k)||M>-1&&z.test(k.slice(0,M)))break e;S.push(k)}if(q.operation(function(){for(var De=W;De<=ae;++De){var He=S[De-W],Re=He.indexOf(J),Ue=Re+J.length;Re<0||(He.slice(Ue,Ue+T.length)==T&&(Ue+=T.length),v=!0,q.replaceRange("",P(De,Re),P(De,Ue)))}}),v)return!0}var B=H.blockCommentStart||j.blockCommentStart,Q=H.blockCommentEnd||j.blockCommentEnd;if(!B||!Q)return!1;var ce=H.blockCommentLead||j.blockCommentLead,le=q.getLine(W),xe=le.indexOf(B);if(xe==-1)return!1;var we=ae==W?le:q.getLine(ae),Ae=we.indexOf(Q,ae==W?xe+B.length:0),fe=P(W,xe+1),se=P(ae,Ae+1);if(Ae==-1||!/comment/.test(q.getTokenTypeAt(fe))||!/comment/.test(q.getTokenTypeAt(se))||q.getRange(fe,se,`
`).indexOf(Q)>-1)return!1;var de=le.lastIndexOf(B,_.ch),Me=de==-1?-1:le.slice(0,_.ch).indexOf(Q,de+B.length);if(de!=-1&&Me!=-1&&Me+Q.length!=_.ch)return!1;Me=we.indexOf(Q,re.ch);var ye=we.slice(re.ch).lastIndexOf(B,Me-re.ch);return de=Me==-1||ye==-1?-1:re.ch+ye,Me!=-1&&de!=-1&&de!=re.ch?!1:(q.operation(function(){q.replaceRange("",P(ae,Ae-(T&&we.slice(Ae-T.length,Ae)==T?T.length:0)),P(ae,Ae+Q.length));var De=xe+B.length;if(T&&le.slice(De,De+T.length)==T&&(De+=T.length),q.replaceRange("",P(W,xe),P(W,De)),ce)for(var He=W+1;He<=ae;++He){var Re=q.getLine(He),Ue=Re.indexOf(ce);if(!(Ue==-1||z.test(Re.slice(0,Ue)))){var qe=Ue+ce.length;T&&Re.slice(qe,qe+T.length)==T&&(qe+=T.length),q.replaceRange("",P(He,Ue),P(He,qe))}}}),!0)})})})();var ac={exports:{}};(function(G,ue){(function(C){C(Rt())})(function(C){function A(D,I,X,_){if(X&&X.call){var re=X;X=null}else var re=O(D,X,"rangeFinder");typeof I=="number"&&(I=C.Pos(I,0));var H=O(D,X,"minFoldSize");function q(J){var S=re(D,I);if(!S||S.to.line-S.from.line<H)return null;if(_==="fold")return S;for(var T=D.findMarksAt(S.from),v=0;v<T.length;++v)if(T[v].__isFold){if(!J)return null;S.cleared=!0,T[v].clear()}return S}var j=q(!0);if(O(D,X,"scanUp"))for(;!j&&I.line>D.firstLine();)I=C.Pos(I.line-1,0),j=q(!1);if(!(!j||j.cleared||_==="unfold")){var ae=z(D,X,j);C.on(ae,"mousedown",function(J){W.clear(),C.e_preventDefault(J)});var W=D.markText(j.from,j.to,{replacedWith:ae,clearOnEnter:O(D,X,"clearOnEnter"),__isFold:!0});W.on("clear",function(J,S){C.signal(D,"unfold",D,J,S)}),C.signal(D,"fold",D,j.from,j.to)}}function z(D,I,X){var _=O(D,I,"widget");if(typeof _=="function"&&(_=_(X.from,X.to)),typeof _=="string"){var re=document.createTextNode(_);_=document.createElement("span"),_.appendChild(re),_.className="CodeMirror-foldmarker"}else _&&(_=_.cloneNode(!0));return _}C.newFoldFunction=function(D,I){return function(X,_){A(X,_,{rangeFinder:D,widget:I})}},C.defineExtension("foldCode",function(D,I,X){A(this,D,I,X)}),C.defineExtension("isFolded",function(D){for(var I=this.findMarksAt(D),X=0;X<I.length;++X)if(I[X].__isFold)return!0}),C.commands.toggleFold=function(D){D.foldCode(D.getCursor())},C.commands.fold=function(D){D.foldCode(D.getCursor(),null,"fold")},C.commands.unfold=function(D){D.foldCode(D.getCursor(),{scanUp:!1},"unfold")},C.commands.foldAll=function(D){D.operation(function(){for(var I=D.firstLine(),X=D.lastLine();I<=X;I++)D.foldCode(C.Pos(I,0),{scanUp:!1},"fold")})},C.commands.unfoldAll=function(D){D.operation(function(){for(var I=D.firstLine(),X=D.lastLine();I<=X;I++)D.foldCode(C.Pos(I,0),{scanUp:!1},"unfold")})},C.registerHelper("fold","combine",function(){var D=Array.prototype.slice.call(arguments,0);return function(I,X){for(var _=0;_<D.length;++_){var re=D[_](I,X);if(re)return re}}}),C.registerHelper("fold","auto",function(D,I){for(var X=D.getHelpers(I,"fold"),_=0;_<X.length;_++){var re=X[_](D,I);if(re)return re}});var P={rangeFinder:C.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};C.defineOption("foldOptions",null);function O(D,I,X){if(I&&I[X]!==void 0)return I[X];var _=D.options.foldOptions;return _&&_[X]!==void 0?_[X]:P[X]}C.defineExtension("foldOption",function(D,I){return O(this,D,I)})})})();var oc=ac.exports;(function(G,ue){(function(C){C(Rt(),oc)})(function(C){C.defineOption("foldGutter",!1,function(W,J,S){S&&S!=C.Init&&(W.clearGutter(W.state.foldGutter.options.gutter),W.state.foldGutter=null,W.off("gutterClick",re),W.off("changes",q),W.off("viewportChange",j),W.off("fold",ae),W.off("unfold",ae),W.off("swapDoc",q),W.off("optionChange",H)),J&&(W.state.foldGutter=new z(P(J)),_(W),W.on("gutterClick",re),W.on("changes",q),W.on("viewportChange",j),W.on("fold",ae),W.on("unfold",ae),W.on("swapDoc",q),W.on("optionChange",H))});var A=C.Pos;function z(W){this.options=W,this.from=this.to=0}function P(W){return W===!0&&(W={}),W.gutter==null&&(W.gutter="CodeMirror-foldgutter"),W.indicatorOpen==null&&(W.indicatorOpen="CodeMirror-foldgutter-open"),W.indicatorFolded==null&&(W.indicatorFolded="CodeMirror-foldgutter-folded"),W}function O(W,J){for(var S=W.findMarks(A(J,0),A(J+1,0)),T=0;T<S.length;++T)if(S[T].__isFold){var v=S[T].find(-1);if(v&&v.line===J)return S[T]}}function D(W){if(typeof W=="string"){var J=document.createElement("div");return J.className=W+" CodeMirror-guttermarker-subtle",J}else return W.cloneNode(!0)}function I(W,J,S){var T=W.state.foldGutter.options,v=J-1,y=W.foldOption(T,"minFoldSize"),k=W.foldOption(T,"rangeFinder"),M=typeof T.indicatorFolded=="string"&&X(T.indicatorFolded),B=typeof T.indicatorOpen=="string"&&X(T.indicatorOpen);W.eachLine(J,S,function(Q){++v;var ce=null,le=Q.gutterMarkers;if(le&&(le=le[T.gutter]),O(W,v)){if(M&&le&&M.test(le.className))return;ce=D(T.indicatorFolded)}else{var xe=A(v,0),we=k&&k(W,xe);if(we&&we.to.line-we.from.line>=y){if(B&&le&&B.test(le.className))return;ce=D(T.indicatorOpen)}}!ce&&!le||W.setGutterMarker(Q,T.gutter,ce)})}function X(W){return new RegExp("(^|\\s)"+W+"(?:$|\\s)\\s*")}function _(W){var J=W.getViewport(),S=W.state.foldGutter;S&&(W.operation(function(){I(W,J.from,J.to)}),S.from=J.from,S.to=J.to)}function re(W,J,S){var T=W.state.foldGutter;if(T){var v=T.options;if(S==v.gutter){var y=O(W,J);y?y.clear():W.foldCode(A(J,0),v)}}}function H(W,J){J=="mode"&&q(W)}function q(W){var J=W.state.foldGutter;if(J){var S=J.options;J.from=J.to=0,clearTimeout(J.changeUpdate),J.changeUpdate=setTimeout(function(){_(W)},S.foldOnChangeTimeSpan||600)}}function j(W){var J=W.state.foldGutter;if(J){var S=J.options;clearTimeout(J.changeUpdate),J.changeUpdate=setTimeout(function(){var T=W.getViewport();J.from==J.to||T.from-J.to>20||J.from-T.to>20?_(W):W.operation(function(){T.from<J.from&&(I(W,T.from,J.from),J.from=T.from),T.to>J.to&&(I(W,J.to,T.to),J.to=T.to)})},S.updateViewportTimeSpan||400)}}function ae(W,J){var S=W.state.foldGutter;if(S){var T=J.line;T>=S.from&&T<S.to&&I(W,T,T+1)}}})})();(function(G,ue){(function(C){C(Rt())})(function(C){function A(z){return function(P,O){var D=O.line,I=P.getLine(D);function X(ae){for(var W,J=O.ch,S=0;;){var T=J<=0?-1:I.lastIndexOf(ae[0],J-1);if(T==-1){if(S==1)break;S=1,J=I.length;continue}if(S==1&&T<O.ch)break;if(W=P.getTokenTypeAt(C.Pos(D,T+1)),!/^(comment|string)/.test(W))return{ch:T+1,tokenType:W,pair:ae};J=T-1}}function _(ae){var W=1,J=P.lastLine(),S,T=ae.ch,v;e:for(var y=D;y<=J;++y)for(var k=P.getLine(y),M=y==D?T:0;;){var B=k.indexOf(ae.pair[0],M),Q=k.indexOf(ae.pair[1],M);if(B<0&&(B=k.length),Q<0&&(Q=k.length),M=Math.min(B,Q),M==k.length)break;if(P.getTokenTypeAt(C.Pos(y,M+1))==ae.tokenType){if(M==B)++W;else if(!--W){S=y,v=M;break e}}++M}return S==null||D==S?null:{from:C.Pos(D,T),to:C.Pos(S,v)}}for(var re=[],H=0;H<z.length;H++){var q=X(z[H]);q&&re.push(q)}re.sort(function(ae,W){return ae.ch-W.ch});for(var H=0;H<re.length;H++){var j=_(re[H]);if(j)return j}return null}}C.registerHelper("fold","brace",A([["{","}"],["[","]"]])),C.registerHelper("fold","brace-paren",A([["{","}"],["[","]"],["(",")"]])),C.registerHelper("fold","import",function(z,P){function O(H){if(H<z.firstLine()||H>z.lastLine())return null;var q=z.getTokenAt(C.Pos(H,1));if(/\S/.test(q.string)||(q=z.getTokenAt(C.Pos(H,q.end+1))),q.type!="keyword"||q.string!="import")return null;for(var j=H,ae=Math.min(z.lastLine(),H+10);j<=ae;++j){var W=z.getLine(j),J=W.indexOf(";");if(J!=-1)return{startCh:q.end,end:C.Pos(j,J)}}}var D=P.line,I=O(D),X;if(!I||O(D-1)||(X=O(D-2))&&X.end.line==D-1)return null;for(var _=I.end;;){var re=O(_.line+1);if(re==null)break;_=re.end}return{from:z.clipPos(C.Pos(D,I.startCh+1)),to:_}}),C.registerHelper("fold","include",function(z,P){function O(re){if(re<z.firstLine()||re>z.lastLine())return null;var H=z.getTokenAt(C.Pos(re,1));if(/\S/.test(H.string)||(H=z.getTokenAt(C.Pos(re,H.end+1))),H.type=="meta"&&H.string.slice(0,8)=="#include")return H.start+8}var D=P.line,I=O(D);if(I==null||O(D-1)!=null)return null;for(var X=D;;){var _=O(X+1);if(_==null)break;++X}return{from:C.Pos(D,I+1),to:z.clipPos(C.Pos(X))}})})})();(function(G,ue){(function(C){C(Rt())})(function(C){var A=C.Pos;function z(S,T){return S.line-T.line||S.ch-T.ch}var P="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",O=P+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",D=new RegExp("<(/?)(["+P+"]["+O+"]*)","g");function I(S,T,v,y){this.line=T,this.ch=v,this.cm=S,this.text=S.getLine(T),this.min=y?Math.max(y.from,S.firstLine()):S.firstLine(),this.max=y?Math.min(y.to-1,S.lastLine()):S.lastLine()}function X(S,T){var v=S.cm.getTokenTypeAt(A(S.line,T));return v&&/\btag\b/.test(v)}function _(S){if(!(S.line>=S.max))return S.ch=0,S.text=S.cm.getLine(++S.line),!0}function re(S){if(!(S.line<=S.min))return S.text=S.cm.getLine(--S.line),S.ch=S.text.length,!0}function H(S){for(;;){var T=S.text.indexOf(">",S.ch);if(T==-1){if(_(S))continue;return}if(!X(S,T+1)){S.ch=T+1;continue}var v=S.text.lastIndexOf("/",T),y=v>-1&&!/\S/.test(S.text.slice(v+1,T));return S.ch=T+1,y?"selfClose":"regular"}}function q(S){for(;;){var T=S.ch?S.text.lastIndexOf("<",S.ch-1):-1;if(T==-1){if(re(S))continue;return}if(!X(S,T+1)){S.ch=T;continue}D.lastIndex=T,S.ch=T;var v=D.exec(S.text);if(v&&v.index==T)return v}}function j(S){for(;;){D.lastIndex=S.ch;var T=D.exec(S.text);if(!T){if(_(S))continue;return}if(!X(S,T.index+1)){S.ch=T.index+1;continue}return S.ch=T.index+T[0].length,T}}function ae(S){for(;;){var T=S.ch?S.text.lastIndexOf(">",S.ch-1):-1;if(T==-1){if(re(S))continue;return}if(!X(S,T+1)){S.ch=T;continue}var v=S.text.lastIndexOf("/",T),y=v>-1&&!/\S/.test(S.text.slice(v+1,T));return S.ch=T+1,y?"selfClose":"regular"}}function W(S,T){for(var v=[];;){var y=j(S),k,M=S.line,B=S.ch-(y?y[0].length:0);if(!y||!(k=H(S)))return;if(k!="selfClose")if(y[1]){for(var Q=v.length-1;Q>=0;--Q)if(v[Q]==y[2]){v.length=Q;break}if(Q<0&&(!T||T==y[2]))return{tag:y[2],from:A(M,B),to:A(S.line,S.ch)}}else v.push(y[2])}}function J(S,T){for(var v=[];;){var y=ae(S);if(!y)return;if(y=="selfClose"){q(S);continue}var k=S.line,M=S.ch,B=q(S);if(!B)return;if(B[1])v.push(B[2]);else{for(var Q=v.length-1;Q>=0;--Q)if(v[Q]==B[2]){v.length=Q;break}if(Q<0&&(!T||T==B[2]))return{tag:B[2],from:A(S.line,S.ch),to:A(k,M)}}}}C.registerHelper("fold","xml",function(S,T){for(var v=new I(S,T.line,0);;){var y=j(v);if(!y||v.line!=T.line)return;var k=H(v);if(!k)return;if(!y[1]&&k!="selfClose"){var M=A(v.line,v.ch),B=W(v,y[2]);return B&&z(B.from,M)>0?{from:M,to:B.from}:null}}}),C.findMatchingTag=function(S,T,v){var y=new I(S,T.line,T.ch,v);if(!(y.text.indexOf(">")==-1&&y.text.indexOf("<")==-1)){var k=H(y),M=k&&A(y.line,y.ch),B=k&&q(y);if(!(!k||!B||z(y,T)>0)){var Q={from:A(y.line,y.ch),to:M,tag:B[2]};return k=="selfClose"?{open:Q,close:null,at:"open"}:B[1]?{open:J(y,B[2]),close:Q,at:"close"}:(y=new I(S,M.line,M.ch,v),{open:Q,close:W(y,B[2]),at:"open"})}}},C.findEnclosingTag=function(S,T,v,y){for(var k=new I(S,T.line,T.ch,v);;){var M=J(k,y);if(!M)break;var B=new I(S,T.line,T.ch,v),Q=W(B,M.tag);if(Q)return{open:M,close:Q}}},C.scanForClosingTag=function(S,T,v,y){var k=new I(S,T.line,T.ch,y?{from:0,to:y}:null);return W(k,v)}})})();(function(G,ue){(function(C){C(Rt())})(function(C){function A(z,P){var O=z.getLine(P),D=O.search(/\S/);return D==-1||/\bcomment\b/.test(z.getTokenTypeAt(C.Pos(P,D+1)))?-1:C.countColumn(O,null,z.getOption("tabSize"))}C.registerHelper("fold","indent",function(z,P){var O=A(z,P.line);if(!(O<0)){for(var D=null,I=P.line+1,X=z.lastLine();I<=X;++I){var _=A(z,I);if(_!=-1)if(_>O)D=I;else break}if(D)return{from:C.Pos(P.line,z.getLine(P.line).length),to:C.Pos(D,z.getLine(D).length)}}})})})();(function(G,ue){(function(C){C(Rt())})(function(C){C.registerHelper("fold","markdown",function(A,z){var P=100;function O(j){var ae=A.getTokenTypeAt(C.Pos(j,0));return ae&&/\bheader\b/.test(ae)}function D(j,ae,W){var J=ae&&ae.match(/^#+/);return J&&O(j)?J[0].length:(J=W&&W.match(/^[=\-]+\s*$/),J&&O(j+1)?W[0]=="="?1:2:P)}var I=A.getLine(z.line),X=A.getLine(z.line+1),_=D(z.line,I,X);if(_!==P){for(var re=A.lastLine(),H=z.line,q=A.getLine(H+2);H<re&&!(D(H+1,X,q)<=_);)++H,X=q,q=A.getLine(H+2);return{from:C.Pos(z.line,I.length),to:C.Pos(H,A.getLine(H).length)}}})})})();(function(G,ue){(function(C){C(Rt())})(function(C){C.registerGlobalHelper("fold","comment",function(A){return A.blockCommentStart&&A.blockCommentEnd},function(A,z){var P=A.getModeAt(z),O=P.blockCommentStart,D=P.blockCommentEnd;if(!(!O||!D)){for(var I=z.line,X=A.getLine(I),_,re=z.ch,H=0;;){var q=re<=0?-1:X.lastIndexOf(O,re-1);if(q==-1){if(H==1)return;H=1,re=X.length;continue}if(H==1&&q<z.ch)return;if(/comment/.test(A.getTokenTypeAt(C.Pos(I,q+1)))&&(q==0||X.slice(q-D.length,q)==D||!/comment/.test(A.getTokenTypeAt(C.Pos(I,q))))){_=q+O.length;break}re=q-1}var j=1,ae=A.lastLine(),W,J;e:for(var S=I;S<=ae;++S)for(var T=A.getLine(S),v=S==I?_:0;;){var y=T.indexOf(O,v),k=T.indexOf(D,v);if(y<0&&(y=T.length),k<0&&(k=T.length),v=Math.min(y,k),v==T.length)break;if(v==y)++j;else if(!--j){W=S,J=v;break e}++v}if(!(W==null||I==W&&J==_))return{from:C.Pos(I,_),to:C.Pos(W,J)}}})})})();(function(G,ue){(function(C){C(Rt())})(function(C){C.defineOption("autoRefresh",!1,function(P,O){P.state.autoRefresh&&(z(P,P.state.autoRefresh),P.state.autoRefresh=null),O&&P.display.wrapper.offsetHeight==0&&A(P,P.state.autoRefresh={delay:O.delay||250})});function A(P,O){function D(){P.display.wrapper.offsetHeight?(z(P,O),P.display.lastWrapHeight!=P.display.wrapper.clientHeight&&P.refresh()):O.timeout=setTimeout(D,O.delay)}O.timeout=setTimeout(D,O.delay),O.hurry=function(){clearTimeout(O.timeout),O.timeout=setTimeout(D,50)},C.on(window,"mouseup",O.hurry),C.on(window,"keyup",O.hurry)}function z(P,O){clearTimeout(O.timeout),C.off(window,"mouseup",O.hurry),C.off(window,"keyup",O.hurry)}})})();function Cc(G){return vn.useEffect(()=>{document.querySelectorAll(".CodeMirror, .CodeMirror-gutters").forEach(ue=>{ue.style.fontSize=`${G.fontSize}px`})},[G.fontSize]),vn.useEffect(()=>{document.querySelector(".CodeMirror").CodeMirror.setOption("theme",G.theme)},[G.theme]),vn.useEffect(()=>{document.querySelector(".CodeMirror").CodeMirror.setOption("keyMap",G.keymap)},[G.keymap]),vn.useEffect(()=>{document.querySelector(".CodeMirror").CodeMirror.setOption("mode",G.whiteboardMode?"default":"python")},[G.whiteboardMode]),ze.jsxs(ze.Fragment,{children:[ze.jsxs(Hi,{sx:{width:"100%",height:"60px",display:"flex",justifyContent:"space-between",alignItems:"center"},className:"bar",children:[ze.jsx(Hi,{sx:{height:"2rem",lineHeight:"2rem",width:"max-content",background:"rgb(255,255,255,0.2)",textAlign:"center",borderRadius:"2rem",paddingInline:"1rem"},children:G.title}),G.show==="off"||ze.jsxs("div",{class:"list-btn hui",children:[G.phone==="off"||ze.jsx(To,{variant:"outlined",id:"button",className:"Button",onClick:()=>G.setIsFullScreen(!G.isFullScreen),children:G.isFullScreen?ze.jsx(zs,{sx:{fontSize:"2rem"}}):ze.jsx(Ws,{sx:{fontSize:"2rem"}})}),ze.jsx(To,{variant:"outlined",id:"button",className:"Button",style:{marginInline:"1rem"},onClick:G.onReset,children:ze.jsx(Hs,{sx:{fontSize:"2rem"}})}),ze.jsx(To,{variant:"contained",onClick:G.onClick,children:G.button})]})]}),ze.jsx(Yf,{value:G.code,height:"calc(100% - 60px)",options:{keyMap:G.keymap,mode:G.whiteboardMode?"default":"python",theme:G.theme,tabSize:4,lineNumbers:!0,lineWrEditoring:!0,foldGutter:!0,autoRefresh:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:{"Ctrl-Q":function(ue){ue.foldCode(ue.getCursor())},"Ctrl-0":function(){G.run()}}},onChange:(ue,C,A)=>{G.store&&localStorage.setItem("code",ue.getValue()),G.setCode(ue.getValue())}})]})}function Sc(G){return ze.jsx(Hi,{sx:{position:"relative",display:"inline-block",width:"100%"},children:ze.jsxs(Io,{className:"Button",id:"font-select",value:G.fontSize,variant:"outlined",onChange:ue=>{G.setFontSize(ue.target.value),localStorage.setItem("fontSize",ue.target.value)},sx:{width:"100%",marginTop:"10px"},MenuProps:{PaperProps:{sx:{bgcolor:"#15314b","& .MuiMenuItem-root":{color:"#fff",fontWeight:"bold","&.Mui-selected":{backgroundColor:"white",color:"#15314b","&.Mui-focusVisible":{backgroundColor:"white",color:"#15314b"}},"&.Mui-selected:hover":{backgroundColor:"white",color:"#15314b"},"&:hover":{backgroundColor:"#626ee3",color:"white"}}}}},children:[ze.jsx(zt,{value:12,children:"12px"}),ze.jsx(zt,{value:13,children:"13px"}),ze.jsx(zt,{value:14,children:"14px"}),ze.jsx(zt,{value:15,children:"15px"}),ze.jsx(zt,{value:16,children:"16px"}),ze.jsx(zt,{value:17,children:"17px"}),ze.jsx(zt,{value:18,children:"18px"})]})})}function kc(G){return ze.jsx(Hi,{sx:{position:"relative",width:"100%"},children:ze.jsxs(Io,{id:"keymap-select",className:"Button",value:G.keymap,variant:"outlined",sx:{width:"100%",marginTop:"10px"},onChange:ue=>{G.setKeymap(ue.target.value),localStorage.setItem("keymap",ue.target.value)},MenuProps:{PaperProps:{sx:{bgcolor:"#15314b","& .MuiMenuItem-root":{color:"#fff",fontWeight:"bold","&.Mui-selected":{backgroundColor:"white",color:"#15314b","&.Mui-focusVisible":{backgroundColor:"white",color:"#15314b"}},"&.Mui-selected:hover":{backgroundColor:"white",color:"#15314b"},"&.Mui-focusVisible":{backgroundColor:"white",color:"#15314b"},"&:hover":{backgroundColor:"#626ee3",color:"white"}}}}},children:[ze.jsx(zt,{value:"sublime",children:"Sublime"}),ze.jsx(zt,{value:"vim",children:"Vim"}),ze.jsx(zt,{value:"emacs",children:"Emacs"})]})})}function wc(G){return ze.jsx(Hi,{sx:{position:"relative",width:"100%"},children:ze.jsxs(Io,{className:"Button",sx:{width:"100%",backgroundColor:"#15314b!important"},value:G.theme,variant:"outlined",onChange:ue=>{G.setTheme(ue.target.value),localStorage.setItem("theme",ue.target.value)},MenuProps:{PaperProps:{sx:{bgcolor:"#15314b","& .MuiMenuItem-root":{color:"#fff",fontWeight:"bold","&.Mui-selected":{backgroundColor:"white",color:"#15314b","&.Mui-focusVisible":{backgroundColor:"white",color:"#15314b"}},"&.Mui-selected:hover":{backgroundColor:"white",color:"#15314b"},"&:hover":{backgroundColor:"#626ee3",color:"white"}}}}},children:[ze.jsx(zt,{value:"dracula",children:"Dracula"}),ze.jsx(zt,{value:"material",children:"Material"}),ze.jsx(zt,{value:"monokai",children:"Monokai"}),ze.jsx(zt,{value:"blackboard",children:"Blackboard"}),ze.jsx(zt,{value:"cobalt",children:"Cobalt"}),ze.jsx(zt,{value:"lucario",children:"Lucario"})]})})}var Fo={},lc=ka;Object.defineProperty(Fo,"__esModule",{value:!0});var sc=Fo.default=void 0,uc=lc(wa()),fc=ze;sc=Fo.default=(0,uc.default)((0,fc.jsx)("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"SettingsOutlined");export{Cc as E,Sc as F,kc as K,Fs as S,bc as T,wc as a,sc as d};
